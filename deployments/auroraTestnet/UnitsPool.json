{
  "address": "0x8288D85d13fA81448D321fc33d82cbf7C23Cb641",
  "abi": [
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": false,
          "internalType": "uint8",
          "name": "version",
          "type": "uint8"
        }
      ],
      "name": "Initialized",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": false,
          "internalType": "address",
          "name": "spender",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "address",
          "name": "armyAddress",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "unitsBought",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "weaponsSpent",
          "type": "uint256"
        }
      ],
      "name": "UnitsBought",
      "type": "event"
    },
    {
      "inputs": [],
      "name": "assetGroup",
      "outputs": [
        {
          "internalType": "string",
          "name": "",
          "type": "string"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "assetType",
      "outputs": [
        {
          "internalType": "string",
          "name": "",
          "type": "string"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "currentZone",
      "outputs": [
        {
          "internalType": "contract IZone",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "epoch",
      "outputs": [
        {
          "internalType": "contract IEpoch",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "epochNumber",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "unitsToBuy",
          "type": "uint256"
        }
      ],
      "name": "getAmountIn",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_zoneAddress",
          "type": "address"
        },
        {
          "internalType": "string",
          "name": "_unitsType",
          "type": "string"
        }
      ],
      "name": "init",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "lastPurchaseTime",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "registry",
      "outputs": [
        {
          "internalType": "contract IRegistry",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "startingPrice",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "resourcesOwner",
          "type": "address"
        },
        {
          "internalType": "address",
          "name": "settlementAddress",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "unitsToBuy",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "maxWeaponsToSell",
          "type": "uint256"
        }
      ],
      "name": "swapWeaponsForExactUnits",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "resourcesOwner",
          "type": "address"
        },
        {
          "internalType": "address",
          "name": "msgSender",
          "type": "address"
        },
        {
          "internalType": "address",
          "name": "settlementAddress",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "unitsToBuy",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "maxWeaponsToSell",
          "type": "uint256"
        }
      ],
      "name": "swapWeaponsForExactUnitsByZone",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "unitsType",
      "outputs": [
        {
          "internalType": "string",
          "name": "",
          "type": "string"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "world",
      "outputs": [
        {
          "internalType": "contract IWorld",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    }
  ],
  "transactionHash": "0x261c3357adcc719821edf7a8ba3fac279763b76a32070510517ef03fab405e9a",
  "receipt": {
    "to": null,
    "from": "0xA2F2078006658594Fa058Ee8dBD08f3AA2Bb6C9c",
    "contractAddress": "0x8288D85d13fA81448D321fc33d82cbf7C23Cb641",
    "transactionIndex": 0,
    "gasUsed": "2165579",
    "logsBloom": "0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
    "blockHash": "0x87a0206185d96be14ef30385ab25ee04a701b7e9a3de0149617bdbde25da750f",
    "transactionHash": "0x261c3357adcc719821edf7a8ba3fac279763b76a32070510517ef03fab405e9a",
    "logs": [],
    "blockNumber": 154237552,
    "cumulativeGasUsed": "0",
    "status": 1,
    "byzantium": true
  },
  "args": [],
  "numDeployments": 1,
  "solcInputHash": "d40fd766cc3fa0d4c836779e74bc4f2f",
  "metadata": "{\"compiler\":{\"version\":\"0.8.16+commit.07a7930e\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"uint8\",\"name\":\"version\",\"type\":\"uint8\"}],\"name\":\"Initialized\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"address\",\"name\":\"spender\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"address\",\"name\":\"armyAddress\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"unitsBought\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"weaponsSpent\",\"type\":\"uint256\"}],\"name\":\"UnitsBought\",\"type\":\"event\"},{\"inputs\":[],\"name\":\"assetGroup\",\"outputs\":[{\"internalType\":\"string\",\"name\":\"\",\"type\":\"string\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"assetType\",\"outputs\":[{\"internalType\":\"string\",\"name\":\"\",\"type\":\"string\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"currentZone\",\"outputs\":[{\"internalType\":\"contract IZone\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"epoch\",\"outputs\":[{\"internalType\":\"contract IEpoch\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"epochNumber\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"unitsToBuy\",\"type\":\"uint256\"}],\"name\":\"getAmountIn\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_zoneAddress\",\"type\":\"address\"},{\"internalType\":\"string\",\"name\":\"_unitsType\",\"type\":\"string\"}],\"name\":\"init\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"lastPurchaseTime\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"registry\",\"outputs\":[{\"internalType\":\"contract IRegistry\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"startingPrice\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"resourcesOwner\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"settlementAddress\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"unitsToBuy\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"maxWeaponsToSell\",\"type\":\"uint256\"}],\"name\":\"swapWeaponsForExactUnits\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"resourcesOwner\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"msgSender\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"settlementAddress\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"unitsToBuy\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"maxWeaponsToSell\",\"type\":\"uint256\"}],\"name\":\"swapWeaponsForExactUnitsByZone\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"unitsType\",\"outputs\":[{\"internalType\":\"string\",\"name\":\"\",\"type\":\"string\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"world\",\"outputs\":[{\"internalType\":\"contract IWorld\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"}],\"devdoc\":{\"kind\":\"dev\",\"methods\":{\"assetGroup()\":{\"details\":\"Reads data from proxy's storage\",\"returns\":{\"_0\":\"World asset group\"}},\"assetType()\":{\"details\":\"Reads data from proxy's storage\",\"returns\":{\"_0\":\"World asset type\"}},\"epoch()\":{\"details\":\"Value is dereferenced from proxy storage and world\"},\"epochNumber()\":{\"details\":\"Reads data from proxy's storage\",\"returns\":{\"_0\":\"Epoch number\"}},\"getAmountIn(uint256)\":{\"details\":\"Returns valid output only for integer unitsToBuy value (not in 1e18 precision)\",\"params\":{\"unitsToBuy\":\"Amount of workers to buy\"},\"returns\":{\"_0\":\"Amount of weapons needed for unitsToBuy\",\"_1\":\"New starting price\"}},\"init(address,string)\":{\"details\":\"Called by factory contract which creates current instance\",\"params\":{\"unitsType\":\"Units type\",\"zoneAddress\":\"Zone address\"}},\"registry()\":{\"details\":\"Value is dereferenced from world\"},\"swapWeaponsForExactUnits(address,address,uint256,uint256)\":{\"details\":\"If resourcesOwner == address(0) -> resources will be taken from msg.senderIf resourcesOwner != address(0) and resourcesOwner has given allowance to msg.sender >= amount of weapons for units -> resources will be taken from resourcesOwner\",\"params\":{\"maxWeaponsToSell\":\"Maximum amount of weapons to be taken for exact amount of units\",\"resourcesOwner\":\"Resources owner\",\"settlementAddress\":\"Settlement address, army of which, will receive units\",\"unitsToBuy\":\"Exact amount of units\"},\"returns\":{\"_0\":\"Amount of units bought by weapons\"}},\"swapWeaponsForExactUnitsByZone(address,address,address,uint256,uint256)\":{\"details\":\"Even though function is opened it can be called only by zoneIf resourcesOwner == address(0) -> resources will be taken from msg.senderIf resourcesOwner != address(0) and resourcesOwner has given allowance to msg.sender >= amount of weapons for units -> resources will be taken from resourcesOwner\",\"params\":{\"maxWeaponsToSell\":\"Maximum amount of weapons to be taken for exact amount of units\",\"msgSender\":\"msg.sender from zone call\",\"resourcesOwner\":\"Resources owner\",\"settlementAddress\":\"Settlement address, army of which, will receive units\",\"unitsToBuy\":\"Exact amount of units\"},\"returns\":{\"_0\":\"Amount of units bought by weapons\"}},\"world()\":{\"details\":\"Value is dereferenced from proxy storage\"}},\"stateVariables\":{\"currentZone\":{\"details\":\"Immutable, initialized on the zone creation\"},\"lastPurchaseTime\":{\"details\":\"Updated every time when #swapWeaponsForExactUnits or #swapWeaponsForExactUnitsByZone is called\"},\"startingPrice\":{\"details\":\"Updated every time when #swapWeaponsForExactUnits or #swapWeaponsForExactUnitsByZone is called\"},\"unitsType\":{\"details\":\"Immutable, initialized on the zone creation\"}},\"version\":1},\"userdoc\":{\"events\":{\"UnitsBought(address,address,uint256,uint256)\":{\"notice\":\"Emitted when #swapWeaponsForExactUnits or #swapWeaponsForExactUnitsByZone is called\"}},\"kind\":\"user\",\"methods\":{\"assetGroup()\":{\"notice\":\"Returns world asset group\"},\"assetType()\":{\"notice\":\"Returns world asset type\"},\"currentZone()\":{\"notice\":\"Zone to which this pool belongs\"},\"epoch()\":{\"notice\":\"Epoch\"},\"epochNumber()\":{\"notice\":\"Returns epoch number\"},\"getAmountIn(uint256)\":{\"notice\":\"Calculates input of weapons based on output whole amount of units\"},\"init(address,string)\":{\"notice\":\"Proxy initializer\"},\"lastPurchaseTime()\":{\"notice\":\"Time at which last purchase is performed\"},\"registry()\":{\"notice\":\"Registry\"},\"startingPrice()\":{\"notice\":\"Starting unit price\"},\"swapWeaponsForExactUnits(address,address,uint256,uint256)\":{\"notice\":\"Swaps weapons() for exact units()\"},\"swapWeaponsForExactUnitsByZone(address,address,address,uint256,uint256)\":{\"notice\":\"Swaps weapons() for exact units()\"},\"unitsType()\":{\"notice\":\"Units type\"},\"world()\":{\"notice\":\"World\"}},\"version\":1}},\"settings\":{\"compilationTarget\":{\"contracts/core/assets/unitsPool/UnitsPool.sol\":\"UnitsPool\"},\"evmVersion\":\"london\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\",\"useLiteralContent\":true},\"optimizer\":{\"enabled\":true,\"runs\":300},\"remappings\":[]},\"sources\":{\"@openzeppelin/contracts/proxy/utils/Initializable.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n// OpenZeppelin Contracts (last updated v4.7.0) (proxy/utils/Initializable.sol)\\n\\npragma solidity ^0.8.2;\\n\\nimport \\\"../../utils/Address.sol\\\";\\n\\n/**\\n * @dev This is a base contract to aid in writing upgradeable contracts, or any kind of contract that will be deployed\\n * behind a proxy. Since proxied contracts do not make use of a constructor, it's common to move constructor logic to an\\n * external initializer function, usually called `initialize`. It then becomes necessary to protect this initializer\\n * function so it can only be called once. The {initializer} modifier provided by this contract will have this effect.\\n *\\n * The initialization functions use a version number. Once a version number is used, it is consumed and cannot be\\n * reused. This mechanism prevents re-execution of each \\\"step\\\" but allows the creation of new initialization steps in\\n * case an upgrade adds a module that needs to be initialized.\\n *\\n * For example:\\n *\\n * [.hljs-theme-light.nopadding]\\n * ```\\n * contract MyToken is ERC20Upgradeable {\\n *     function initialize() initializer public {\\n *         __ERC20_init(\\\"MyToken\\\", \\\"MTK\\\");\\n *     }\\n * }\\n * contract MyTokenV2 is MyToken, ERC20PermitUpgradeable {\\n *     function initializeV2() reinitializer(2) public {\\n *         __ERC20Permit_init(\\\"MyToken\\\");\\n *     }\\n * }\\n * ```\\n *\\n * TIP: To avoid leaving the proxy in an uninitialized state, the initializer function should be called as early as\\n * possible by providing the encoded function call as the `_data` argument to {ERC1967Proxy-constructor}.\\n *\\n * CAUTION: When used with inheritance, manual care must be taken to not invoke a parent initializer twice, or to ensure\\n * that all initializers are idempotent. This is not verified automatically as constructors are by Solidity.\\n *\\n * [CAUTION]\\n * ====\\n * Avoid leaving a contract uninitialized.\\n *\\n * An uninitialized contract can be taken over by an attacker. This applies to both a proxy and its implementation\\n * contract, which may impact the proxy. To prevent the implementation contract from being used, you should invoke\\n * the {_disableInitializers} function in the constructor to automatically lock it when it is deployed:\\n *\\n * [.hljs-theme-light.nopadding]\\n * ```\\n * /// @custom:oz-upgrades-unsafe-allow constructor\\n * constructor() {\\n *     _disableInitializers();\\n * }\\n * ```\\n * ====\\n */\\nabstract contract Initializable {\\n    /**\\n     * @dev Indicates that the contract has been initialized.\\n     * @custom:oz-retyped-from bool\\n     */\\n    uint8 private _initialized;\\n\\n    /**\\n     * @dev Indicates that the contract is in the process of being initialized.\\n     */\\n    bool private _initializing;\\n\\n    /**\\n     * @dev Triggered when the contract has been initialized or reinitialized.\\n     */\\n    event Initialized(uint8 version);\\n\\n    /**\\n     * @dev A modifier that defines a protected initializer function that can be invoked at most once. In its scope,\\n     * `onlyInitializing` functions can be used to initialize parent contracts. Equivalent to `reinitializer(1)`.\\n     */\\n    modifier initializer() {\\n        bool isTopLevelCall = !_initializing;\\n        require(\\n            (isTopLevelCall && _initialized < 1) || (!Address.isContract(address(this)) && _initialized == 1),\\n            \\\"Initializable: contract is already initialized\\\"\\n        );\\n        _initialized = 1;\\n        if (isTopLevelCall) {\\n            _initializing = true;\\n        }\\n        _;\\n        if (isTopLevelCall) {\\n            _initializing = false;\\n            emit Initialized(1);\\n        }\\n    }\\n\\n    /**\\n     * @dev A modifier that defines a protected reinitializer function that can be invoked at most once, and only if the\\n     * contract hasn't been initialized to a greater version before. In its scope, `onlyInitializing` functions can be\\n     * used to initialize parent contracts.\\n     *\\n     * `initializer` is equivalent to `reinitializer(1)`, so a reinitializer may be used after the original\\n     * initialization step. This is essential to configure modules that are added through upgrades and that require\\n     * initialization.\\n     *\\n     * Note that versions can jump in increments greater than 1; this implies that if multiple reinitializers coexist in\\n     * a contract, executing them in the right order is up to the developer or operator.\\n     */\\n    modifier reinitializer(uint8 version) {\\n        require(!_initializing && _initialized < version, \\\"Initializable: contract is already initialized\\\");\\n        _initialized = version;\\n        _initializing = true;\\n        _;\\n        _initializing = false;\\n        emit Initialized(version);\\n    }\\n\\n    /**\\n     * @dev Modifier to protect an initialization function so that it can only be invoked by functions with the\\n     * {initializer} and {reinitializer} modifiers, directly or indirectly.\\n     */\\n    modifier onlyInitializing() {\\n        require(_initializing, \\\"Initializable: contract is not initializing\\\");\\n        _;\\n    }\\n\\n    /**\\n     * @dev Locks the contract, preventing any future reinitialization. This cannot be part of an initializer call.\\n     * Calling this in the constructor of a contract will prevent that contract from being initialized or reinitialized\\n     * to any version. It is recommended to use this to lock implementation contracts that are designed to be called\\n     * through proxies.\\n     */\\n    function _disableInitializers() internal virtual {\\n        require(!_initializing, \\\"Initializable: contract is initializing\\\");\\n        if (_initialized < type(uint8).max) {\\n            _initialized = type(uint8).max;\\n            emit Initialized(type(uint8).max);\\n        }\\n    }\\n}\\n\",\"keccak256\":\"0x2a21b14ff90012878752f230d3ffd5c3405e5938d06c97a7d89c0a64561d0d66\",\"license\":\"MIT\"},\"@openzeppelin/contracts/token/ERC1155/ERC1155.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n// OpenZeppelin Contracts (last updated v4.7.0) (token/ERC1155/ERC1155.sol)\\n\\npragma solidity ^0.8.0;\\n\\nimport \\\"./IERC1155.sol\\\";\\nimport \\\"./IERC1155Receiver.sol\\\";\\nimport \\\"./extensions/IERC1155MetadataURI.sol\\\";\\nimport \\\"../../utils/Address.sol\\\";\\nimport \\\"../../utils/Context.sol\\\";\\nimport \\\"../../utils/introspection/ERC165.sol\\\";\\n\\n/**\\n * @dev Implementation of the basic standard multi-token.\\n * See https://eips.ethereum.org/EIPS/eip-1155\\n * Originally based on code by Enjin: https://github.com/enjin/erc-1155\\n *\\n * _Available since v3.1._\\n */\\ncontract ERC1155 is Context, ERC165, IERC1155, IERC1155MetadataURI {\\n    using Address for address;\\n\\n    // Mapping from token ID to account balances\\n    mapping(uint256 => mapping(address => uint256)) private _balances;\\n\\n    // Mapping from account to operator approvals\\n    mapping(address => mapping(address => bool)) private _operatorApprovals;\\n\\n    // Used as the URI for all token types by relying on ID substitution, e.g. https://token-cdn-domain/{id}.json\\n    string private _uri;\\n\\n    /**\\n     * @dev See {_setURI}.\\n     */\\n    constructor(string memory uri_) {\\n        _setURI(uri_);\\n    }\\n\\n    /**\\n     * @dev See {IERC165-supportsInterface}.\\n     */\\n    function supportsInterface(bytes4 interfaceId) public view virtual override(ERC165, IERC165) returns (bool) {\\n        return\\n            interfaceId == type(IERC1155).interfaceId ||\\n            interfaceId == type(IERC1155MetadataURI).interfaceId ||\\n            super.supportsInterface(interfaceId);\\n    }\\n\\n    /**\\n     * @dev See {IERC1155MetadataURI-uri}.\\n     *\\n     * This implementation returns the same URI for *all* token types. It relies\\n     * on the token type ID substitution mechanism\\n     * https://eips.ethereum.org/EIPS/eip-1155#metadata[defined in the EIP].\\n     *\\n     * Clients calling this function must replace the `\\\\{id\\\\}` substring with the\\n     * actual token type ID.\\n     */\\n    function uri(uint256) public view virtual override returns (string memory) {\\n        return _uri;\\n    }\\n\\n    /**\\n     * @dev See {IERC1155-balanceOf}.\\n     *\\n     * Requirements:\\n     *\\n     * - `account` cannot be the zero address.\\n     */\\n    function balanceOf(address account, uint256 id) public view virtual override returns (uint256) {\\n        require(account != address(0), \\\"ERC1155: address zero is not a valid owner\\\");\\n        return _balances[id][account];\\n    }\\n\\n    /**\\n     * @dev See {IERC1155-balanceOfBatch}.\\n     *\\n     * Requirements:\\n     *\\n     * - `accounts` and `ids` must have the same length.\\n     */\\n    function balanceOfBatch(address[] memory accounts, uint256[] memory ids)\\n        public\\n        view\\n        virtual\\n        override\\n        returns (uint256[] memory)\\n    {\\n        require(accounts.length == ids.length, \\\"ERC1155: accounts and ids length mismatch\\\");\\n\\n        uint256[] memory batchBalances = new uint256[](accounts.length);\\n\\n        for (uint256 i = 0; i < accounts.length; ++i) {\\n            batchBalances[i] = balanceOf(accounts[i], ids[i]);\\n        }\\n\\n        return batchBalances;\\n    }\\n\\n    /**\\n     * @dev See {IERC1155-setApprovalForAll}.\\n     */\\n    function setApprovalForAll(address operator, bool approved) public virtual override {\\n        _setApprovalForAll(_msgSender(), operator, approved);\\n    }\\n\\n    /**\\n     * @dev See {IERC1155-isApprovedForAll}.\\n     */\\n    function isApprovedForAll(address account, address operator) public view virtual override returns (bool) {\\n        return _operatorApprovals[account][operator];\\n    }\\n\\n    /**\\n     * @dev See {IERC1155-safeTransferFrom}.\\n     */\\n    function safeTransferFrom(\\n        address from,\\n        address to,\\n        uint256 id,\\n        uint256 amount,\\n        bytes memory data\\n    ) public virtual override {\\n        require(\\n            from == _msgSender() || isApprovedForAll(from, _msgSender()),\\n            \\\"ERC1155: caller is not token owner nor approved\\\"\\n        );\\n        _safeTransferFrom(from, to, id, amount, data);\\n    }\\n\\n    /**\\n     * @dev See {IERC1155-safeBatchTransferFrom}.\\n     */\\n    function safeBatchTransferFrom(\\n        address from,\\n        address to,\\n        uint256[] memory ids,\\n        uint256[] memory amounts,\\n        bytes memory data\\n    ) public virtual override {\\n        require(\\n            from == _msgSender() || isApprovedForAll(from, _msgSender()),\\n            \\\"ERC1155: caller is not token owner nor approved\\\"\\n        );\\n        _safeBatchTransferFrom(from, to, ids, amounts, data);\\n    }\\n\\n    /**\\n     * @dev Transfers `amount` tokens of token type `id` from `from` to `to`.\\n     *\\n     * Emits a {TransferSingle} event.\\n     *\\n     * Requirements:\\n     *\\n     * - `to` cannot be the zero address.\\n     * - `from` must have a balance of tokens of type `id` of at least `amount`.\\n     * - If `to` refers to a smart contract, it must implement {IERC1155Receiver-onERC1155Received} and return the\\n     * acceptance magic value.\\n     */\\n    function _safeTransferFrom(\\n        address from,\\n        address to,\\n        uint256 id,\\n        uint256 amount,\\n        bytes memory data\\n    ) internal virtual {\\n        require(to != address(0), \\\"ERC1155: transfer to the zero address\\\");\\n\\n        address operator = _msgSender();\\n        uint256[] memory ids = _asSingletonArray(id);\\n        uint256[] memory amounts = _asSingletonArray(amount);\\n\\n        _beforeTokenTransfer(operator, from, to, ids, amounts, data);\\n\\n        uint256 fromBalance = _balances[id][from];\\n        require(fromBalance >= amount, \\\"ERC1155: insufficient balance for transfer\\\");\\n        unchecked {\\n            _balances[id][from] = fromBalance - amount;\\n        }\\n        _balances[id][to] += amount;\\n\\n        emit TransferSingle(operator, from, to, id, amount);\\n\\n        _afterTokenTransfer(operator, from, to, ids, amounts, data);\\n\\n        _doSafeTransferAcceptanceCheck(operator, from, to, id, amount, data);\\n    }\\n\\n    /**\\n     * @dev xref:ROOT:erc1155.adoc#batch-operations[Batched] version of {_safeTransferFrom}.\\n     *\\n     * Emits a {TransferBatch} event.\\n     *\\n     * Requirements:\\n     *\\n     * - If `to` refers to a smart contract, it must implement {IERC1155Receiver-onERC1155BatchReceived} and return the\\n     * acceptance magic value.\\n     */\\n    function _safeBatchTransferFrom(\\n        address from,\\n        address to,\\n        uint256[] memory ids,\\n        uint256[] memory amounts,\\n        bytes memory data\\n    ) internal virtual {\\n        require(ids.length == amounts.length, \\\"ERC1155: ids and amounts length mismatch\\\");\\n        require(to != address(0), \\\"ERC1155: transfer to the zero address\\\");\\n\\n        address operator = _msgSender();\\n\\n        _beforeTokenTransfer(operator, from, to, ids, amounts, data);\\n\\n        for (uint256 i = 0; i < ids.length; ++i) {\\n            uint256 id = ids[i];\\n            uint256 amount = amounts[i];\\n\\n            uint256 fromBalance = _balances[id][from];\\n            require(fromBalance >= amount, \\\"ERC1155: insufficient balance for transfer\\\");\\n            unchecked {\\n                _balances[id][from] = fromBalance - amount;\\n            }\\n            _balances[id][to] += amount;\\n        }\\n\\n        emit TransferBatch(operator, from, to, ids, amounts);\\n\\n        _afterTokenTransfer(operator, from, to, ids, amounts, data);\\n\\n        _doSafeBatchTransferAcceptanceCheck(operator, from, to, ids, amounts, data);\\n    }\\n\\n    /**\\n     * @dev Sets a new URI for all token types, by relying on the token type ID\\n     * substitution mechanism\\n     * https://eips.ethereum.org/EIPS/eip-1155#metadata[defined in the EIP].\\n     *\\n     * By this mechanism, any occurrence of the `\\\\{id\\\\}` substring in either the\\n     * URI or any of the amounts in the JSON file at said URI will be replaced by\\n     * clients with the token type ID.\\n     *\\n     * For example, the `https://token-cdn-domain/\\\\{id\\\\}.json` URI would be\\n     * interpreted by clients as\\n     * `https://token-cdn-domain/000000000000000000000000000000000000000000000000000000000004cce0.json`\\n     * for token type ID 0x4cce0.\\n     *\\n     * See {uri}.\\n     *\\n     * Because these URIs cannot be meaningfully represented by the {URI} event,\\n     * this function emits no events.\\n     */\\n    function _setURI(string memory newuri) internal virtual {\\n        _uri = newuri;\\n    }\\n\\n    /**\\n     * @dev Creates `amount` tokens of token type `id`, and assigns them to `to`.\\n     *\\n     * Emits a {TransferSingle} event.\\n     *\\n     * Requirements:\\n     *\\n     * - `to` cannot be the zero address.\\n     * - If `to` refers to a smart contract, it must implement {IERC1155Receiver-onERC1155Received} and return the\\n     * acceptance magic value.\\n     */\\n    function _mint(\\n        address to,\\n        uint256 id,\\n        uint256 amount,\\n        bytes memory data\\n    ) internal virtual {\\n        require(to != address(0), \\\"ERC1155: mint to the zero address\\\");\\n\\n        address operator = _msgSender();\\n        uint256[] memory ids = _asSingletonArray(id);\\n        uint256[] memory amounts = _asSingletonArray(amount);\\n\\n        _beforeTokenTransfer(operator, address(0), to, ids, amounts, data);\\n\\n        _balances[id][to] += amount;\\n        emit TransferSingle(operator, address(0), to, id, amount);\\n\\n        _afterTokenTransfer(operator, address(0), to, ids, amounts, data);\\n\\n        _doSafeTransferAcceptanceCheck(operator, address(0), to, id, amount, data);\\n    }\\n\\n    /**\\n     * @dev xref:ROOT:erc1155.adoc#batch-operations[Batched] version of {_mint}.\\n     *\\n     * Emits a {TransferBatch} event.\\n     *\\n     * Requirements:\\n     *\\n     * - `ids` and `amounts` must have the same length.\\n     * - If `to` refers to a smart contract, it must implement {IERC1155Receiver-onERC1155BatchReceived} and return the\\n     * acceptance magic value.\\n     */\\n    function _mintBatch(\\n        address to,\\n        uint256[] memory ids,\\n        uint256[] memory amounts,\\n        bytes memory data\\n    ) internal virtual {\\n        require(to != address(0), \\\"ERC1155: mint to the zero address\\\");\\n        require(ids.length == amounts.length, \\\"ERC1155: ids and amounts length mismatch\\\");\\n\\n        address operator = _msgSender();\\n\\n        _beforeTokenTransfer(operator, address(0), to, ids, amounts, data);\\n\\n        for (uint256 i = 0; i < ids.length; i++) {\\n            _balances[ids[i]][to] += amounts[i];\\n        }\\n\\n        emit TransferBatch(operator, address(0), to, ids, amounts);\\n\\n        _afterTokenTransfer(operator, address(0), to, ids, amounts, data);\\n\\n        _doSafeBatchTransferAcceptanceCheck(operator, address(0), to, ids, amounts, data);\\n    }\\n\\n    /**\\n     * @dev Destroys `amount` tokens of token type `id` from `from`\\n     *\\n     * Emits a {TransferSingle} event.\\n     *\\n     * Requirements:\\n     *\\n     * - `from` cannot be the zero address.\\n     * - `from` must have at least `amount` tokens of token type `id`.\\n     */\\n    function _burn(\\n        address from,\\n        uint256 id,\\n        uint256 amount\\n    ) internal virtual {\\n        require(from != address(0), \\\"ERC1155: burn from the zero address\\\");\\n\\n        address operator = _msgSender();\\n        uint256[] memory ids = _asSingletonArray(id);\\n        uint256[] memory amounts = _asSingletonArray(amount);\\n\\n        _beforeTokenTransfer(operator, from, address(0), ids, amounts, \\\"\\\");\\n\\n        uint256 fromBalance = _balances[id][from];\\n        require(fromBalance >= amount, \\\"ERC1155: burn amount exceeds balance\\\");\\n        unchecked {\\n            _balances[id][from] = fromBalance - amount;\\n        }\\n\\n        emit TransferSingle(operator, from, address(0), id, amount);\\n\\n        _afterTokenTransfer(operator, from, address(0), ids, amounts, \\\"\\\");\\n    }\\n\\n    /**\\n     * @dev xref:ROOT:erc1155.adoc#batch-operations[Batched] version of {_burn}.\\n     *\\n     * Emits a {TransferBatch} event.\\n     *\\n     * Requirements:\\n     *\\n     * - `ids` and `amounts` must have the same length.\\n     */\\n    function _burnBatch(\\n        address from,\\n        uint256[] memory ids,\\n        uint256[] memory amounts\\n    ) internal virtual {\\n        require(from != address(0), \\\"ERC1155: burn from the zero address\\\");\\n        require(ids.length == amounts.length, \\\"ERC1155: ids and amounts length mismatch\\\");\\n\\n        address operator = _msgSender();\\n\\n        _beforeTokenTransfer(operator, from, address(0), ids, amounts, \\\"\\\");\\n\\n        for (uint256 i = 0; i < ids.length; i++) {\\n            uint256 id = ids[i];\\n            uint256 amount = amounts[i];\\n\\n            uint256 fromBalance = _balances[id][from];\\n            require(fromBalance >= amount, \\\"ERC1155: burn amount exceeds balance\\\");\\n            unchecked {\\n                _balances[id][from] = fromBalance - amount;\\n            }\\n        }\\n\\n        emit TransferBatch(operator, from, address(0), ids, amounts);\\n\\n        _afterTokenTransfer(operator, from, address(0), ids, amounts, \\\"\\\");\\n    }\\n\\n    /**\\n     * @dev Approve `operator` to operate on all of `owner` tokens\\n     *\\n     * Emits an {ApprovalForAll} event.\\n     */\\n    function _setApprovalForAll(\\n        address owner,\\n        address operator,\\n        bool approved\\n    ) internal virtual {\\n        require(owner != operator, \\\"ERC1155: setting approval status for self\\\");\\n        _operatorApprovals[owner][operator] = approved;\\n        emit ApprovalForAll(owner, operator, approved);\\n    }\\n\\n    /**\\n     * @dev Hook that is called before any token transfer. This includes minting\\n     * and burning, as well as batched variants.\\n     *\\n     * The same hook is called on both single and batched variants. For single\\n     * transfers, the length of the `ids` and `amounts` arrays will be 1.\\n     *\\n     * Calling conditions (for each `id` and `amount` pair):\\n     *\\n     * - When `from` and `to` are both non-zero, `amount` of ``from``'s tokens\\n     * of token type `id` will be  transferred to `to`.\\n     * - When `from` is zero, `amount` tokens of token type `id` will be minted\\n     * for `to`.\\n     * - when `to` is zero, `amount` of ``from``'s tokens of token type `id`\\n     * will be burned.\\n     * - `from` and `to` are never both zero.\\n     * - `ids` and `amounts` have the same, non-zero length.\\n     *\\n     * To learn more about hooks, head to xref:ROOT:extending-contracts.adoc#using-hooks[Using Hooks].\\n     */\\n    function _beforeTokenTransfer(\\n        address operator,\\n        address from,\\n        address to,\\n        uint256[] memory ids,\\n        uint256[] memory amounts,\\n        bytes memory data\\n    ) internal virtual {}\\n\\n    /**\\n     * @dev Hook that is called after any token transfer. This includes minting\\n     * and burning, as well as batched variants.\\n     *\\n     * The same hook is called on both single and batched variants. For single\\n     * transfers, the length of the `id` and `amount` arrays will be 1.\\n     *\\n     * Calling conditions (for each `id` and `amount` pair):\\n     *\\n     * - When `from` and `to` are both non-zero, `amount` of ``from``'s tokens\\n     * of token type `id` will be  transferred to `to`.\\n     * - When `from` is zero, `amount` tokens of token type `id` will be minted\\n     * for `to`.\\n     * - when `to` is zero, `amount` of ``from``'s tokens of token type `id`\\n     * will be burned.\\n     * - `from` and `to` are never both zero.\\n     * - `ids` and `amounts` have the same, non-zero length.\\n     *\\n     * To learn more about hooks, head to xref:ROOT:extending-contracts.adoc#using-hooks[Using Hooks].\\n     */\\n    function _afterTokenTransfer(\\n        address operator,\\n        address from,\\n        address to,\\n        uint256[] memory ids,\\n        uint256[] memory amounts,\\n        bytes memory data\\n    ) internal virtual {}\\n\\n    function _doSafeTransferAcceptanceCheck(\\n        address operator,\\n        address from,\\n        address to,\\n        uint256 id,\\n        uint256 amount,\\n        bytes memory data\\n    ) private {\\n        if (to.isContract()) {\\n            try IERC1155Receiver(to).onERC1155Received(operator, from, id, amount, data) returns (bytes4 response) {\\n                if (response != IERC1155Receiver.onERC1155Received.selector) {\\n                    revert(\\\"ERC1155: ERC1155Receiver rejected tokens\\\");\\n                }\\n            } catch Error(string memory reason) {\\n                revert(reason);\\n            } catch {\\n                revert(\\\"ERC1155: transfer to non ERC1155Receiver implementer\\\");\\n            }\\n        }\\n    }\\n\\n    function _doSafeBatchTransferAcceptanceCheck(\\n        address operator,\\n        address from,\\n        address to,\\n        uint256[] memory ids,\\n        uint256[] memory amounts,\\n        bytes memory data\\n    ) private {\\n        if (to.isContract()) {\\n            try IERC1155Receiver(to).onERC1155BatchReceived(operator, from, ids, amounts, data) returns (\\n                bytes4 response\\n            ) {\\n                if (response != IERC1155Receiver.onERC1155BatchReceived.selector) {\\n                    revert(\\\"ERC1155: ERC1155Receiver rejected tokens\\\");\\n                }\\n            } catch Error(string memory reason) {\\n                revert(reason);\\n            } catch {\\n                revert(\\\"ERC1155: transfer to non ERC1155Receiver implementer\\\");\\n            }\\n        }\\n    }\\n\\n    function _asSingletonArray(uint256 element) private pure returns (uint256[] memory) {\\n        uint256[] memory array = new uint256[](1);\\n        array[0] = element;\\n\\n        return array;\\n    }\\n}\\n\",\"keccak256\":\"0x447a21c87433c0f11252912313a96f3454629ef88cca7a4eefbb283b3ec409f9\",\"license\":\"MIT\"},\"@openzeppelin/contracts/token/ERC1155/IERC1155.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n// OpenZeppelin Contracts (last updated v4.7.0) (token/ERC1155/IERC1155.sol)\\n\\npragma solidity ^0.8.0;\\n\\nimport \\\"../../utils/introspection/IERC165.sol\\\";\\n\\n/**\\n * @dev Required interface of an ERC1155 compliant contract, as defined in the\\n * https://eips.ethereum.org/EIPS/eip-1155[EIP].\\n *\\n * _Available since v3.1._\\n */\\ninterface IERC1155 is IERC165 {\\n    /**\\n     * @dev Emitted when `value` tokens of token type `id` are transferred from `from` to `to` by `operator`.\\n     */\\n    event TransferSingle(address indexed operator, address indexed from, address indexed to, uint256 id, uint256 value);\\n\\n    /**\\n     * @dev Equivalent to multiple {TransferSingle} events, where `operator`, `from` and `to` are the same for all\\n     * transfers.\\n     */\\n    event TransferBatch(\\n        address indexed operator,\\n        address indexed from,\\n        address indexed to,\\n        uint256[] ids,\\n        uint256[] values\\n    );\\n\\n    /**\\n     * @dev Emitted when `account` grants or revokes permission to `operator` to transfer their tokens, according to\\n     * `approved`.\\n     */\\n    event ApprovalForAll(address indexed account, address indexed operator, bool approved);\\n\\n    /**\\n     * @dev Emitted when the URI for token type `id` changes to `value`, if it is a non-programmatic URI.\\n     *\\n     * If an {URI} event was emitted for `id`, the standard\\n     * https://eips.ethereum.org/EIPS/eip-1155#metadata-extensions[guarantees] that `value` will equal the value\\n     * returned by {IERC1155MetadataURI-uri}.\\n     */\\n    event URI(string value, uint256 indexed id);\\n\\n    /**\\n     * @dev Returns the amount of tokens of token type `id` owned by `account`.\\n     *\\n     * Requirements:\\n     *\\n     * - `account` cannot be the zero address.\\n     */\\n    function balanceOf(address account, uint256 id) external view returns (uint256);\\n\\n    /**\\n     * @dev xref:ROOT:erc1155.adoc#batch-operations[Batched] version of {balanceOf}.\\n     *\\n     * Requirements:\\n     *\\n     * - `accounts` and `ids` must have the same length.\\n     */\\n    function balanceOfBatch(address[] calldata accounts, uint256[] calldata ids)\\n        external\\n        view\\n        returns (uint256[] memory);\\n\\n    /**\\n     * @dev Grants or revokes permission to `operator` to transfer the caller's tokens, according to `approved`,\\n     *\\n     * Emits an {ApprovalForAll} event.\\n     *\\n     * Requirements:\\n     *\\n     * - `operator` cannot be the caller.\\n     */\\n    function setApprovalForAll(address operator, bool approved) external;\\n\\n    /**\\n     * @dev Returns true if `operator` is approved to transfer ``account``'s tokens.\\n     *\\n     * See {setApprovalForAll}.\\n     */\\n    function isApprovedForAll(address account, address operator) external view returns (bool);\\n\\n    /**\\n     * @dev Transfers `amount` tokens of token type `id` from `from` to `to`.\\n     *\\n     * Emits a {TransferSingle} event.\\n     *\\n     * Requirements:\\n     *\\n     * - `to` cannot be the zero address.\\n     * - If the caller is not `from`, it must have been approved to spend ``from``'s tokens via {setApprovalForAll}.\\n     * - `from` must have a balance of tokens of type `id` of at least `amount`.\\n     * - If `to` refers to a smart contract, it must implement {IERC1155Receiver-onERC1155Received} and return the\\n     * acceptance magic value.\\n     */\\n    function safeTransferFrom(\\n        address from,\\n        address to,\\n        uint256 id,\\n        uint256 amount,\\n        bytes calldata data\\n    ) external;\\n\\n    /**\\n     * @dev xref:ROOT:erc1155.adoc#batch-operations[Batched] version of {safeTransferFrom}.\\n     *\\n     * Emits a {TransferBatch} event.\\n     *\\n     * Requirements:\\n     *\\n     * - `ids` and `amounts` must have the same length.\\n     * - If `to` refers to a smart contract, it must implement {IERC1155Receiver-onERC1155BatchReceived} and return the\\n     * acceptance magic value.\\n     */\\n    function safeBatchTransferFrom(\\n        address from,\\n        address to,\\n        uint256[] calldata ids,\\n        uint256[] calldata amounts,\\n        bytes calldata data\\n    ) external;\\n}\\n\",\"keccak256\":\"0x6392f2cfe3a5ee802227fe7a2dfd47096d881aec89bddd214b35c5b46d3cd941\",\"license\":\"MIT\"},\"@openzeppelin/contracts/token/ERC1155/IERC1155Receiver.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n// OpenZeppelin Contracts (last updated v4.5.0) (token/ERC1155/IERC1155Receiver.sol)\\n\\npragma solidity ^0.8.0;\\n\\nimport \\\"../../utils/introspection/IERC165.sol\\\";\\n\\n/**\\n * @dev _Available since v3.1._\\n */\\ninterface IERC1155Receiver is IERC165 {\\n    /**\\n     * @dev Handles the receipt of a single ERC1155 token type. This function is\\n     * called at the end of a `safeTransferFrom` after the balance has been updated.\\n     *\\n     * NOTE: To accept the transfer, this must return\\n     * `bytes4(keccak256(\\\"onERC1155Received(address,address,uint256,uint256,bytes)\\\"))`\\n     * (i.e. 0xf23a6e61, or its own function selector).\\n     *\\n     * @param operator The address which initiated the transfer (i.e. msg.sender)\\n     * @param from The address which previously owned the token\\n     * @param id The ID of the token being transferred\\n     * @param value The amount of tokens being transferred\\n     * @param data Additional data with no specified format\\n     * @return `bytes4(keccak256(\\\"onERC1155Received(address,address,uint256,uint256,bytes)\\\"))` if transfer is allowed\\n     */\\n    function onERC1155Received(\\n        address operator,\\n        address from,\\n        uint256 id,\\n        uint256 value,\\n        bytes calldata data\\n    ) external returns (bytes4);\\n\\n    /**\\n     * @dev Handles the receipt of a multiple ERC1155 token types. This function\\n     * is called at the end of a `safeBatchTransferFrom` after the balances have\\n     * been updated.\\n     *\\n     * NOTE: To accept the transfer(s), this must return\\n     * `bytes4(keccak256(\\\"onERC1155BatchReceived(address,address,uint256[],uint256[],bytes)\\\"))`\\n     * (i.e. 0xbc197c81, or its own function selector).\\n     *\\n     * @param operator The address which initiated the batch transfer (i.e. msg.sender)\\n     * @param from The address which previously owned the token\\n     * @param ids An array containing ids of each token being transferred (order and length must match values array)\\n     * @param values An array containing amounts of each token being transferred (order and length must match ids array)\\n     * @param data Additional data with no specified format\\n     * @return `bytes4(keccak256(\\\"onERC1155BatchReceived(address,address,uint256[],uint256[],bytes)\\\"))` if transfer is allowed\\n     */\\n    function onERC1155BatchReceived(\\n        address operator,\\n        address from,\\n        uint256[] calldata ids,\\n        uint256[] calldata values,\\n        bytes calldata data\\n    ) external returns (bytes4);\\n}\\n\",\"keccak256\":\"0xeb373f1fdc7b755c6a750123a9b9e3a8a02c1470042fd6505d875000a80bde0b\",\"license\":\"MIT\"},\"@openzeppelin/contracts/token/ERC1155/extensions/IERC1155MetadataURI.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n// OpenZeppelin Contracts v4.4.1 (token/ERC1155/extensions/IERC1155MetadataURI.sol)\\n\\npragma solidity ^0.8.0;\\n\\nimport \\\"../IERC1155.sol\\\";\\n\\n/**\\n * @dev Interface of the optional ERC1155MetadataExtension interface, as defined\\n * in the https://eips.ethereum.org/EIPS/eip-1155#metadata-extensions[EIP].\\n *\\n * _Available since v3.1._\\n */\\ninterface IERC1155MetadataURI is IERC1155 {\\n    /**\\n     * @dev Returns the URI for token type `id`.\\n     *\\n     * If the `\\\\{id\\\\}` substring is present in the URI, it must be replaced by\\n     * clients with the actual token type ID.\\n     */\\n    function uri(uint256 id) external view returns (string memory);\\n}\\n\",\"keccak256\":\"0xa66d18b9a85458d28fc3304717964502ae36f7f8a2ff35bc83f6f85d74b03574\",\"license\":\"MIT\"},\"@openzeppelin/contracts/token/ERC20/IERC20.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n// OpenZeppelin Contracts (last updated v4.6.0) (token/ERC20/IERC20.sol)\\n\\npragma solidity ^0.8.0;\\n\\n/**\\n * @dev Interface of the ERC20 standard as defined in the EIP.\\n */\\ninterface IERC20 {\\n    /**\\n     * @dev Emitted when `value` tokens are moved from one account (`from`) to\\n     * another (`to`).\\n     *\\n     * Note that `value` may be zero.\\n     */\\n    event Transfer(address indexed from, address indexed to, uint256 value);\\n\\n    /**\\n     * @dev Emitted when the allowance of a `spender` for an `owner` is set by\\n     * a call to {approve}. `value` is the new allowance.\\n     */\\n    event Approval(address indexed owner, address indexed spender, uint256 value);\\n\\n    /**\\n     * @dev Returns the amount of tokens in existence.\\n     */\\n    function totalSupply() external view returns (uint256);\\n\\n    /**\\n     * @dev Returns the amount of tokens owned by `account`.\\n     */\\n    function balanceOf(address account) external view returns (uint256);\\n\\n    /**\\n     * @dev Moves `amount` tokens from the caller's account to `to`.\\n     *\\n     * Returns a boolean value indicating whether the operation succeeded.\\n     *\\n     * Emits a {Transfer} event.\\n     */\\n    function transfer(address to, uint256 amount) external returns (bool);\\n\\n    /**\\n     * @dev Returns the remaining number of tokens that `spender` will be\\n     * allowed to spend on behalf of `owner` through {transferFrom}. This is\\n     * zero by default.\\n     *\\n     * This value changes when {approve} or {transferFrom} are called.\\n     */\\n    function allowance(address owner, address spender) external view returns (uint256);\\n\\n    /**\\n     * @dev Sets `amount` as the allowance of `spender` over the caller's tokens.\\n     *\\n     * Returns a boolean value indicating whether the operation succeeded.\\n     *\\n     * IMPORTANT: Beware that changing an allowance with this method brings the risk\\n     * that someone may use both the old and the new allowance by unfortunate\\n     * transaction ordering. One possible solution to mitigate this race\\n     * condition is to first reduce the spender's allowance to 0 and set the\\n     * desired value afterwards:\\n     * https://github.com/ethereum/EIPs/issues/20#issuecomment-263524729\\n     *\\n     * Emits an {Approval} event.\\n     */\\n    function approve(address spender, uint256 amount) external returns (bool);\\n\\n    /**\\n     * @dev Moves `amount` tokens from `from` to `to` using the\\n     * allowance mechanism. `amount` is then deducted from the caller's\\n     * allowance.\\n     *\\n     * Returns a boolean value indicating whether the operation succeeded.\\n     *\\n     * Emits a {Transfer} event.\\n     */\\n    function transferFrom(\\n        address from,\\n        address to,\\n        uint256 amount\\n    ) external returns (bool);\\n}\\n\",\"keccak256\":\"0x9750c6b834f7b43000631af5cc30001c5f547b3ceb3635488f140f60e897ea6b\",\"license\":\"MIT\"},\"@openzeppelin/contracts/token/ERC721/IERC721.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n// OpenZeppelin Contracts (last updated v4.7.0) (token/ERC721/IERC721.sol)\\n\\npragma solidity ^0.8.0;\\n\\nimport \\\"../../utils/introspection/IERC165.sol\\\";\\n\\n/**\\n * @dev Required interface of an ERC721 compliant contract.\\n */\\ninterface IERC721 is IERC165 {\\n    /**\\n     * @dev Emitted when `tokenId` token is transferred from `from` to `to`.\\n     */\\n    event Transfer(address indexed from, address indexed to, uint256 indexed tokenId);\\n\\n    /**\\n     * @dev Emitted when `owner` enables `approved` to manage the `tokenId` token.\\n     */\\n    event Approval(address indexed owner, address indexed approved, uint256 indexed tokenId);\\n\\n    /**\\n     * @dev Emitted when `owner` enables or disables (`approved`) `operator` to manage all of its assets.\\n     */\\n    event ApprovalForAll(address indexed owner, address indexed operator, bool approved);\\n\\n    /**\\n     * @dev Returns the number of tokens in ``owner``'s account.\\n     */\\n    function balanceOf(address owner) external view returns (uint256 balance);\\n\\n    /**\\n     * @dev Returns the owner of the `tokenId` token.\\n     *\\n     * Requirements:\\n     *\\n     * - `tokenId` must exist.\\n     */\\n    function ownerOf(uint256 tokenId) external view returns (address owner);\\n\\n    /**\\n     * @dev Safely transfers `tokenId` token from `from` to `to`.\\n     *\\n     * Requirements:\\n     *\\n     * - `from` cannot be the zero address.\\n     * - `to` cannot be the zero address.\\n     * - `tokenId` token must exist and be owned by `from`.\\n     * - If the caller is not `from`, it must be approved to move this token by either {approve} or {setApprovalForAll}.\\n     * - If `to` refers to a smart contract, it must implement {IERC721Receiver-onERC721Received}, which is called upon a safe transfer.\\n     *\\n     * Emits a {Transfer} event.\\n     */\\n    function safeTransferFrom(\\n        address from,\\n        address to,\\n        uint256 tokenId,\\n        bytes calldata data\\n    ) external;\\n\\n    /**\\n     * @dev Safely transfers `tokenId` token from `from` to `to`, checking first that contract recipients\\n     * are aware of the ERC721 protocol to prevent tokens from being forever locked.\\n     *\\n     * Requirements:\\n     *\\n     * - `from` cannot be the zero address.\\n     * - `to` cannot be the zero address.\\n     * - `tokenId` token must exist and be owned by `from`.\\n     * - If the caller is not `from`, it must have been allowed to move this token by either {approve} or {setApprovalForAll}.\\n     * - If `to` refers to a smart contract, it must implement {IERC721Receiver-onERC721Received}, which is called upon a safe transfer.\\n     *\\n     * Emits a {Transfer} event.\\n     */\\n    function safeTransferFrom(\\n        address from,\\n        address to,\\n        uint256 tokenId\\n    ) external;\\n\\n    /**\\n     * @dev Transfers `tokenId` token from `from` to `to`.\\n     *\\n     * WARNING: Usage of this method is discouraged, use {safeTransferFrom} whenever possible.\\n     *\\n     * Requirements:\\n     *\\n     * - `from` cannot be the zero address.\\n     * - `to` cannot be the zero address.\\n     * - `tokenId` token must be owned by `from`.\\n     * - If the caller is not `from`, it must be approved to move this token by either {approve} or {setApprovalForAll}.\\n     *\\n     * Emits a {Transfer} event.\\n     */\\n    function transferFrom(\\n        address from,\\n        address to,\\n        uint256 tokenId\\n    ) external;\\n\\n    /**\\n     * @dev Gives permission to `to` to transfer `tokenId` token to another account.\\n     * The approval is cleared when the token is transferred.\\n     *\\n     * Only a single account can be approved at a time, so approving the zero address clears previous approvals.\\n     *\\n     * Requirements:\\n     *\\n     * - The caller must own the token or be an approved operator.\\n     * - `tokenId` must exist.\\n     *\\n     * Emits an {Approval} event.\\n     */\\n    function approve(address to, uint256 tokenId) external;\\n\\n    /**\\n     * @dev Approve or remove `operator` as an operator for the caller.\\n     * Operators can call {transferFrom} or {safeTransferFrom} for any token owned by the caller.\\n     *\\n     * Requirements:\\n     *\\n     * - The `operator` cannot be the caller.\\n     *\\n     * Emits an {ApprovalForAll} event.\\n     */\\n    function setApprovalForAll(address operator, bool _approved) external;\\n\\n    /**\\n     * @dev Returns the account approved for `tokenId` token.\\n     *\\n     * Requirements:\\n     *\\n     * - `tokenId` must exist.\\n     */\\n    function getApproved(uint256 tokenId) external view returns (address operator);\\n\\n    /**\\n     * @dev Returns if the `operator` is allowed to manage all of the assets of `owner`.\\n     *\\n     * See {setApprovalForAll}\\n     */\\n    function isApprovedForAll(address owner, address operator) external view returns (bool);\\n}\\n\",\"keccak256\":\"0xed6a749c5373af398105ce6ee3ac4763aa450ea7285d268c85d9eeca809cdb1f\",\"license\":\"MIT\"},\"@openzeppelin/contracts/utils/Address.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n// OpenZeppelin Contracts (last updated v4.7.0) (utils/Address.sol)\\n\\npragma solidity ^0.8.1;\\n\\n/**\\n * @dev Collection of functions related to the address type\\n */\\nlibrary Address {\\n    /**\\n     * @dev Returns true if `account` is a contract.\\n     *\\n     * [IMPORTANT]\\n     * ====\\n     * It is unsafe to assume that an address for which this function returns\\n     * false is an externally-owned account (EOA) and not a contract.\\n     *\\n     * Among others, `isContract` will return false for the following\\n     * types of addresses:\\n     *\\n     *  - an externally-owned account\\n     *  - a contract in construction\\n     *  - an address where a contract will be created\\n     *  - an address where a contract lived, but was destroyed\\n     * ====\\n     *\\n     * [IMPORTANT]\\n     * ====\\n     * You shouldn't rely on `isContract` to protect against flash loan attacks!\\n     *\\n     * Preventing calls from contracts is highly discouraged. It breaks composability, breaks support for smart wallets\\n     * like Gnosis Safe, and does not provide security since it can be circumvented by calling from a contract\\n     * constructor.\\n     * ====\\n     */\\n    function isContract(address account) internal view returns (bool) {\\n        // This method relies on extcodesize/address.code.length, which returns 0\\n        // for contracts in construction, since the code is only stored at the end\\n        // of the constructor execution.\\n\\n        return account.code.length > 0;\\n    }\\n\\n    /**\\n     * @dev Replacement for Solidity's `transfer`: sends `amount` wei to\\n     * `recipient`, forwarding all available gas and reverting on errors.\\n     *\\n     * https://eips.ethereum.org/EIPS/eip-1884[EIP1884] increases the gas cost\\n     * of certain opcodes, possibly making contracts go over the 2300 gas limit\\n     * imposed by `transfer`, making them unable to receive funds via\\n     * `transfer`. {sendValue} removes this limitation.\\n     *\\n     * https://diligence.consensys.net/posts/2019/09/stop-using-soliditys-transfer-now/[Learn more].\\n     *\\n     * IMPORTANT: because control is transferred to `recipient`, care must be\\n     * taken to not create reentrancy vulnerabilities. Consider using\\n     * {ReentrancyGuard} or the\\n     * https://solidity.readthedocs.io/en/v0.5.11/security-considerations.html#use-the-checks-effects-interactions-pattern[checks-effects-interactions pattern].\\n     */\\n    function sendValue(address payable recipient, uint256 amount) internal {\\n        require(address(this).balance >= amount, \\\"Address: insufficient balance\\\");\\n\\n        (bool success, ) = recipient.call{value: amount}(\\\"\\\");\\n        require(success, \\\"Address: unable to send value, recipient may have reverted\\\");\\n    }\\n\\n    /**\\n     * @dev Performs a Solidity function call using a low level `call`. A\\n     * plain `call` is an unsafe replacement for a function call: use this\\n     * function instead.\\n     *\\n     * If `target` reverts with a revert reason, it is bubbled up by this\\n     * function (like regular Solidity function calls).\\n     *\\n     * Returns the raw returned data. To convert to the expected return value,\\n     * use https://solidity.readthedocs.io/en/latest/units-and-global-variables.html?highlight=abi.decode#abi-encoding-and-decoding-functions[`abi.decode`].\\n     *\\n     * Requirements:\\n     *\\n     * - `target` must be a contract.\\n     * - calling `target` with `data` must not revert.\\n     *\\n     * _Available since v3.1._\\n     */\\n    function functionCall(address target, bytes memory data) internal returns (bytes memory) {\\n        return functionCall(target, data, \\\"Address: low-level call failed\\\");\\n    }\\n\\n    /**\\n     * @dev Same as {xref-Address-functionCall-address-bytes-}[`functionCall`], but with\\n     * `errorMessage` as a fallback revert reason when `target` reverts.\\n     *\\n     * _Available since v3.1._\\n     */\\n    function functionCall(\\n        address target,\\n        bytes memory data,\\n        string memory errorMessage\\n    ) internal returns (bytes memory) {\\n        return functionCallWithValue(target, data, 0, errorMessage);\\n    }\\n\\n    /**\\n     * @dev Same as {xref-Address-functionCall-address-bytes-}[`functionCall`],\\n     * but also transferring `value` wei to `target`.\\n     *\\n     * Requirements:\\n     *\\n     * - the calling contract must have an ETH balance of at least `value`.\\n     * - the called Solidity function must be `payable`.\\n     *\\n     * _Available since v3.1._\\n     */\\n    function functionCallWithValue(\\n        address target,\\n        bytes memory data,\\n        uint256 value\\n    ) internal returns (bytes memory) {\\n        return functionCallWithValue(target, data, value, \\\"Address: low-level call with value failed\\\");\\n    }\\n\\n    /**\\n     * @dev Same as {xref-Address-functionCallWithValue-address-bytes-uint256-}[`functionCallWithValue`], but\\n     * with `errorMessage` as a fallback revert reason when `target` reverts.\\n     *\\n     * _Available since v3.1._\\n     */\\n    function functionCallWithValue(\\n        address target,\\n        bytes memory data,\\n        uint256 value,\\n        string memory errorMessage\\n    ) internal returns (bytes memory) {\\n        require(address(this).balance >= value, \\\"Address: insufficient balance for call\\\");\\n        require(isContract(target), \\\"Address: call to non-contract\\\");\\n\\n        (bool success, bytes memory returndata) = target.call{value: value}(data);\\n        return verifyCallResult(success, returndata, errorMessage);\\n    }\\n\\n    /**\\n     * @dev Same as {xref-Address-functionCall-address-bytes-}[`functionCall`],\\n     * but performing a static call.\\n     *\\n     * _Available since v3.3._\\n     */\\n    function functionStaticCall(address target, bytes memory data) internal view returns (bytes memory) {\\n        return functionStaticCall(target, data, \\\"Address: low-level static call failed\\\");\\n    }\\n\\n    /**\\n     * @dev Same as {xref-Address-functionCall-address-bytes-string-}[`functionCall`],\\n     * but performing a static call.\\n     *\\n     * _Available since v3.3._\\n     */\\n    function functionStaticCall(\\n        address target,\\n        bytes memory data,\\n        string memory errorMessage\\n    ) internal view returns (bytes memory) {\\n        require(isContract(target), \\\"Address: static call to non-contract\\\");\\n\\n        (bool success, bytes memory returndata) = target.staticcall(data);\\n        return verifyCallResult(success, returndata, errorMessage);\\n    }\\n\\n    /**\\n     * @dev Same as {xref-Address-functionCall-address-bytes-}[`functionCall`],\\n     * but performing a delegate call.\\n     *\\n     * _Available since v3.4._\\n     */\\n    function functionDelegateCall(address target, bytes memory data) internal returns (bytes memory) {\\n        return functionDelegateCall(target, data, \\\"Address: low-level delegate call failed\\\");\\n    }\\n\\n    /**\\n     * @dev Same as {xref-Address-functionCall-address-bytes-string-}[`functionCall`],\\n     * but performing a delegate call.\\n     *\\n     * _Available since v3.4._\\n     */\\n    function functionDelegateCall(\\n        address target,\\n        bytes memory data,\\n        string memory errorMessage\\n    ) internal returns (bytes memory) {\\n        require(isContract(target), \\\"Address: delegate call to non-contract\\\");\\n\\n        (bool success, bytes memory returndata) = target.delegatecall(data);\\n        return verifyCallResult(success, returndata, errorMessage);\\n    }\\n\\n    /**\\n     * @dev Tool to verifies that a low level call was successful, and revert if it wasn't, either by bubbling the\\n     * revert reason using the provided one.\\n     *\\n     * _Available since v4.3._\\n     */\\n    function verifyCallResult(\\n        bool success,\\n        bytes memory returndata,\\n        string memory errorMessage\\n    ) internal pure returns (bytes memory) {\\n        if (success) {\\n            return returndata;\\n        } else {\\n            // Look for revert reason and bubble it up if present\\n            if (returndata.length > 0) {\\n                // The easiest way to bubble the revert reason is using memory via assembly\\n                /// @solidity memory-safe-assembly\\n                assembly {\\n                    let returndata_size := mload(returndata)\\n                    revert(add(32, returndata), returndata_size)\\n                }\\n            } else {\\n                revert(errorMessage);\\n            }\\n        }\\n    }\\n}\\n\",\"keccak256\":\"0xd6153ce99bcdcce22b124f755e72553295be6abcd63804cfdffceb188b8bef10\",\"license\":\"MIT\"},\"@openzeppelin/contracts/utils/Context.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n// OpenZeppelin Contracts v4.4.1 (utils/Context.sol)\\n\\npragma solidity ^0.8.0;\\n\\n/**\\n * @dev Provides information about the current execution context, including the\\n * sender of the transaction and its data. While these are generally available\\n * via msg.sender and msg.data, they should not be accessed in such a direct\\n * manner, since when dealing with meta-transactions the account sending and\\n * paying for execution may not be the actual sender (as far as an application\\n * is concerned).\\n *\\n * This contract is only required for intermediate, library-like contracts.\\n */\\nabstract contract Context {\\n    function _msgSender() internal view virtual returns (address) {\\n        return msg.sender;\\n    }\\n\\n    function _msgData() internal view virtual returns (bytes calldata) {\\n        return msg.data;\\n    }\\n}\\n\",\"keccak256\":\"0xe2e337e6dde9ef6b680e07338c493ebea1b5fd09b43424112868e9cc1706bca7\",\"license\":\"MIT\"},\"@openzeppelin/contracts/utils/introspection/ERC165.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n// OpenZeppelin Contracts v4.4.1 (utils/introspection/ERC165.sol)\\n\\npragma solidity ^0.8.0;\\n\\nimport \\\"./IERC165.sol\\\";\\n\\n/**\\n * @dev Implementation of the {IERC165} interface.\\n *\\n * Contracts that want to implement ERC165 should inherit from this contract and override {supportsInterface} to check\\n * for the additional interface id that will be supported. For example:\\n *\\n * ```solidity\\n * function supportsInterface(bytes4 interfaceId) public view virtual override returns (bool) {\\n *     return interfaceId == type(MyInterface).interfaceId || super.supportsInterface(interfaceId);\\n * }\\n * ```\\n *\\n * Alternatively, {ERC165Storage} provides an easier to use but more expensive implementation.\\n */\\nabstract contract ERC165 is IERC165 {\\n    /**\\n     * @dev See {IERC165-supportsInterface}.\\n     */\\n    function supportsInterface(bytes4 interfaceId) public view virtual override returns (bool) {\\n        return interfaceId == type(IERC165).interfaceId;\\n    }\\n}\\n\",\"keccak256\":\"0xd10975de010d89fd1c78dc5e8a9a7e7f496198085c151648f20cba166b32582b\",\"license\":\"MIT\"},\"@openzeppelin/contracts/utils/introspection/IERC165.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n// OpenZeppelin Contracts v4.4.1 (utils/introspection/IERC165.sol)\\n\\npragma solidity ^0.8.0;\\n\\n/**\\n * @dev Interface of the ERC165 standard, as defined in the\\n * https://eips.ethereum.org/EIPS/eip-165[EIP].\\n *\\n * Implementers can declare support of contract interfaces, which can then be\\n * queried by others ({ERC165Checker}).\\n *\\n * For an implementation, see {ERC165}.\\n */\\ninterface IERC165 {\\n    /**\\n     * @dev Returns true if this contract implements the interface defined by\\n     * `interfaceId`. See the corresponding\\n     * https://eips.ethereum.org/EIPS/eip-165#how-interfaces-are-identified[EIP section]\\n     * to learn more about how these ids are created.\\n     *\\n     * This function call must use less than 30 000 gas.\\n     */\\n    function supportsInterface(bytes4 interfaceId) external view returns (bool);\\n}\\n\",\"keccak256\":\"0x447a5f3ddc18419d41ff92b3773fb86471b1db25773e07f877f548918a185bf1\",\"license\":\"MIT\"},\"@openzeppelin/contracts/utils/math/Math.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n// OpenZeppelin Contracts (last updated v4.7.0) (utils/math/Math.sol)\\n\\npragma solidity ^0.8.0;\\n\\n/**\\n * @dev Standard math utilities missing in the Solidity language.\\n */\\nlibrary Math {\\n    enum Rounding {\\n        Down, // Toward negative infinity\\n        Up, // Toward infinity\\n        Zero // Toward zero\\n    }\\n\\n    /**\\n     * @dev Returns the largest of two numbers.\\n     */\\n    function max(uint256 a, uint256 b) internal pure returns (uint256) {\\n        return a >= b ? a : b;\\n    }\\n\\n    /**\\n     * @dev Returns the smallest of two numbers.\\n     */\\n    function min(uint256 a, uint256 b) internal pure returns (uint256) {\\n        return a < b ? a : b;\\n    }\\n\\n    /**\\n     * @dev Returns the average of two numbers. The result is rounded towards\\n     * zero.\\n     */\\n    function average(uint256 a, uint256 b) internal pure returns (uint256) {\\n        // (a + b) / 2 can overflow.\\n        return (a & b) + (a ^ b) / 2;\\n    }\\n\\n    /**\\n     * @dev Returns the ceiling of the division of two numbers.\\n     *\\n     * This differs from standard division with `/` in that it rounds up instead\\n     * of rounding down.\\n     */\\n    function ceilDiv(uint256 a, uint256 b) internal pure returns (uint256) {\\n        // (a + b - 1) / b can overflow on addition, so we distribute.\\n        return a == 0 ? 0 : (a - 1) / b + 1;\\n    }\\n\\n    /**\\n     * @notice Calculates floor(x * y / denominator) with full precision. Throws if result overflows a uint256 or denominator == 0\\n     * @dev Original credit to Remco Bloemen under MIT license (https://xn--2-umb.com/21/muldiv)\\n     * with further edits by Uniswap Labs also under MIT license.\\n     */\\n    function mulDiv(\\n        uint256 x,\\n        uint256 y,\\n        uint256 denominator\\n    ) internal pure returns (uint256 result) {\\n        unchecked {\\n            // 512-bit multiply [prod1 prod0] = x * y. Compute the product mod 2^256 and mod 2^256 - 1, then use\\n            // use the Chinese Remainder Theorem to reconstruct the 512 bit result. The result is stored in two 256\\n            // variables such that product = prod1 * 2^256 + prod0.\\n            uint256 prod0; // Least significant 256 bits of the product\\n            uint256 prod1; // Most significant 256 bits of the product\\n            assembly {\\n                let mm := mulmod(x, y, not(0))\\n                prod0 := mul(x, y)\\n                prod1 := sub(sub(mm, prod0), lt(mm, prod0))\\n            }\\n\\n            // Handle non-overflow cases, 256 by 256 division.\\n            if (prod1 == 0) {\\n                return prod0 / denominator;\\n            }\\n\\n            // Make sure the result is less than 2^256. Also prevents denominator == 0.\\n            require(denominator > prod1);\\n\\n            ///////////////////////////////////////////////\\n            // 512 by 256 division.\\n            ///////////////////////////////////////////////\\n\\n            // Make division exact by subtracting the remainder from [prod1 prod0].\\n            uint256 remainder;\\n            assembly {\\n                // Compute remainder using mulmod.\\n                remainder := mulmod(x, y, denominator)\\n\\n                // Subtract 256 bit number from 512 bit number.\\n                prod1 := sub(prod1, gt(remainder, prod0))\\n                prod0 := sub(prod0, remainder)\\n            }\\n\\n            // Factor powers of two out of denominator and compute largest power of two divisor of denominator. Always >= 1.\\n            // See https://cs.stackexchange.com/q/138556/92363.\\n\\n            // Does not overflow because the denominator cannot be zero at this stage in the function.\\n            uint256 twos = denominator & (~denominator + 1);\\n            assembly {\\n                // Divide denominator by twos.\\n                denominator := div(denominator, twos)\\n\\n                // Divide [prod1 prod0] by twos.\\n                prod0 := div(prod0, twos)\\n\\n                // Flip twos such that it is 2^256 / twos. If twos is zero, then it becomes one.\\n                twos := add(div(sub(0, twos), twos), 1)\\n            }\\n\\n            // Shift in bits from prod1 into prod0.\\n            prod0 |= prod1 * twos;\\n\\n            // Invert denominator mod 2^256. Now that denominator is an odd number, it has an inverse modulo 2^256 such\\n            // that denominator * inv = 1 mod 2^256. Compute the inverse by starting with a seed that is correct for\\n            // four bits. That is, denominator * inv = 1 mod 2^4.\\n            uint256 inverse = (3 * denominator) ^ 2;\\n\\n            // Use the Newton-Raphson iteration to improve the precision. Thanks to Hensel's lifting lemma, this also works\\n            // in modular arithmetic, doubling the correct bits in each step.\\n            inverse *= 2 - denominator * inverse; // inverse mod 2^8\\n            inverse *= 2 - denominator * inverse; // inverse mod 2^16\\n            inverse *= 2 - denominator * inverse; // inverse mod 2^32\\n            inverse *= 2 - denominator * inverse; // inverse mod 2^64\\n            inverse *= 2 - denominator * inverse; // inverse mod 2^128\\n            inverse *= 2 - denominator * inverse; // inverse mod 2^256\\n\\n            // Because the division is now exact we can divide by multiplying with the modular inverse of denominator.\\n            // This will give us the correct result modulo 2^256. Since the preconditions guarantee that the outcome is\\n            // less than 2^256, this is the final result. We don't need to compute the high bits of the result and prod1\\n            // is no longer required.\\n            result = prod0 * inverse;\\n            return result;\\n        }\\n    }\\n\\n    /**\\n     * @notice Calculates x * y / denominator with full precision, following the selected rounding direction.\\n     */\\n    function mulDiv(\\n        uint256 x,\\n        uint256 y,\\n        uint256 denominator,\\n        Rounding rounding\\n    ) internal pure returns (uint256) {\\n        uint256 result = mulDiv(x, y, denominator);\\n        if (rounding == Rounding.Up && mulmod(x, y, denominator) > 0) {\\n            result += 1;\\n        }\\n        return result;\\n    }\\n\\n    /**\\n     * @dev Returns the square root of a number. It the number is not a perfect square, the value is rounded down.\\n     *\\n     * Inspired by Henry S. Warren, Jr.'s \\\"Hacker's Delight\\\" (Chapter 11).\\n     */\\n    function sqrt(uint256 a) internal pure returns (uint256) {\\n        if (a == 0) {\\n            return 0;\\n        }\\n\\n        // For our first guess, we get the biggest power of 2 which is smaller than the square root of the target.\\n        // We know that the \\\"msb\\\" (most significant bit) of our target number `a` is a power of 2 such that we have\\n        // `msb(a) <= a < 2*msb(a)`.\\n        // We also know that `k`, the position of the most significant bit, is such that `msb(a) = 2**k`.\\n        // This gives `2**k < a <= 2**(k+1)` \\u2192 `2**(k/2) <= sqrt(a) < 2 ** (k/2+1)`.\\n        // Using an algorithm similar to the msb conmputation, we are able to compute `result = 2**(k/2)` which is a\\n        // good first aproximation of `sqrt(a)` with at least 1 correct bit.\\n        uint256 result = 1;\\n        uint256 x = a;\\n        if (x >> 128 > 0) {\\n            x >>= 128;\\n            result <<= 64;\\n        }\\n        if (x >> 64 > 0) {\\n            x >>= 64;\\n            result <<= 32;\\n        }\\n        if (x >> 32 > 0) {\\n            x >>= 32;\\n            result <<= 16;\\n        }\\n        if (x >> 16 > 0) {\\n            x >>= 16;\\n            result <<= 8;\\n        }\\n        if (x >> 8 > 0) {\\n            x >>= 8;\\n            result <<= 4;\\n        }\\n        if (x >> 4 > 0) {\\n            x >>= 4;\\n            result <<= 2;\\n        }\\n        if (x >> 2 > 0) {\\n            result <<= 1;\\n        }\\n\\n        // At this point `result` is an estimation with one bit of precision. We know the true value is a uint128,\\n        // since it is the square root of a uint256. Newton's method converges quadratically (precision doubles at\\n        // every iteration). We thus need at most 7 iteration to turn our partial result with one bit of precision\\n        // into the expected uint128 result.\\n        unchecked {\\n            result = (result + a / result) >> 1;\\n            result = (result + a / result) >> 1;\\n            result = (result + a / result) >> 1;\\n            result = (result + a / result) >> 1;\\n            result = (result + a / result) >> 1;\\n            result = (result + a / result) >> 1;\\n            result = (result + a / result) >> 1;\\n            return min(result, a / result);\\n        }\\n    }\\n\\n    /**\\n     * @notice Calculates sqrt(a), following the selected rounding direction.\\n     */\\n    function sqrt(uint256 a, Rounding rounding) internal pure returns (uint256) {\\n        uint256 result = sqrt(a);\\n        if (rounding == Rounding.Up && result * result < a) {\\n            result += 1;\\n        }\\n        return result;\\n    }\\n}\\n\",\"keccak256\":\"0xd15c3e400531f00203839159b2b8e7209c5158b35618f570c695b7e47f12e9f0\",\"license\":\"MIT\"},\"contracts/core/IRegistry.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\r\\npragma solidity ^0.8.13;\\r\\n\\r\\n/// @title Registry interface\\r\\n/// @notice Functions related to current game configuration\\r\\ninterface IRegistry {\\r\\n    struct GameResource {\\r\\n        string tokenName;\\r\\n        string tokenSymbol;\\r\\n        string worldResourceName;\\r\\n    }\\r\\n\\r\\n    struct GameUnit {\\r\\n        string tokenName;\\r\\n        string tokenSymbol;\\r\\n        string worldUnitName;\\r\\n    }\\r\\n\\r\\n    struct ExtraResource {\\r\\n        string resourceName;\\r\\n        uint256 value;\\r\\n    }\\r\\n\\r\\n    struct UnitStats {\\r\\n        uint256 weaponPowerStage1;\\r\\n        uint256 armourPowerStage1;\\r\\n        uint256 weaponPowerStage2;\\r\\n        uint256 armourPowerStage2;\\r\\n        uint256 siegePower;\\r\\n        uint256 siegeMaxSupply;\\r\\n        uint256 siegeSupport;\\r\\n    }\\r\\n\\r\\n    // State variables\\r\\n\\r\\n    /// @notice An address which can configure/reconfigure current game\\r\\n    /// @dev Immutable, initialized on the registry creation\\r\\n    function mightyCreator() external view returns (address);\\r\\n\\r\\n    /// @notice Mapping containing is provided address a factory contract or not\\r\\n    /// @dev Updated when #setFactoryContracts is called\\r\\n    function isFactoryContract(address factoryAddress) external view returns (bool);\\r\\n\\r\\n    /// @notice Mapping containing factory contracts addresses by provided asset types\\r\\n    /// @dev Updated when #setFactoryContracts is called\\r\\n    /// @dev During new world asset creation process registry is asked for factory contract for exact world asset type, which will contain creation method for new world asset\\r\\n    function factoryContracts(bytes32 scriptId) external view returns (address);\\r\\n\\r\\n    /// @notice Mapping containing assets implementations addresses by provided asset id\\r\\n    /// @dev Updated when #setImplementations is called\\r\\n    /// @dev Every worlds assets implementation (code, not data) will be defined by value from this mapping\\r\\n    function implementations(bytes32 assetId) external view returns (address);\\r\\n\\r\\n    /// @notice Mapping containing units stats by provided unit types\\r\\n    /// @dev Updated when #setUnitStats is called\\r\\n    function unitsStats(string memory unitName)\\r\\n        external\\r\\n        view\\r\\n        returns (\\r\\n            uint256 weaponPowerStage1,\\r\\n            uint256 armourPowerStage1,\\r\\n            uint256 weaponPowerStage2,\\r\\n            uint256 armourPowerStage2,\\r\\n            uint256 siegePower,\\r\\n            uint256 siegeMaxSupply,\\r\\n            uint256 siegeSupport\\r\\n        );\\r\\n\\r\\n    /// @notice Global multiplier\\r\\n    /// @dev Immutable, initialized on the registry creation\\r\\n    function globalMultiplier() external view returns (uint256);\\r\\n\\r\\n    /// @notice Settlement starting price\\r\\n    /// @dev Immutable, initialized on the registry creation\\r\\n    function settlementStartingPrice() external view returns (uint256);\\r\\n\\r\\n    // Functions\\r\\n\\r\\n    /// @notice Proxy initializer\\r\\n    /// @dev Called by address which created current instance\\r\\n    /// @param globalMultiplier Global multiplier\\r\\n    /// @param settlementStartingPrice Settlement starting price\\r\\n    function init(\\r\\n        uint256 globalMultiplier,\\r\\n        uint256 settlementStartingPrice\\r\\n    ) external;\\r\\n\\r\\n    /// @notice Sets provided address as factory contract for provided group id\\r\\n    /// @dev Even though function is opened, it can be called only by mightyCreator\\r\\n    /// @param groupId Group id\\r\\n    /// @param factoryAddresses Factory addresses\\r\\n    function setFactoryContracts(\\r\\n        bytes32[] calldata groupId,\\r\\n        address[] calldata factoryAddresses\\r\\n    ) external;\\r\\n\\r\\n    /// @notice Sets provided address as implementation for provided asset ids\\r\\n    /// @dev Even though function is opened, it can be called only by mightyCreator\\r\\n    /// @param assetIds Asset ids\\r\\n    /// @param implementationAddresses Implementation addresses\\r\\n    function setImplementations(\\r\\n        bytes32[] calldata assetIds,\\r\\n        address[] calldata implementationAddresses\\r\\n    ) external;\\r\\n\\r\\n    /// @notice Sets units stats for provided unit types\\r\\n    /// @dev Even though function is opened, it can be called only by mightyCreator\\r\\n    /// @param unitTypes Unit type\\r\\n    /// @param unitsStats Units stats\\r\\n    function setUnitsStats(\\r\\n        string[] calldata unitTypes,\\r\\n        UnitStats[] memory unitsStats\\r\\n    ) external;\\r\\n\\r\\n    /// @notice Calculates worker capacity coefficient for provided building type\\r\\n    /// @dev Used for internal calculation of max workers for each building\\r\\n    /// @param buildingName Building type\\r\\n    /// @return workerCapacityCoefficient Worker capacity coefficient\\r\\n    function getWorkerCapacityCoefficient(string memory buildingName) external pure returns (uint256 workerCapacityCoefficient);\\r\\n\\r\\n    /// @notice Calculates basic production building coefficient\\r\\n    /// @dev used for internal calculation of production result\\r\\n    /// @param buildingName Building type\\r\\n    /// @return basicProductionBuildingCoefficient Basic production building coefficient\\r\\n    function getBasicProductionBuildingCoefficient(string memory buildingName) external pure returns (uint256 basicProductionBuildingCoefficient);\\r\\n\\r\\n    /// @notice Calculates if provided building has starting treasury on creation\\r\\n    /// @dev Used for determination if treasury should be filled on settlement creation\\r\\n    /// @param buildingName Building type\\r\\n    /// @return hasStartingTreasury If treasury should be filled\\r\\n    function hasStartingTreasury(string memory buildingName) external pure returns (bool hasStartingTreasury);\\r\\n\\r\\n    /// @notice Calculates toxicity by resource ratio\\r\\n    /// @dev Used for minting/burning toxicity\\r\\n    /// @param resourceName Resource name\\r\\n    /// @return toxicity Amount of toxicity per 1 resource (both are in 1e18 precision)\\r\\n    function getToxicityByResource(string memory resourceName) external pure returns (uint256 toxicity);\\r\\n\\r\\n    /// @notice Calculates resource weight\\r\\n    /// @dev Used for calculation how much prosperity will be produced by resource in treasury\\r\\n    /// @param resourceName Resource name\\r\\n    /// @return resourceWeight Resource weight (in 1e0 precision)\\r\\n    function getResourceWeight(string memory resourceName) external pure returns (uint256 resourceWeight);\\r\\n\\r\\n    /// @notice Returns siege power to siege siege points multiplier\\r\\n    /// @dev Used for determination how much siege points will be given\\r\\n    /// @return siegePowerToSiegePointsMultiplier Siege power to siege siege points multiplier (in 1e18 precision)\\r\\n    function getSiegePowerToSiegePointsMultiplier() external pure returns (uint256 siegePowerToSiegePointsMultiplier);\\r\\n\\r\\n    /// @notice Returns siege point multiplier by provided resource\\r\\n    /// @dev Used in calculation how many resources can be exchanged for siege points\\r\\n    /// @param resourceName Resource name\\r\\n    /// @return siegePointsToResourceMultiplier Siege point multiplier (in 1e18 precision)\\r\\n    function getSiegePointsToResourceMultiplier(string memory resourceName) external view returns (uint256 siegePointsToResourceMultiplier);\\r\\n\\r\\n    /// @notice Returns robbery fee\\r\\n    /// @dev Used in determination how much of resource will be burned during robbery\\r\\n    /// @return robberyFee Robbery fee (in 1e18 precision, where 1e18 is 100%)\\r\\n    function getRobberyFee() external view returns (uint256 robberyFee);\\r\\n\\r\\n    /// @notice Returns global multiplier\\r\\n    /// @dev Used everywhere, where time is involved. Essentially determines game speed\\r\\n    /// @return globalMultiplier Global multiplier\\r\\n    function getGlobalMultiplier() external view returns (uint256 globalMultiplier);\\r\\n\\r\\n    /// @notice Returns production to treasury percent\\r\\n    /// @dev Determines how much of buildings production will go to treasury (if not full)\\r\\n    /// @param toTreasuryPercent Production to treasury percent (in 1e18 precision, where 1e18 is 100%)\\r\\n    function getToTreasuryPercent() external pure returns (uint256 toTreasuryPercent);\\r\\n\\r\\n    /// @notice Returns base battle duration\\r\\n    /// @dev Used internally to determine how long battle will last\\r\\n    /// @return baseBattleDuration Base battle duration\\r\\n    function getBaseBattleDuration() external view returns (uint256 baseBattleDuration);\\r\\n\\r\\n    /// @notice Returns battle lobby phase duration percent (in 1e18 precision)\\r\\n    /// @dev Used internally to determine how long lobby phase will last\\r\\n    /// @return battleLobbyDurationPercent Battle lobby phase duration percent\\r\\n    function getBattleLobbyDurationPercent() external view returns (uint256 battleLobbyDurationPercent);\\r\\n\\r\\n    /// @notice Returns battle duration stun multiplier\\r\\n    /// @dev Used internally to determine how long stun will last after army lost battle\\r\\n    /// @return battleDurationStunMultiplier Battle duration stun multiplier\\r\\n    function getBattleDurationStunMultiplier() external pure returns (uint256 battleDurationStunMultiplier);\\r\\n\\r\\n    /// @notice Returns movement duration stun multiplier\\r\\n    /// @dev Used internally to determine how long stun will last after armies' movement\\r\\n    /// @return movementDurationStunMultiplier Movement duration stun multiplier\\r\\n    function getMovementDurationStunMultiplier() external pure returns (uint256 movementDurationStunMultiplier);\\r\\n\\r\\n    /// @notice Returns game buildings\\r\\n    /// @dev Used internally to determine which buildings will be created on placing settlement\\r\\n    /// @return buildings Buildings\\r\\n    function getBuildings() external view returns (string[] memory buildings);\\r\\n\\r\\n    /// @notice Returns game resources\\r\\n    /// @dev Used internally to determine upgrade costs and providing initial resources for settlement owner based on his tier\\r\\n    /// @param resources Game resources\\r\\n    function getResources() external view returns (string[] memory resources);\\r\\n\\r\\n    /// @notice Returns game units\\r\\n    /// @dev Used internally in many places where interaction with units is necessary\\r\\n    /// @return units Game units\\r\\n    function getUnits() external view returns (string[] memory units);\\r\\n\\r\\n    /// @notice Returns game resources\\r\\n    /// @dev Used internally to determine upgrade costs and providing initial resources for settlement owner based on his tier\\r\\n    /// @param resources Game resources\\r\\n    function getGameResources() external view returns (GameResource[] memory resources);\\r\\n\\r\\n    /// @notice Returns game units\\r\\n    /// @dev Used internally in many places where interaction with units is necessary\\r\\n    /// @return units Game units\\r\\n    function getGameUnits() external view returns (GameUnit[] memory units);\\r\\n\\r\\n    /// @notice Returns unit hiring fort hp multiplier\\r\\n    /// @dev Used to determine how much units in army can be presented based on its current fort hp and this parameter\\r\\n    /// @return unitHiringFortHpMultiplier Unit hiring fort hp multiplier\\r\\n    function getUnitHiringFortHpMultiplier() external pure returns (uint256 unitHiringFortHpMultiplier);\\r\\n\\r\\n    /// @notice Returns how much food unit can take from treasury to increase its army movement speed\\r\\n    /// @dev Used internally to calculate army's movement speed\\r\\n    /// @param unitType Unit type\\r\\n    /// @return unitMaxFoodToSpendOnMove Maximum amount of food to spend on move (in 1e18 precision)\\r\\n    function getUnitMaxFoodToSpendOnMove(string memory unitType) external pure returns (uint256 unitMaxFoodToSpendOnMove);\\r\\n\\r\\n    /// @notice Returns how much prosperity will be given for provided unit type\\r\\n    /// @dev Used internally to calculate how much prosperity will be given\\r\\n    /// @return prosperityPerUnit Prosperity amount per one unit (in 1e18 precision)\\r\\n    function getProsperityForDemilitarization(string memory unitType) external pure returns (uint256 prosperityPerUnit);\\r\\n\\r\\n    /// @notice Returns cultists summon delay\\r\\n    /// @dev Used to determine is cultists can be re-summoned\\r\\n    /// @return cultistsSummonDelay Cultists summon delay (in seconds)\\r\\n    function getCultistsSummonDelay() external pure returns (uint256 cultistsSummonDelay);\\r\\n\\r\\n    /// @notice Returns max settlement that can be placed in one zone\\r\\n    /// @dev Cultists does not count (so +1 with cultists)\\r\\n    /// @return maxSettlementPerZone Max settlement that can be placed in one zone\\r\\n    function getMaxSettlementPerZone() external pure returns (uint256 maxSettlementPerZone);\\r\\n\\r\\n    /// @notice Returns interval duration where world is not destructible after recent cultists summon\\r\\n    /// @dev Used to determine if destruction is available or not\\r\\n    /// @return cultistsNoDestructionDelay No destruction interval duration (in seconds)\\r\\n    function getCultistsNoDestructionDelay() external pure returns (uint256 cultistsNoDestructionDelay);\\r\\n\\r\\n    /// @notice Returns value of cultists per zone which determines cultists threshold for world destruction\\r\\n    /// @dev Used to determine amount of cultists that have to be present for world destruction\\r\\n    /// @return cultistsPerZoneMultiplier Value of cultists per zone\\r\\n    function getCultistsPerZoneMultiplier() external pure returns (uint256 cultistsPerZoneMultiplier);\\r\\n\\r\\n    /// @notice Returns maximum amount of cultists that can be present in zone\\r\\n    /// @dev Used to determine how many cultists will be summoned\\r\\n    /// @return maxCultistsPerZone Maximum amount of cultists\\r\\n    function getMaxCultistsPerZone() external pure returns (uint256 maxCultistsPerZone);\\r\\n\\r\\n    /// @notice Returns unit type of cultists army\\r\\n    /// @dev Determines type of unit in cultists army\\r\\n    /// @return cultistUnitType Cultists unit type\\r\\n    function getCultistUnitType() external pure returns (string memory cultistUnitType);\\r\\n\\r\\n    /// @notice Returns building token transfer threshold percent\\r\\n    /// @dev Used to determine is building token transfer allowed based on treasury percent\\r\\n    /// @return buildingTokenTransferThresholdPercent Building token transfer threshold percent\\r\\n    function getBuildingTokenTransferThresholdPercent() external pure returns (uint256 buildingTokenTransferThresholdPercent);\\r\\n\\r\\n    /// @notice Returns extra resources which will be minted to user when new settlement is placed\\r\\n    /// @dev During settlement creation continent contract uses output from this function to determine how much extra resources to mint\\r\\n    /// @return extraResources Extra resources which will be minted to user when new settlement is placed\\r\\n    function getNewSettlementExtraResources() external view returns (ExtraResource[] memory extraResources);\\r\\n\\r\\n    /// @notice Returns new settlement starting price in settlements market\\r\\n    /// @dev Used to determine how much base price for first settlement will be\\r\\n    /// @return newSettlementStartingPrice New settlement starting price\\r\\n    function getNewSettlementStartingPrice() external view returns (uint256 newSettlementStartingPrice);\\r\\n\\r\\n    /// @notice Returns amount of production ticks\\r\\n    /// @dev Used for production calculation\\r\\n    /// @return ticks Amount of production ticks\\r\\n    function getProductionTicksInSecond() external view returns (uint256 ticks);\\r\\n\\r\\n    /// @notice Returns army demilitarization cooldown in seconds\\r\\n    /// @dev Used for army demilitarization restriction\\r\\n    /// @return cooldown Demilitarization cooldown in seconds\\r\\n    function getDemilitarizationCooldown() external pure returns (uint256 cooldown);\\r\\n\\r\\n    /// @notice Returns unit pool price drop per second for provided unit type, provided as numerator and denominator\\r\\n    /// @dev Used for determination of current unit pool price\\r\\n    /// @param unitType Unit type\\r\\n    /// @return numerator Numerator\\r\\n    /// @return denominator Denominator\\r\\n    function getUnitPriceDropByUnitType(string memory unitType) external pure returns (uint256 numerator, uint256 denominator);\\r\\n\\r\\n    /// @notice Returns max potential advanced production buff gain from capturing tiles\\r\\n    /// @dev Used for determination advanced production multiplier\\r\\n    /// @return maxAdvancedProductionTileBuff Max potential advanced production from tile buff\\r\\n    function getMaxAdvancedProductionTileBuff() external pure returns (uint256 maxAdvancedProductionTileBuff);\\r\\n\\r\\n    /// @notice Returns capture tile duration per each tile in distance from settlement to selected tile\\r\\n    /// @dev Used to capture tile duration calculation\\r\\n    /// @return captureTileDurationPerTile Capture tile duration per tile\\r\\n    function getCaptureTileDurationPerTile() external pure returns (uint256 captureTileDurationPerTile);\\r\\n\\r\\n    /// @notice Returns next capture prosperity threshold\\r\\n    /// @dev Used to determine if new bid on captured tile is possible\\r\\n    /// @return nextCaptureProsperityThreshold Next capture prosperity threshold\\r\\n    function getNextCaptureProsperityThreshold() external pure returns (uint256 nextCaptureProsperityThreshold);\\r\\n\\r\\n    /// @notice Returns percent of prosperity that has to be in settlement for claiming captured tile\\r\\n    /// @dev Used to determine if tile claim is possible\\r\\n    /// @return necessaryProsperityPercentForClaimingTileCapture Necessary prosperity percent for claiming tile capture\\r\\n    function getNecessaryProsperityPercentForClaimingTileCapture() external pure returns (uint256 necessaryProsperityPercentForClaimingTileCapture);\\r\\n\\r\\n    /// @notice Returns tile capture cancellation fee\\r\\n    /// @dev Used to determine how much prosperity has to be given in order to cancel tile capture\\r\\n    /// @return tileCaptureCancellationFee Tile capture cancellation fee\\r\\n    function getTileCaptureCancellationFee() external pure returns (uint256 tileCaptureCancellationFee);\\r\\n\\r\\n    /// @notice Returns max captured tiles for settlement\\r\\n    /// @dev Used to determine whether settlement can initiate tile capture\\r\\n    /// @return maxCapturedTilesForSettlement Max captured tiles for settlement\\r\\n    function getMaxCapturedTilesForSettlement() external pure returns (uint256 maxCapturedTilesForSettlement);\\r\\n\\r\\n    /// @notice Returns advanced production tile bonus by variation\\r\\n    /// @dev Used to determine tile bonus by tile bonus variation\\r\\n    /// @param tileBonusVariation Tile bonus variation\\r\\n    function getAdvancedProductionTileBonusByVariation(uint8 tileBonusVariation) external pure returns (string memory buildingType, uint256 capacityAmountMultiplier);\\r\\n}\\r\\n\",\"keccak256\":\"0xde7aa3644f43bfddd78f7710d15f86c8ce9bc569dfdb62bcd3e75209c667d0da\",\"license\":\"MIT\"},\"contracts/core/IWorld.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\r\\npragma solidity ^0.8.13;\\r\\n\\r\\nimport \\\"@openzeppelin/contracts/token/ERC721/IERC721.sol\\\";\\r\\nimport \\\"@openzeppelin/contracts/token/ERC20/IERC20.sol\\\";\\r\\nimport \\\"./IRegistry.sol\\\";\\r\\nimport \\\"./assets/epoch/IEpoch.sol\\\";\\r\\nimport \\\"./geography/IGeography.sol\\\";\\r\\nimport \\\"./crossEpochsMemory/ICrossEpochsMemory.sol\\\";\\r\\nimport \\\"./rewardPool/IRewardPool.sol\\\";\\r\\nimport \\\"./distributions/IDistributions.sol\\\";\\r\\n\\r\\n/// @title World interface\\r\\n/// @notice Functions to read state/modify state of game world\\r\\ninterface IWorld {\\r\\n    /// @notice Emitted when world initialized\\r\\n    /// @param registryContractAddress Registry contract address\\r\\n    /// @param geographyAddress Geography contract address\\r\\n    /// @param bannersAddress Mithraeum banners contract address\\r\\n    /// @param blessTokenAddress Bless token address\\r\\n    /// @param distributionsAddress Distributions token address\\r\\n    /// @param rewardPoolAddress Reward pool address\\r\\n    event WorldInitialized(\\r\\n        address registryContractAddress,\\r\\n        address geographyAddress,\\r\\n        address bannersAddress,\\r\\n        address blessTokenAddress,\\r\\n        address distributionsAddress,\\r\\n        address rewardPoolAddress\\r\\n    );\\r\\n\\r\\n    /// @notice Emitted when #setGameStartTime is called\\r\\n    /// @param timestamp New game start time\\r\\n    event GameStartTimeUpdated(uint timestamp);\\r\\n\\r\\n    /// @notice Emitted when #setGameFinishTime is called\\r\\n    /// @param timestamp New game finish time\\r\\n    event GameFinishTimeUpdated(uint timestamp);\\r\\n\\r\\n    /// @notice Emitted when world initialized or #destroyCurrentEpoch is called\\r\\n    /// @param epochAddress New epoch address\\r\\n    /// @param epochNumber New epoch number\\r\\n    event NewWorldEpoch(address epochAddress, uint256 epochNumber);\\r\\n\\r\\n    /// @notice Emitted after new epoch initialization\\r\\n    /// @param epochNumber New epoch number\\r\\n    event CurrentEpochNumberUpdated(uint256 epochNumber);\\r\\n\\r\\n    // State variables\\r\\n\\r\\n    /// @notice Registry\\r\\n    /// @dev Immutable, initialized on creation\\r\\n    function registry() external view returns (IRegistry);\\r\\n\\r\\n    /// @notice Banners token\\r\\n    /// @dev Immutable, initialized on creation\\r\\n    function bannerContract() external view returns (IERC721);\\r\\n\\r\\n    /// @notice Bless token\\r\\n    /// @dev Immutable, initialized on creation\\r\\n    function blessToken() external view returns (IERC20);\\r\\n\\r\\n    /// @notice Distributions token\\r\\n    /// @dev Immutable, initialized on creation\\r\\n    function distributions() external view returns (IDistributions);\\r\\n\\r\\n    /// @notice Cross epochs memory\\r\\n    /// @dev Immutable, initialized on creation\\r\\n    function crossEpochsMemory() external view returns (ICrossEpochsMemory);\\r\\n\\r\\n    /// @notice Reward pool\\r\\n    /// @dev Immutable, initialized on creation\\r\\n    function rewardPool() external view returns (IRewardPool);\\r\\n\\r\\n    /// @notice Game start time\\r\\n    /// @dev Updated when #setGameStartTime is called\\r\\n    function gameStartTime() external view returns (uint256);\\r\\n\\r\\n    /// @notice Game finish time\\r\\n    /// @dev Updated when #setGameFinishTime is called\\r\\n    function gameFinishTime() external view returns (uint256);\\r\\n\\r\\n    /// @notice Geography\\r\\n    /// @dev Immutable, initialized on creation\\r\\n    function geography() external view returns (IGeography);\\r\\n\\r\\n    /// @notice Current world epoch\\r\\n    /// @dev Updated when #destroy is called\\r\\n    function currentEpochNumber() external view returns (uint256);\\r\\n\\r\\n    /// @notice World epochs\\r\\n    /// @dev Updated when world initialized or #destroy is called\\r\\n    function epochs(uint256 epochNumber) external view returns (IEpoch);\\r\\n\\r\\n    /// @notice Mapping containing world asset type by provided epoch number and address\\r\\n    /// @dev Updated when #addWorldAsset is called\\r\\n    function worldAssets(uint256 epochNumber, address worldAsset) external view returns (bytes32);\\r\\n\\r\\n    // Functions\\r\\n\\r\\n    /// @notice Proxy initializer\\r\\n    /// @dev Called by address which created current instance\\r\\n    /// @param registryContractAddress Registry contract address\\r\\n    /// @param crossEpochsMemoryAddress Cross epochs memory address\\r\\n    /// @param geographyAddress Geography contract address\\r\\n    /// @param bannersAddress Banners token address\\r\\n    /// @param blessTokenAddress Bless token address\\r\\n    /// @param distributionsAddress Distributions token address\\r\\n    /// @param rewardPoolAddress Reward pool address\\r\\n    function init(\\r\\n        address registryContractAddress,\\r\\n        address crossEpochsMemoryAddress,\\r\\n        address geographyAddress,\\r\\n        address bannersAddress,\\r\\n        address blessTokenAddress,\\r\\n        address distributionsAddress,\\r\\n        address rewardPoolAddress\\r\\n    ) external;\\r\\n\\r\\n    /// @notice Adds an address as world asset\\r\\n    /// @dev Even though function is opened, it can only be called by factory contract\\r\\n    /// @param epochNumber Epoch number\\r\\n    /// @param worldAssetAddress World asset address\\r\\n    /// @param assetType Asset type\\r\\n    function addWorldAsset(\\r\\n        uint256 epochNumber,\\r\\n        address worldAssetAddress,\\r\\n        bytes32 assetType\\r\\n    ) external;\\r\\n\\r\\n    /// @notice Mints workers to provided address\\r\\n    /// @dev Even though function is opened, it can only be called by mighty creator\\r\\n    /// @param epochNumber Epoch number\\r\\n    /// @param to Address which will receive workers\\r\\n    /// @param value Amount of workers to mint\\r\\n    function mintWorkers(\\r\\n        uint256 epochNumber,\\r\\n        address to,\\r\\n        uint256 value\\r\\n    ) external;\\r\\n\\r\\n    /// @notice Mints units to provided address\\r\\n    /// @dev Even though function is opened, it can only be called by mighty creator\\r\\n    /// @param epochNumber Epoch number\\r\\n    /// @param unitName Type of unit to mint\\r\\n    /// @param to Address which will receive units\\r\\n    /// @param value Amount of units to mint\\r\\n    function mintUnits(\\r\\n        uint256 epochNumber,\\r\\n        string memory unitName,\\r\\n        address to,\\r\\n        uint256 value\\r\\n    ) external;\\r\\n\\r\\n    /// @notice Mints resource to provided address\\r\\n    /// @dev Even though function is opened, it can only be called by mighty creator\\r\\n    /// @param epochNumber Epoch number\\r\\n    /// @param resourceName Resource name\\r\\n    /// @param to Address which will receive resources\\r\\n    /// @param value Amount of resources to mint\\r\\n    function mintResources(\\r\\n        uint256 epochNumber,\\r\\n        string memory resourceName,\\r\\n        address to,\\r\\n        uint256 value\\r\\n    ) external;\\r\\n\\r\\n    /// @notice Transfers multiple resources to provided address\\r\\n    /// @dev Uses msg.sender as resources sender\\r\\n    /// @param epochNumber Epoch number\\r\\n    /// @param to An address which will receive resources\\r\\n    /// @param resourcesNames Resources names\\r\\n    /// @param amounts Amount of each resources to transfer\\r\\n    function batchTransferResources(\\r\\n        uint256 epochNumber,\\r\\n        address to,\\r\\n        string[] calldata resourcesNames,\\r\\n        uint256[] calldata amounts\\r\\n    ) external;\\r\\n\\r\\n    /// @notice Sets game finish time\\r\\n    /// @dev Even though function is opened, it can only be called by mighty creator or reward pool\\r\\n    /// @param gameFinishTime Game finish time\\r\\n    function setGameFinishTime(uint256 gameFinishTime) external;\\r\\n\\r\\n    /// @notice Sets game start time\\r\\n    /// @dev Even though function is opened, it can only be called by mighty creator\\r\\n    /// @param gameStartTime Game start time\\r\\n    function setGameStartTime(uint256 gameStartTime) external;\\r\\n\\r\\n    /// @notice Destroys current epoch if conditions are met\\r\\n    /// @dev Anyone can call this function\\r\\n    function destroyCurrentEpoch() external;\\r\\n}\\r\\n\",\"keccak256\":\"0xe70b4ed040177d2e3960bac809a492b0b9626ee9aca58d8ee25d6838a257f7bd\",\"license\":\"MIT\"},\"contracts/core/assets/IWorldAsset.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\r\\npragma solidity ^0.8.13;\\r\\n\\r\\nimport \\\"../IWorld.sol\\\";\\r\\n\\r\\ninterface IWorldAsset {\\r\\n    /// @notice World\\r\\n    /// @dev Value is dereferenced from proxy storage\\r\\n    function world() external view returns (IWorld);\\r\\n\\r\\n    /// @notice Registry\\r\\n    /// @dev Value is dereferenced from world\\r\\n    function registry() external view returns (IRegistry);\\r\\n\\r\\n    /// @notice Epoch\\r\\n    /// @dev Value is dereferenced from proxy storage and world\\r\\n    function epoch() external view returns (IEpoch);\\r\\n}\\r\\n\",\"keccak256\":\"0x91727dad523efe8f7ec874586f34606c78817d3461724dfac8244f7f1c883fa6\",\"license\":\"MIT\"},\"contracts/core/assets/IWorldAssetStorageAccessor.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\r\\npragma solidity ^0.8.13;\\r\\n\\r\\nimport \\\"../IWorld.sol\\\";\\r\\n\\r\\n/// @title World asset storage accessor interface\\r\\n/// @notice Contains function to identify world asset group and type\\r\\ninterface IWorldAssetStorageAccessor {\\r\\n    // Functions\\r\\n\\r\\n    /// @notice Returns world\\r\\n    /// @dev Reads data from proxy's storage\\r\\n    /// @return world World\\r\\n    function world() external view returns (IWorld world);\\r\\n\\r\\n    /// @notice Returns epoch number\\r\\n    /// @dev Reads data from proxy's storage\\r\\n    /// @return epochNumber Epoch number\\r\\n    function epochNumber() external view returns (uint256 epochNumber);\\r\\n\\r\\n    /// @notice Returns world asset group\\r\\n    /// @dev Reads data from proxy's storage\\r\\n    /// @return assetGroup World asset group\\r\\n    function assetGroup() external view returns (string memory assetGroup);\\r\\n\\r\\n    /// @notice Returns world asset type\\r\\n    /// @dev Reads data from proxy's storage\\r\\n    /// @return assetType World asset type\\r\\n    function assetType() external view returns (string memory assetType);\\r\\n}\\r\\n\",\"keccak256\":\"0xd11ca36127949d8e6b73dbe9a723f231584987084c6aac86b45a723ebe846f94\",\"license\":\"MIT\"},\"contracts/core/assets/WorldAsset.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\r\\npragma solidity ^0.8.13;\\r\\n\\r\\nimport \\\"@openzeppelin/contracts/proxy/utils/Initializable.sol\\\";\\r\\nimport \\\"../IWorld.sol\\\";\\r\\nimport \\\"./WorldAssetStorage.sol\\\";\\r\\nimport \\\"./IWorldAsset.sol\\\";\\r\\nimport \\\"./WorldAssetStorageAccessor.sol\\\";\\r\\n\\r\\n/// @title Abstract world asset\\r\\n/// @notice World asset must inherit this basic contract\\r\\nabstract contract WorldAsset is IWorldAsset, WorldAssetStorageAccessor, Initializable {\\r\\n    /// Allows caller to be only mighty creator\\r\\n    modifier onlyMightyCreator() {\\r\\n        require(msg.sender == registry().mightyCreator(), \\\"onlyMightyCreator\\\");\\r\\n        _;\\r\\n    }\\r\\n\\r\\n    /// @dev Allows caller to be only world or world asset\\r\\n    modifier onlyWorldAssetFromSameEpoch() {\\r\\n        require(\\r\\n            msg.sender == address(world()) ||\\r\\n                world().worldAssets(WorldAssetStorageAccessor.epochNumber(), msg.sender) != bytes32(0),\\r\\n            \\\"onlyWorldAssetFromSameEpoch\\\"\\r\\n        );\\r\\n        _;\\r\\n    }\\r\\n\\r\\n    /// @dev Allows function to be callable only while game is active\\r\\n    modifier onlyActiveGame() {\\r\\n        uint256 gameFinishTime = world().gameFinishTime();\\r\\n        require(gameFinishTime == 0 || block.timestamp < gameFinishTime, \\\"game closed\\\");\\r\\n        _;\\r\\n    }\\r\\n\\r\\n    /// @inheritdoc IWorldAsset\\r\\n    function world() public view override(IWorldAsset, WorldAssetStorageAccessor) returns (IWorld) {\\r\\n        return WorldAssetStorageAccessor.world();\\r\\n    }\\r\\n\\r\\n    /// @inheritdoc IWorldAsset\\r\\n    function registry() public view override returns (IRegistry) {\\r\\n        return world().registry();\\r\\n    }\\r\\n\\r\\n    /// @inheritdoc IWorldAsset\\r\\n    function epoch() public view override returns (IEpoch) {\\r\\n        return world().epochs(WorldAssetStorageAccessor.epochNumber());\\r\\n    }\\r\\n}\\r\\n\",\"keccak256\":\"0x9610ada9c67454216262ac9ae93e30325da7bc1be53fa7f0c6ada7ce3ab7b4b3\",\"license\":\"MIT\"},\"contracts/core/assets/WorldAssetStorage.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\r\\npragma solidity ^0.8.13;\\r\\n\\r\\nstruct WorldAssetStorage {\\r\\n    address worldAddress;\\r\\n    uint256 epochNumber;\\r\\n    bytes32 assetId;\\r\\n    string assetGroup;\\r\\n    string assetType;\\r\\n}\\r\\n\\r\\nfunction getWorldAssetStorage() pure returns (WorldAssetStorage storage ds) {\\r\\n    //keccak256(\\\"mithraeum.worldassetproxy\\\") is 6c85b93e587873fbe6712f3b438d42c2945689b262f7bd34b8ea4e3f832a89e6\\r\\n    bytes32 position = 0x6c85b93e587873fbe6712f3b438d42c2945689b262f7bd34b8ea4e3f832a89e6;\\r\\n    assembly {\\r\\n        ds.slot := position\\r\\n    }\\r\\n}\\r\\n\",\"keccak256\":\"0x9f30c5efab957e88c130add43c267c80e3ba4606481c2b2e5af3328d9b401ffb\",\"license\":\"MIT\"},\"contracts/core/assets/WorldAssetStorageAccessor.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\r\\npragma solidity ^0.8.13;\\r\\n\\r\\nimport \\\"./IWorldAssetStorageAccessor.sol\\\";\\r\\nimport \\\"./WorldAssetStorage.sol\\\";\\r\\n\\r\\n/// @title World asset storage accessor\\r\\n/// @notice Any world asset which requires to identify itself as a specific type should inherit this contract\\r\\nabstract contract WorldAssetStorageAccessor is IWorldAssetStorageAccessor {\\r\\n    /// @inheritdoc IWorldAssetStorageAccessor\\r\\n    function world() public view virtual override returns (IWorld) {\\r\\n        return IWorld(getWorldAssetStorage().worldAddress);\\r\\n    }\\r\\n\\r\\n    /// @inheritdoc IWorldAssetStorageAccessor\\r\\n    function epochNumber() public view override returns (uint256) {\\r\\n        return getWorldAssetStorage().epochNumber;\\r\\n    }\\r\\n\\r\\n    /// @inheritdoc IWorldAssetStorageAccessor\\r\\n    function assetGroup() public view override returns (string memory) {\\r\\n        return getWorldAssetStorage().assetGroup;\\r\\n    }\\r\\n\\r\\n    /// @inheritdoc IWorldAssetStorageAccessor\\r\\n    function assetType() public view override returns (string memory) {\\r\\n        return getWorldAssetStorage().assetType;\\r\\n    }\\r\\n}\\r\\n\",\"keccak256\":\"0x3c45a31126d32fb95d989f21259ac9d0c5f52caa578adff3489369f539e4375b\",\"license\":\"MIT\"},\"contracts/core/assets/army/IArmy.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\r\\npragma solidity ^0.8.13;\\r\\n\\r\\nimport \\\"../../IWorld.sol\\\";\\r\\nimport \\\"../battle/IBattle.sol\\\";\\r\\nimport \\\"../settlement/ISettlement.sol\\\";\\r\\nimport \\\"../siege/ISiege.sol\\\";\\r\\n\\r\\n/// @title Army interface\\r\\n/// @notice Functions to read state/modify state in order to get current army parameters and/or interact with it\\r\\ninterface IArmy {\\r\\n    struct MovementTiming {\\r\\n        uint64 startTime;\\r\\n        uint64 endTime;\\r\\n    }\\r\\n\\r\\n    struct StunTiming {\\r\\n        uint64 startTime;\\r\\n        uint64 endTime;\\r\\n    }\\r\\n\\r\\n    /// @notice Emitted when #burnUnits is called (#demilitarize or #exitBattle)\\r\\n    /// @param unitName Name of the unit type\\r\\n    /// @param value New amount of unit type presented in army\\r\\n    event UnitsChanged(string unitName, uint256 value);\\r\\n\\r\\n    /// @notice Emitted when #updatePosition is called (even though event can be emitted only on the next action related to the current army, de-facto army will update position based on 'movementTiming.endTime'\\r\\n    /// @param settlementAddress Address of the settlement where army currently staying on\\r\\n    /// @param position Position\\r\\n    event UpdatedPosition(address settlementAddress, uint32 position);\\r\\n\\r\\n    /// @notice Emitted when #newBattle is called. Army which attacks another army will emit this event.\\r\\n    /// @param battleAddress Created battle address\\r\\n    /// @param targetArmyAddress Address of the attacked army\\r\\n    event NewBattle(address battleAddress, address targetArmyAddress);\\r\\n\\r\\n    /// @notice Emitted when army joins battle. At the battle creation both armies (attacker and attacked) will emit this event. Attacker army will be side A and at attacked army will be sideB\\r\\n    /// @param battleAddress Address of the battle army joined in\\r\\n    /// @param side Side to which army joined (sideA = 1, sideB = 2)\\r\\n    event JoinedBattle(address indexed battleAddress, uint256 side);\\r\\n\\r\\n    /// @notice Emitted when #updateState is called (even though event can be emitted only on the next action related to the current army, de-facto army will exit battle when battle is finished)\\r\\n    /// @param battleAddress Address of the battle army was in\\r\\n    event ExitedFromBattle(address battleAddress);\\r\\n\\r\\n    /// @notice Emitted when #move is called\\r\\n    /// @param destinationSettlement Address of the settlement army is moving to\\r\\n    /// @param movementStartTime Time at which movement began\\r\\n    /// @param movementFinishTime Time at which movement will end\\r\\n    /// @param path The path army is taken from starting position to destination position\\r\\n    event MovingTo(\\r\\n        address indexed destinationSettlement,\\r\\n        uint256 indexed movementStartTime,\\r\\n        uint256 indexed movementFinishTime,\\r\\n        uint32[] path\\r\\n    );\\r\\n\\r\\n    // State variables\\r\\n\\r\\n    /// @notice Settlement address to which this army belongs\\r\\n    /// @dev Immutable, initialized on the army creation\\r\\n    function currentSettlement() external view returns (ISettlement);\\r\\n\\r\\n    /// @notice Position where army currently stands on\\r\\n    /// @dev Updated when army updates position. It does not take into account if army is moving\\r\\n    /// @dev To proper query current position use #getCurrentPosition\\r\\n    function currentPosition() external view returns (uint32);\\r\\n\\r\\n    /// @notice Position to which are is moving to\\r\\n    /// @dev Updated when army starts moving. It does not take into account if army is finished move by time\\r\\n    /// @dev To proper calculate destination position you need to check if army finished movement by comparing current time and movementTiming.endTime\\r\\n    function destinationPosition() external view returns (uint32);\\r\\n\\r\\n    /// @notice Battle in which army is on\\r\\n    /// @dev If army is not in battle returns address(0). It does not take into account if battle is finished but army is not left the battle\\r\\n    function battle() external view returns (IBattle);\\r\\n\\r\\n    /// @notice Siege in which are army is on\\r\\n    /// @dev If army is not in siege returns address(0)\\r\\n    function siege() external view returns (ISiege);\\r\\n\\r\\n    /// @notice Movement timings\\r\\n    /// @dev Updated when army starts moving. It does not take into account if army is finished move by time\\r\\n    function movementTiming() external view returns (uint64 startTime, uint64 endTime);\\r\\n\\r\\n    /// @notice Stun timings\\r\\n    /// @dev Updated when army finishes move or when army loses battle\\r\\n    function stunTiming() external view returns (uint64 startTime, uint64 endTime);\\r\\n\\r\\n    /// @notice Path army is taken during movement\\r\\n    /// @dev Updated when army starts moving. It does not take into account if army is finished move by time\\r\\n    /// @dev To proper query entire movementPath use #getMovementPath\\r\\n    function movementPath(uint256 index) external view returns (uint32);\\r\\n\\r\\n    /// @notice Time at which last demilitarization occured\\r\\n    /// @dev Updated when #demilitarize is called\\r\\n    function lastDemilitarizationTime() external view returns (uint256);\\r\\n\\r\\n    // Functions\\r\\n\\r\\n    /// @notice Proxy initializer\\r\\n    /// @dev Called by factory contract which creates current instance\\r\\n    /// @param settlementAddress Settlement address\\r\\n    function init(address settlementAddress) external;\\r\\n\\r\\n    /// @notice Path army is taken during movement\\r\\n    /// @dev Useful to get entire movement path rather than querying each path item by index. It does not take into account if army is finished move by time\\r\\n    /// @return path Entire path army is taken during movement\\r\\n    function getMovementPath() external view returns (uint32[] memory path);\\r\\n\\r\\n    /// @notice Updates army state to the current block\\r\\n    /// @dev Called on every action which are based on army state and time\\r\\n    function updateState() external;\\r\\n\\r\\n    /// @notice Initiates army movement to the settlement\\r\\n    /// @dev Even though path can be provided artificial only allowed movement to a settlement\\r\\n    /// @param path Path army will take to the settlement\\r\\n    /// @param foodToSpendOnFeeding Amount of food army will take from current position settlements FARM in order to decrease total time army will take to get to destination position\\r\\n    function move(uint32[] memory path, uint256 foodToSpendOnFeeding) external;\\r\\n\\r\\n    /// @notice Demilitarizes part of the army. Demilitarization provides prosperity to the settlement army is currently staying on\\r\\n    /// @dev Even though demilitarization of 0 units may seem reasonable, it is disabled\\r\\n    /// @param unitNames Names of the unit types for demilitarization\\r\\n    /// @param unitsCount Amount of units for demilitarization for every unit type\\r\\n    function demilitarize(string[] memory unitNames, uint256[] memory unitsCount) external;\\r\\n\\r\\n    /// @notice Sets battle\\r\\n    /// @dev Can only be called by world or world asset\\r\\n    /// @param battleAddress Battle address\\r\\n    function setBattle(address battleAddress) external;\\r\\n\\r\\n    /// @notice Initiates battle with another army is both are not in battle\\r\\n    /// @dev Creates IBattle and sets both armies in created battle\\r\\n    /// @param armyAddress Address of the army this army will attack\\r\\n    /// @param maxUnitTypesToAttack Max units types to attack\\r\\n    /// @param maxUnitsToAttack Max units to attack\\r\\n    function newBattle(\\r\\n        address armyAddress,\\r\\n        string[] calldata maxUnitTypesToAttack,\\r\\n        uint256[] calldata maxUnitsToAttack\\r\\n    ) external;\\r\\n\\r\\n    /// @notice Joins current army in battle to the provided side\\r\\n    /// @dev Moving army is able to join battle only if caller is another army (drags it into battle)\\r\\n    /// @param battleAddress Battle address army will join\\r\\n    /// @param side Side of the battle army will join (sideA = 1, sideB = 2)\\r\\n    function joinBattle(address battleAddress, uint256 side) external;\\r\\n\\r\\n    /// @notice Burns units from the army\\r\\n    /// @dev Can only be called by world or world asset\\r\\n    /// @param unitTypes Unit types for burning\\r\\n    /// @param unitAmounts Amount of units for burning for every unit type\\r\\n    function burnUnits(string[] memory unitTypes, uint256[] memory unitAmounts) external;\\r\\n\\r\\n    /// @notice Calculates current position taking to the account #movementTimings\\r\\n    /// @dev This method should be used to determine real army position\\r\\n    /// @return position Position\\r\\n    function getCurrentPosition() external view returns (uint32 position);\\r\\n\\r\\n    /// @notice Sets and withdraw units to/from siege\\r\\n    /// @dev Provides ability to atomically setup/re-setup siege\\r\\n    /// @param addUnitsNames Names of the unit types to put in siege\\r\\n    /// @param addUnitsCount Amount of units to put in siege for every unit type\\r\\n    /// @param removeUnitsNames Names of the unit types to withdraw from siege\\r\\n    /// @param removeUnitsCount Amount of units to withdraw from siege for every unit type\\r\\n    function setUnitsInSiege(\\r\\n        string[] memory addUnitsNames,\\r\\n        uint256[] memory addUnitsCount,\\r\\n        string[] memory removeUnitsNames,\\r\\n        uint256[] memory removeUnitsCount\\r\\n    ) external;\\r\\n\\r\\n    /// @notice Swaps accumulated robbery tokens in siege for resource\\r\\n    /// @dev Amount of points will be taken may be lesser if building does not have resources in its treasury\\r\\n    /// @param buildingAddress Address of the building treasury of which will be robbed\\r\\n    /// @param points Amount of points to spend for resources\\r\\n    function claimResources(address buildingAddress, uint256 points) external;\\r\\n\\r\\n    /// @notice Calculates total siege support of the army\\r\\n    /// @dev For every unit type placed in siege calculates sum of all of them\\r\\n    /// @return totalSiegeSupport Total siege support of the army\\r\\n    function getTotalSiegeSupport() external view returns (uint256 totalSiegeSupport);\\r\\n\\r\\n    /// @notice Sets siege\\r\\n    /// @dev Can only be called by world or world asset\\r\\n    /// @param siegeAddress Siege address\\r\\n    function setSiege(address siegeAddress) external;\\r\\n\\r\\n    /// @notice Return owner of the army\\r\\n    /// @dev Same as owner of the settlement to which this army belongs\\r\\n    /// @return ownerAddress Address of the owner of the army\\r\\n    function getOwner() external view returns (address ownerAddress);\\r\\n\\r\\n    /// @notice Calculates is army on its home position\\r\\n    /// @dev Takes into account if army movement is finished\\r\\n    /// @return isHomePosition Is army on home position\\r\\n    function isHomePosition() external view returns (bool isHomePosition);\\r\\n}\\r\\n\",\"keccak256\":\"0x08001bb52d1d3e51017d7223b3adf8ac80e6038b228811aac21a064c1956a141\",\"license\":\"MIT\"},\"contracts/core/assets/battle/IBattle.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\r\\npragma solidity ^0.8.13;\\r\\n\\r\\nimport \\\"../../IWorld.sol\\\";\\r\\n\\r\\n/// @title Battle interface\\r\\n/// @notice Functions to read state/modify state in order to get current battle parameters and/or interact with it\\r\\ninterface IBattle {\\r\\n    struct Timing {\\r\\n        uint64 creationTime;\\r\\n        uint64 lobbyDuration;\\r\\n        uint64 ongoingDuration;\\r\\n        uint64 finishTime;\\r\\n    }\\r\\n\\r\\n    /// @notice Emitted when army joined battle\\r\\n    /// @param armyAddress Address of the joined army\\r\\n    /// @param side Side to which army is joined (sideA = 1, sideB = 2)\\r\\n    event ArmyJoined(address armyAddress, uint256 side);\\r\\n\\r\\n    /// @notice Emitted when #finishBattle is called\\r\\n    /// @param finishTime Time at which battle is finished\\r\\n    event BattleFinished(uint256 finishTime);\\r\\n\\r\\n    // State variables\\r\\n\\r\\n    /// @notice Position at which battle is being held\\r\\n    /// @dev Immutable, initialized on the battle creation\\r\\n    function position() external view returns (uint32);\\r\\n\\r\\n    /// @notice An array of armies joined to side A\\r\\n    /// @dev Updated when army joins side A\\r\\n    /// @param index Index inside the array\\r\\n    /// @return armyAddress Army address at the specified index\\r\\n    function sideA(uint256 index) external view returns (address armyAddress);\\r\\n\\r\\n    /// @notice An array of armies joined to side B\\r\\n    /// @dev Updated when army joins side B\\r\\n    /// @param index Index inside the array\\r\\n    /// @return armyAddress Army address at the specified index\\r\\n    function sideB(uint256 index) external view returns (address armyAddress);\\r\\n\\r\\n    /// @notice Mapping that contains units amount by side and unit type\\r\\n    /// @dev Updated when army joins side\\r\\n    /// @param side Side of which query units amount (sideA = 1, sideB = 2)\\r\\n    /// @param unitName Unit type to query\\r\\n    /// @return unitsCount Amount of units by specified side and unit type\\r\\n    function sideUnitsCount(uint256 side, string memory unitName) external view returns (uint256 unitsCount);\\r\\n\\r\\n    /// @notice Mapping that contains amount of units by army address and unit type\\r\\n    /// @dev Updated when army joins battle\\r\\n    /// @param armyAddress Address of the army\\r\\n    /// @param unitName Unit type to query\\r\\n    /// @return unitsCount Amount of units by army address and unit type\\r\\n    function armyUnitsCount(address armyAddress, string memory unitName) external view returns (uint256 unitsCount);\\r\\n\\r\\n    /// @notice Mapping that contains amount of casualties after battle is finished\\r\\n    /// @dev Updated when #startBattle is called\\r\\n    /// @param side Side of which query casualties amount (sideA = 1, sideB = 2)\\r\\n    /// @param unitName Unit type to query\\r\\n    /// @return casualtiesCount Amount of casualties by side and unit type\\r\\n    function casualties(uint256 side, string memory unitName) external view returns (uint256 casualtiesCount);\\r\\n\\r\\n    /// @notice Mapping that contains side at which joined army is on\\r\\n    /// @dev Updated when #acceptArmyInBattle is called\\r\\n    /// @param armyAddress Address of the army\\r\\n    /// @return armySide Side of specified army (sideA = 1, sideB = 2)\\r\\n    function armySide(address armyAddress) external view returns (uint256 armySide);\\r\\n\\r\\n    /// @notice Battle time parameters\\r\\n    /// @dev Updated when battle initialized, first armies joined and finished (#initBattle, #acceptArmyInBattle, #startBattle)\\r\\n    /// @return creationTime Time when battle is created\\r\\n    /// @return lobbyDuration Lobby duration, initialized when first two armies joined\\r\\n    /// @return ongoingDuration Ongoing duration, initialized when first two armies joined\\r\\n    /// @return finishTime Time when battle is finished\\r\\n    function timing()\\r\\n        external\\r\\n        view\\r\\n        returns (\\r\\n            uint64 creationTime,\\r\\n            uint64 lobbyDuration,\\r\\n            uint64 ongoingDuration,\\r\\n            uint64 finishTime\\r\\n        );\\r\\n\\r\\n    /// @notice Winning side\\r\\n    /// @dev Updated when #finishBattle is called\\r\\n    /// @return winningSide Winning side (no winner = 0, sideA = 1, sideB = 2)\\r\\n    function winningSide() external view returns (uint256 winningSide);\\r\\n\\r\\n    // Functions\\r\\n\\r\\n    /// @notice Proxy initializer\\r\\n    /// @dev Called by factory contract which creates current instance\\r\\n    /// @param attackerArmyAddress Attacker army address\\r\\n    /// @param attackedArmyAddress Attacked army address\\r\\n    function init(address attackerArmyAddress, address attackedArmyAddress) external;\\r\\n\\r\\n    /// @notice Calculates amount of armies joined to side A\\r\\n    /// @dev Basically returns length of sideA array\\r\\n    /// @return armiesCount Amount of armies joined to side A\\r\\n    function getSideALength() external view returns (uint256 armiesCount);\\r\\n\\r\\n    /// @notice Calculates amount of armies joined to side B\\r\\n    /// @dev Basically returns length of sideA array\\r\\n    /// @return armiesCount Amount of armies joined to side B\\r\\n    function getSideBLength() external view returns (uint256 armiesCount);\\r\\n\\r\\n    /// @notice Accepts army in battle\\r\\n    /// @dev Even though function is opened, it can only be called by world asset\\r\\n    /// @param armyAddress Army address\\r\\n    /// @param side Side to which army will join\\r\\n    function acceptArmyInBattle(address armyAddress, uint256 side) external;\\r\\n\\r\\n    /// @notice Removes army from battle\\r\\n    /// @dev Even though function is opened, it can only be called by world asset\\r\\n    /// @param armyAddress Army address\\r\\n    function removeArmyFromBattle(address armyAddress) external;\\r\\n\\r\\n    /// @notice Finishes battle\\r\\n    /// @dev Sets finish time\\r\\n    function finishBattle() external;\\r\\n\\r\\n    /// @notice Calculates casualties for first battle stage\\r\\n    /// @dev Uses values from battles' sideUnitsCount in order to calculate casualties (can be executed while battle is still not fully formed)\\r\\n    /// @return sideACasualties Side A casualties\\r\\n    /// @return sideBCasualties Side B casualties\\r\\n    /// @return stageParams Stage params (encoded abi.encode(sideAOffense, sideBOffense, sideADefence, sideBDefence))\\r\\n    function calculateStage1Casualties()\\r\\n        external\\r\\n        view\\r\\n        returns (\\r\\n            uint256[] memory sideACasualties,\\r\\n            uint256[] memory sideBCasualties,\\r\\n            bytes memory stageParams\\r\\n        );\\r\\n\\r\\n    /// @notice Calculates casualties for second battle stage (based on casualties from first battle stage)\\r\\n    /// @dev Uses values from battles' sideUnitsCount in order to calculate casualties (can be executed while battle is still not fully formed)\\r\\n    /// @param stage1SideACasualties Stage 1 side A casualties\\r\\n    /// @param stage1SideBCasualties Stage 1 side B casualties\\r\\n    /// @return sideACasualties Side A casualties\\r\\n    /// @return sideBCasualties Side B casualties\\r\\n    /// @return stageParams Stage params (encoded abi.encode(sideAOffense, sideBOffense, sideADefence, sideBDefence))\\r\\n    function calculateStage2Casualties(\\r\\n        uint256[] memory stage1SideACasualties,\\r\\n        uint256[] memory stage1SideBCasualties\\r\\n    )\\r\\n        external\\r\\n        view\\r\\n        returns (\\r\\n            uint256[] memory sideACasualties,\\r\\n            uint256[] memory sideBCasualties,\\r\\n            bytes memory stageParams\\r\\n        );\\r\\n\\r\\n    /// @notice Calculates casualties for all battle stages\\r\\n    /// @dev Uses values from battles' sideUnitsCount in order to calculate casualties (can be executed while battle is still not fully formed)\\r\\n    /// @return sideACasualties Side A casualties\\r\\n    /// @return sideBCasualties Side A casualties\\r\\n    /// @return winningSide Winning side (0 - both sides lost, 1 - side A Won, 2 - side B Won\\r\\n    function calculateAllCasualties()\\r\\n        external\\r\\n        view\\r\\n        returns (\\r\\n            uint256[] memory sideACasualties,\\r\\n            uint256[] memory sideBCasualties,\\r\\n            uint256 winningSide\\r\\n        );\\r\\n\\r\\n    /// @notice Calculates lobby and ongoing duration\\r\\n    /// @dev Returns same value as #calculateTimings but without the need to provide all parameters\\r\\n    /// @param isCultistsAttacked Is cultists attacked\\r\\n    /// @param maxBattleDuration Max allowed battle duration\\r\\n    /// @param sideAUnitsCount Side A units count\\r\\n    /// @param sideBUnitsCount Side B units count\\r\\n    /// @return lobbyDuration Lobby duration\\r\\n    /// @return ongoingDuration Ongoing duration\\r\\n    function getTimings(\\r\\n        bool isCultistsAttacked,\\r\\n        uint256 maxBattleDuration,\\r\\n        uint256 sideAUnitsCount,\\r\\n        uint256 sideBUnitsCount\\r\\n    ) external view returns (uint64 lobbyDuration, uint64 ongoingDuration);\\r\\n\\r\\n    /// @notice Calculates if battle can be finished\\r\\n    /// @dev Checks if finishTime is set and current block.timestamp > creationTime + lobbyDuration + ongoingDuration\\r\\n    /// @return canFinishBattle Can battle be finished\\r\\n    function canFinishBattle() external view returns (bool canFinishBattle);\\r\\n\\r\\n    /// @notice Calculates if battle is finished\\r\\n    /// @dev Checks if finishTime is not zero\\r\\n    /// @return isFinishedBattle Is finished battle\\r\\n    function isFinishedBattle() external view returns (bool isFinishedBattle);\\r\\n\\r\\n    /// @notice Calculates casualties for specified army\\r\\n    /// @dev Provides valid results only for finished battle\\r\\n    /// @param armyAddress Address of army presented in battle\\r\\n    /// @return isArmyWon Is army won\\r\\n    /// @return unitAmounts Amount of casualties for related unit types\\r\\n    function calculateArmyCasualties(address armyAddress)\\r\\n        external\\r\\n        view\\r\\n        returns (\\r\\n            bool isArmyWon,\\r\\n            uint256[] memory unitAmounts\\r\\n        );\\r\\n\\r\\n    /// @notice Calculates if lobby is opened\\r\\n    /// @dev Calculates if lobby is opened\\r\\n    /// @return isLobbyTime Is lobby is opened\\r\\n    function isLobbyTime() external view returns (bool isLobbyTime);\\r\\n\\r\\n    /// @notice Calculates lobby duration and ongoing duration based on specified parameters\\r\\n    /// @dev globalMultiplier, baseLobbyDuration, baseOngoingDuration parameters from registry\\r\\n    /// @param globalMultiplier Global multiplier (from registry)\\r\\n    /// @param baseBattleDuration Base battle duration (from registry)\\r\\n    /// @param battleLobbyDurationPercent Battle lobby duration percent (from registry)\\r\\n    /// @param isCultistsAttacked Is cultists attacked\\r\\n    /// @param units1 Amount of units from attacker army\\r\\n    /// @param units2 Amount of units from attacked army\\r\\n    /// @param maxBattleDuration Max allowed battle duration\\r\\n    /// @return lobbyDuration Lobby duration\\r\\n    /// @return ongoingDuration Ongoing duration\\r\\n    function calculateTimings(\\r\\n        uint256 globalMultiplier,\\r\\n        uint256 baseBattleDuration,\\r\\n        uint256 battleLobbyDurationPercent,\\r\\n        bool isCultistsAttacked,\\r\\n        uint256 units1,\\r\\n        uint256 units2,\\r\\n        uint256 maxBattleDuration\\r\\n    ) external view returns (uint64 lobbyDuration, uint64 ongoingDuration);\\r\\n}\\r\\n\",\"keccak256\":\"0x26528950f07de43569411bb4647abceb9130a61de22590636e0b6edd0ff295c6\",\"license\":\"MIT\"},\"contracts/core/assets/building/IBuilding.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\r\\npragma solidity ^0.8.13;\\r\\n\\r\\nimport \\\"../../IWorld.sol\\\";\\r\\nimport \\\"../settlement/ISettlement.sol\\\";\\r\\n\\r\\n/// @title Building interface\\r\\n/// @notice Functions to read state/modify state in order to get current building parameters and/or interact with it\\r\\ninterface IBuilding {\\r\\n    struct BasicProduction {\\r\\n        uint256 level;\\r\\n        uint256 coefficient;\\r\\n    }\\r\\n\\r\\n    struct AdvancedProduction {\\r\\n        uint256 level;\\r\\n        uint256 coefficient;\\r\\n        uint256 additionalWorkersCapacityMultiplier;\\r\\n        uint256 toBeProducedTicks;\\r\\n    }\\r\\n\\r\\n    struct Production {\\r\\n        uint256 lastUpdateStateTime;\\r\\n        uint256 lastUpdateStateZoneTime;\\r\\n        uint256 readyToBeDistributed;\\r\\n    }\\r\\n\\r\\n    struct ProductionResultItem {\\r\\n        string resourceName;\\r\\n        uint256 balanceChanges;\\r\\n        bool isProducing;\\r\\n    }\\r\\n\\r\\n    struct InitialResourceBlock {\\r\\n        string resourceName;\\r\\n        uint256 perTick;\\r\\n        bool isProducing;\\r\\n    }\\r\\n\\r\\n    /// @notice Emitted when #startBasicUpgrade or #startAdvancedUpgrade is called\\r\\n    /// @param stateLevel New building level\\r\\n    event UpgradeFinish(uint256 stateLevel);\\r\\n\\r\\n    /// @notice Emitted when #distribute is called. When resources from production are distributed to building token holders. Will be deprecated in favor of ERC20 transfer event.\\r\\n    /// @param resourceName Name of resource distributed\\r\\n    /// @param holder Receiver address\\r\\n    /// @param amount Amount of distributed resources\\r\\n    event DistributedToShareHolder(string resourceName, address holder, uint256 amount);\\r\\n\\r\\n    /// @notice Emitted when #setDefaultDistribution is called\\r\\n    /// @param distributionId Newly created distribution id\\r\\n    /// @param previousReceivers Previous distribution receivers\\r\\n    event NewDistribution(uint256 distributionId, address[] previousReceivers);\\r\\n\\r\\n    // State variables\\r\\n\\r\\n    /// @notice Settlement address to which this building belongs\\r\\n    /// @dev Immutable, initialized on the building creation\\r\\n    function currentSettlement() external view returns (ISettlement);\\r\\n\\r\\n    /// @notice Basic production\\r\\n    /// @dev Contains basic production upgrade data\\r\\n    /// @return level Basic production level\\r\\n    /// @return coefficient Basic production coefficient\\r\\n    function basicProduction() external view returns (\\r\\n        uint256 level,\\r\\n        uint256 coefficient\\r\\n    );\\r\\n\\r\\n    /// @notice Advanced production\\r\\n    /// @dev Contains advanced production upgrade data\\r\\n    /// @return level Advanced production level\\r\\n    /// @return coefficient Advanced production coefficient\\r\\n    /// @return additionalWorkersCapacityMultiplier Additional workers capacity multiplier\\r\\n    /// @return toBeProducedTicks To be produced ticks of producing resource\\r\\n    function advancedProduction() external view returns (\\r\\n        uint256 level,\\r\\n        uint256 coefficient,\\r\\n        uint256 additionalWorkersCapacityMultiplier,\\r\\n        uint256 toBeProducedTicks\\r\\n    );\\r\\n\\r\\n    /// @notice Upgrade cooldown finish time\\r\\n    /// @dev Updated when #startBasicUpgrade or #startAdvancedUpgrade is called\\r\\n    /// @return upgradeCooldownFinishTime Upgrade cooldown finish time\\r\\n    function upgradeCooldownFinishTime() external view returns (uint256 upgradeCooldownFinishTime);\\r\\n\\r\\n    /// @notice Buildings prosperity\\r\\n    /// @dev Contains last written prosperity amount in building\\r\\n    /// @return prosperity Current building prosperity\\r\\n    function prosperity() external view returns (uint256 prosperity);\\r\\n\\r\\n    /// @notice Contains current production state of the building\\r\\n    /// @dev Contains information related to how production is calculated\\r\\n    /// @return lastUpdateStateTime Time at which last #updateState is called\\r\\n    /// @return lastUpdateStateZoneTime Zone time at which last #updateState is called\\r\\n    /// @return readyToBeDistributed Amount of produced resource ready to be distributed\\r\\n    function production()\\r\\n        external\\r\\n        view\\r\\n        returns (\\r\\n            uint256 lastUpdateStateTime,\\r\\n            uint256 lastUpdateStateZoneTime,\\r\\n            uint256 readyToBeDistributed\\r\\n        );\\r\\n\\r\\n    /// @notice Distribution id\\r\\n    /// @dev Initialized on creation and updated on #resetDistribution\\r\\n    function distributionId() external view returns (uint256);\\r\\n\\r\\n    /// @notice Produced resource debt\\r\\n    /// @dev Updated when #distributeToSingleHolder or #distributeToAllShareholders is called\\r\\n    function producedResourceDebt(address holder) external view returns (uint256);\\r\\n\\r\\n    // Functions\\r\\n\\r\\n    /// @notice Proxy initializer\\r\\n    /// @dev Called by factory contract which creates current instance\\r\\n    /// @param settlementAddress Settlement address\\r\\n    function init(address settlementAddress) external;\\r\\n\\r\\n    /// @notice Resets current building distribution\\r\\n    /// @dev Creates new distribution Nft and mints it to current settlement owner\\r\\n    function resetDistribution() external;\\r\\n\\r\\n    /// @notice Callback which recalculates production. Called when resources related to production of this building is transferred from/to this building\\r\\n    /// @dev Even though function is opened, it is auto-called by transfer method. Standalone calls provide 0 impact.\\r\\n    function productionResourcesChanged() external;\\r\\n\\r\\n    /// @notice Updates state of this building up to block.timestamp\\r\\n    /// @dev Updates building production minting treasury and increasing #production.readyToBeDistributed\\r\\n    function updateState() external;\\r\\n\\r\\n    /// @notice Fixes debt from shareholder whenever its share part changes\\r\\n    /// @dev Even though function is opened, it can be called only by distributions\\r\\n    /// @param from From address\\r\\n    /// @param to To address\\r\\n    /// @param amount Amount\\r\\n    function fixDebtAccordingToNewDistributionsAmounts(\\r\\n        address from,\\r\\n        address to,\\r\\n        uint256 amount\\r\\n    ) external;\\r\\n\\r\\n    /// @notice Distributes produced resource to single shareholder\\r\\n    /// @dev Useful to taking part of the resource from the building for single shareholder (to not pay gas for minting for all shareholders)\\r\\n    /// @param holder Holder\\r\\n    function distributeToSingleShareholder(address holder) external;\\r\\n\\r\\n    /// @notice Distributes produces resource to all shareholders\\r\\n    /// @dev Useful to get full produced resources to all shareholders\\r\\n    function distributeToAllShareholders() external;\\r\\n\\r\\n    /// @notice Calculates building coefficient by provided level\\r\\n    /// @dev Used to determine max treasury amount and new production coefficients\\r\\n    /// @param level Building level\\r\\n    /// @return buildingCoefficient Building coefficient\\r\\n    function getBuildingCoefficient(uint256 level) external pure returns (uint256 buildingCoefficient);\\r\\n\\r\\n    /// @notice Calculates amount of workers currently sitting in this building\\r\\n    /// @dev Same as workers.balanceOf(buildingAddress)\\r\\n    /// @return workersAmount Amount of workers currently sitting in this building\\r\\n    function getWorkers() external view returns (uint256 workersAmount);\\r\\n\\r\\n    /// @notice Calculates real amount of provided resource in building related to its production at provided time\\r\\n    /// @dev Useful for determination how much of production resource (either producing and spending) at the specific time\\r\\n    /// @param resourceName Name of resource related to production\\r\\n    /// @param timestamp Time at which calculate amount of resources in building. If timestamp=0 -> calculates as block.timestamp\\r\\n    /// @return resourcesAmount Real amount of provided resource in building related to its production at provided time\\r\\n    function getResourcesAmount(string memory resourceName, uint256 timestamp) external view returns (uint256 resourcesAmount);\\r\\n\\r\\n    /// @notice Calculates production resources changes at provided time\\r\\n    /// @dev Useful for determination how much of all production will be burned/produced at the specific time\\r\\n    /// @param timestamp Time at which calculate amount of resources in building. If timestamp=0 -> calculates as block.timestamp\\r\\n    /// @return productionResult Production resources changes at provided time\\r\\n    function getProductionResult(uint256 timestamp) external view returns (ProductionResultItem[] memory productionResult);\\r\\n\\r\\n    /// @notice Calculates upgrade price by provided level\\r\\n    /// @dev Useful for determination how much upgrade will cost at any level\\r\\n    /// @param level Level at which calculate price\\r\\n    /// @return price Amount of resources needed for upgrade\\r\\n    function getUpgradePrice(uint256 level) external view returns (uint256 price);\\r\\n\\r\\n    /// @notice Calculates basic upgrade duration for provided level\\r\\n    /// @dev If level=1 then returned value will be duration which is taken for upgrading from 1 to 2 level\\r\\n    /// @param level At which level calculate upgrade duration\\r\\n    /// @return upgradeCooldownDuration Upgrade cooldown duration\\r\\n    function getBasicUpgradeCooldownDuration(uint256 level) external view returns (uint256 upgradeCooldownDuration);\\r\\n\\r\\n    /// @notice Calculates advanced upgrade duration for provided level\\r\\n    /// @dev If level=1 then returned value will be duration which is taken for upgrading from 1 to 2 level\\r\\n    /// @param level At which level calculate upgrade duration\\r\\n    /// @return upgradeCooldownDuration Upgrade cooldown duration\\r\\n    function getAdvancedUpgradeCooldownDuration(uint256 level) external view returns (uint256 upgradeCooldownDuration);\\r\\n\\r\\n    /// @notice Starts basic building upgrade\\r\\n    /// @dev Resources required for upgrade will be taken either from msg.sender or resourcesOwner (if resource.allowance allows it)\\r\\n    /// @dev If resourcesOwner == address(0) -> resources will be taken from msg.sender\\r\\n    /// @dev If resourcesOwner != address(0) and resourcesOwner has given allowance to msg.sender >= upgradePrice -> resources will be taken from resourcesOwner\\r\\n    /// @param resourcesOwner Resources owner\\r\\n    function startBasicUpgrade(address resourcesOwner) external;\\r\\n\\r\\n    /// @notice Starts advanced building upgrade\\r\\n    /// @dev Resources required for upgrade will be taken either from msg.sender or resourcesOwner (if resource.allowance allows it)\\r\\n    /// @dev If resourcesOwner == address(0) -> resources will be taken from msg.sender\\r\\n    /// @dev If resourcesOwner != address(0) and resourcesOwner has given allowance to msg.sender >= upgradePrice -> resources will be taken from resourcesOwner\\r\\n    /// @param resourcesOwner Resources owner\\r\\n    function startAdvancedUpgrade(address resourcesOwner) external;\\r\\n\\r\\n    /// @notice Calculates current level\\r\\n    /// @dev Takes into an account if upgrades are finished or not\\r\\n    /// @return level Current building level\\r\\n    function getBuildingLevel() external view returns (uint256 level);\\r\\n\\r\\n    /// @notice Returns production config for current building\\r\\n    /// @dev Main config that determines which resources is produced/spend by production of this building\\r\\n    /// @dev InitialResourceBlock.perTick is value how much of resource is spend/produced by 1 worker in 1 second of production\\r\\n    /// @return initialResourceBlocks Production config for current building\\r\\n    function getConfig() external view returns (InitialResourceBlock[] memory initialResourceBlocks);\\r\\n\\r\\n    /// @notice Transfers game resources and workers from building to provided addresses\\r\\n    /// @dev Removes resources+workers from building in single transaction\\r\\n    /// @param workersReceiverAddress Workers receiver address (building or settlement)\\r\\n    /// @param workersAmount Workers amount (in 1e18 precision)\\r\\n    /// @param resourcesReceiverAddress Resources receiver address\\r\\n    /// @param resourceTypes Resource types\\r\\n    /// @param resourcesAmounts Resources amounts\\r\\n    function removeResourcesAndWorkers(\\r\\n        address workersReceiverAddress,\\r\\n        uint256 workersAmount,\\r\\n        address resourcesReceiverAddress,\\r\\n        string[] calldata resourceTypes,\\r\\n        uint256[] calldata resourcesAmounts\\r\\n    ) external;\\r\\n\\r\\n    /// @notice Calculates maximum amount of treasury by provided level\\r\\n    /// @dev Can be used to determine maximum amount of treasury by any level\\r\\n    /// @param level Building level\\r\\n    /// @param maxTreasury Maximum amount of treasury\\r\\n    function getMaxTreasuryByLevel(uint256 level) external view returns (uint256 maxTreasury);\\r\\n\\r\\n    /// @notice Steals resources from treasury\\r\\n    /// @dev Called by siege or building owner, in either case part of resources will be burned according to #registry.getRobberyFee\\r\\n    /// @param to An address which will get resources\\r\\n    /// @param amount Amount of resources to steal, 'to' will get only part of specified 'amount', some percent of specified 'amount' will be burned\\r\\n    /// @return realAmount Real amount of resources from which stealing occurred (min(amount, treasury))\\r\\n    function stealTreasury(\\r\\n        address to,\\r\\n        uint256 amount\\r\\n    ) external returns (uint256 realAmount);\\r\\n\\r\\n    /// @notice Burns building treasury\\r\\n    /// @dev Can be called by world asset or building owner\\r\\n    /// @param amount Amount of resources to burn from treasury\\r\\n    function burnTreasury(\\r\\n        uint256 amount\\r\\n    ) external;\\r\\n\\r\\n    /// @notice Increases additional workers capacity multiplier\\r\\n    /// @dev Even though function is opened, it can be called only by world asset\\r\\n    /// @param capacityAmount Capacity amount\\r\\n    function increaseAdditionalWorkersCapacityMultiplier(uint256 capacityAmount) external;\\r\\n\\r\\n    /// @notice Decreases additional workers capacity multiplier\\r\\n    /// @dev Even though function is opened, it can be called only by world asset\\r\\n    /// @param capacityAmount Capacity amount\\r\\n    function decreaseAdditionalWorkersCapacityMultiplier(uint256 capacityAmount) external;\\r\\n\\r\\n    /// @notice Calculates maximum amount of workers\\r\\n    /// @dev Useful to determinate maximum amount of workers\\r\\n    /// @return workersAmount Maximum amount of workers\\r\\n    function getMaxWorkers() external view returns (uint256 workersAmount);\\r\\n\\r\\n    /// @notice Calculates producing resource name for this building\\r\\n    /// @dev Return value is value from #getConfig where 'isProduced'=true\\r\\n    /// @return resourceName Name of producing resource\\r\\n    function getProducingResourceName() external view returns (string memory resourceName);\\r\\n\\r\\n    /// @notice Calculates treasury amount at specified time\\r\\n    /// @dev Useful for determination how much treasury will be at specific time\\r\\n    /// @param timestamp Time at which calculate amount of treasury in building. If timestamp=0 -> calculates as block.timestamp\\r\\n    /// @return treasury Treasury amount at specified time\\r\\n    function getTreasury(uint256 timestamp) external view returns (uint256 treasury);\\r\\n\\r\\n    /// @notice Calculates if building is capable to accept resource\\r\\n    /// @dev Return value based on #getConfig\\r\\n    /// @param resourceName Name of resource\\r\\n    /// @return isResourceAcceptable Is building can accept resource\\r\\n    function isResourceAcceptable(string memory resourceName) external view returns (bool isResourceAcceptable);\\r\\n\\r\\n    /// @notice Calculates max available for advanced production workers\\r\\n    /// @dev Difference between getMaxWorkers() and getAdditionalWorkersFromAdditionalWorkersCapacityMultiplier()\\r\\n    function getMaxAvailableForAdvancedProductionWorkers() external view returns (uint256);\\r\\n\\r\\n    /// @notice Calculates additional workers 'granted' from capacity multiplier\\r\\n    /// @dev Return value based on current advancedProduction.additionalWorkersCapacityMultiplier\\r\\n    function getAdditionalWorkersFromAdditionalWorkersCapacityMultiplier() external view returns (uint256);\\r\\n\\r\\n    /// @notice Returns building name\\r\\n    /// @dev Same value as #assetName\\r\\n    /// @return buildingName Building name\\r\\n    function buildingName() external view returns (string memory buildingName);\\r\\n}\\r\\n\",\"keccak256\":\"0x5bd3595704dec0ba8fdc52586567b935a4fef1d036814e2bdbc05e9082c735bb\",\"license\":\"MIT\"},\"contracts/core/assets/building/impl/IFort.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\r\\npragma solidity ^0.8.13;\\r\\n\\r\\nimport \\\"../IBuilding.sol\\\";\\r\\n\\r\\n/// @title Fort interface\\r\\n/// @notice Functions to read state/modify state in order to get current fort parameters and/or interact with it\\r\\ninterface IFort is IBuilding {\\r\\n    // State variables\\r\\n\\r\\n    /// @notice Fort health\\r\\n    /// @dev Updated when #updateHealth is called\\r\\n    function health() external view returns (uint256);\\r\\n\\r\\n    // Functions\\r\\n\\r\\n    /// @notice Updates fort health\\r\\n    /// @dev Even though function is opened, it can be called only by world asset\\r\\n    /// @param value New fort health\\r\\n    function updateHealth(uint256 value) external;\\r\\n\\r\\n    /// @notice Calculates maximum amount of health for provided level\\r\\n    /// @dev Useful to determine maximum amount of health will be available at provided level\\r\\n    /// @param level Level at which calculate maximum amount of health\\r\\n    /// @return maxHealth Maximum amount of health for provided level\\r\\n    function getMaxHealthOnLevel(uint256 level) external view returns (uint256 maxHealth);\\r\\n}\\r\\n\",\"keccak256\":\"0xfbcb65cf006cab9c49110c6e8487b2d48a9946aeb91c874209fddec8a06cddb2\",\"license\":\"MIT\"},\"contracts/core/assets/epoch/IEpoch.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\r\\npragma solidity ^0.8.13;\\r\\n\\r\\nimport \\\"../settlement/ISettlement.sol\\\";\\r\\nimport \\\"../tileCapturingSystem/ITileCapturingSystem.sol\\\";\\r\\nimport \\\"../tokens/resources/IResource.sol\\\";\\r\\n\\r\\n/// @title Epoch interface\\r\\n/// @notice Functions to read state/modify state in order to get current epoch parameters and/or interact with it\\r\\ninterface IEpoch {\\r\\n    /// @notice Emitted when epoch resource is created\\r\\n    /// @param resourceAddress Resource address\\r\\n    /// @param resourceName Resource name\\r\\n    event NewResource(\\r\\n        address resourceAddress,\\r\\n        string resourceName\\r\\n    );\\r\\n\\r\\n    /// @notice Emitted when epoch units is created\\r\\n    /// @param unitsAddress Units address\\r\\n    /// @param unitsName Units name\\r\\n    event NewUnits(\\r\\n        address unitsAddress,\\r\\n        string unitsName\\r\\n    );\\r\\n\\r\\n    /// @notice Emitted when epoch workers is created\\r\\n    /// @param workersAddress Workers address\\r\\n    event NewWorkers(\\r\\n        address workersAddress\\r\\n    );\\r\\n\\r\\n    /// @notice Emitted when epoch prosperity is created\\r\\n    /// @param prosperityAddress Prosperity address\\r\\n    event NewProsperity(\\r\\n        address prosperityAddress\\r\\n    );\\r\\n\\r\\n    /// @notice Emitted when epoch tile capturing system is created\\r\\n    /// @param tileCapturingSystemAddress Tile capturing system address\\r\\n    event NewTileCapturingSystem(\\r\\n        address tileCapturingSystemAddress\\r\\n    );\\r\\n\\r\\n    /// @notice Emitted when #activateZone is called\\r\\n    /// @param zoneAddress Zone address\\r\\n    /// @param zoneId Zone index\\r\\n    event NewZoneActivated(\\r\\n        address zoneAddress,\\r\\n        uint256 zoneId\\r\\n    );\\r\\n\\r\\n    /// @notice Emitted when #newAssetSettlement is called\\r\\n    /// @param contractAddress Created settlement address\\r\\n    /// @param scriptName Settlement type (BASIC/CULTISTS)\\r\\n    /// @param zoneAddress Address of the zone where settlement is created\\r\\n    /// @param position Position\\r\\n    event NewSettlement(\\r\\n        address indexed contractAddress,\\r\\n        string scriptName,\\r\\n        address zoneAddress,\\r\\n        uint32 position\\r\\n    );\\r\\n\\r\\n    // State variables\\r\\n\\r\\n    /// @notice An array of attached zones to the continent\\r\\n    /// @dev Updated when #attachZoneToTheContinent is called\\r\\n    function zones(uint256 index) external view returns (IZone);\\r\\n\\r\\n    /// @notice Mapping containing settlement by provided x and y coordinates\\r\\n    /// @dev Updated when new settlement is created\\r\\n    function settlements(uint32 position) external view returns (ISettlement);\\r\\n\\r\\n    /// @notice Most recent cultists summon time\\r\\n    /// @dev Updated when #increaseTotalCultists is called\\r\\n    function mostRecentCultistsSummonTime() external view returns (uint256);\\r\\n\\r\\n    /// @notice Total cultists\\r\\n    /// @dev Updated when #increaseTotalCultists or #decreaseTotalCultists is called\\r\\n    function totalCultists() external view returns (uint256);\\r\\n\\r\\n    /// @notice Workers token\\r\\n    /// @dev Updated when #setWorkersContract is called\\r\\n    function workers() external view returns (IWorkers);\\r\\n\\r\\n    /// @notice Prosperity token\\r\\n    /// @dev Updated when #setProsperityContract is called\\r\\n    function prosperity() external view returns (IProsperity);\\r\\n\\r\\n    /// @notice Mapping containing settlement address by provided banner id\\r\\n    /// @dev Updated when #addUserSettlement is called\\r\\n    function userSettlements(uint256 val) external view returns (ISettlement);\\r\\n\\r\\n    /// @notice Mapping containing game resources by name\\r\\n    /// @dev Updated when #addResource is called\\r\\n    function resources(string memory name) external view returns (IResource);\\r\\n\\r\\n    /// @notice Mapping containing units by name\\r\\n    /// @dev Updated when #addUnit is called\\r\\n    function units(string memory name) external view returns (IUnits);\\r\\n\\r\\n    /// @notice Tile capturing system\\r\\n    /// @dev Updated when #setTileCapturingSystemContract is called\\r\\n    function tileCapturingSystem() external view returns (ITileCapturingSystem);\\r\\n\\r\\n    // Functions\\r\\n\\r\\n    /// @notice Proxy initializer\\r\\n    /// @dev Called by factory contract which creates current instance\\r\\n    /// @param epochNumber Epoch number\\r\\n    function init(uint256 epochNumber) external;\\r\\n\\r\\n    /// @notice Activates zone\\r\\n    /// @dev Even though function is opened, it can be called only by mightyCreator\\r\\n    /// @param zoneId Zone id\\r\\n    function activateZone(uint16 zoneId) external;\\r\\n\\r\\n    /// @notice Restores settlement from previous epoch by provided position\\r\\n    /// @dev Any address can restore user settlement\\r\\n    /// @param position Position\\r\\n    function restoreSettlement(\\r\\n        uint32 position\\r\\n    ) external;\\r\\n\\r\\n    /// @notice Creates new user settlement\\r\\n    /// @dev Bless tokens will be deducted from msg.sender\\r\\n    /// @param position Position\\r\\n    /// @param ownerTokenId Banners token id which will represent to which settlement will be attached to\\r\\n    /// @param settlementPrice Settlement price\\r\\n    /// @param settlementPurchaseTime Settlement purchase time\\r\\n    /// @return settlementAddress Settlement address\\r\\n    function newSettlement(\\r\\n        uint32 position,\\r\\n        uint256 ownerTokenId,\\r\\n        uint256 settlementPrice,\\r\\n        uint256 settlementPurchaseTime\\r\\n    ) external returns (address settlementAddress);\\r\\n\\r\\n    /// @notice Creates settlement by type\\r\\n    /// @dev Even though function is opened, it can be called only by world asset\\r\\n    /// @param ownerTokenId Banners token id which will represent to which settlement will be attached to\\r\\n    /// @param position Position\\r\\n    /// @param assetName Settlement type (BASIC/CULTISTS)\\r\\n    /// @param performAttachmentValidation Whether is to perform attachment validation or not (CULTISTS or restored BASIC may not be attached to anything)\\r\\n    function newAssetSettlement(\\r\\n        uint256 ownerTokenId,\\r\\n        uint32 position,\\r\\n        string memory assetName,\\r\\n        bool performAttachmentValidation\\r\\n    ) external returns (address);\\r\\n\\r\\n    /// @notice Summons cultists in specified zones\\r\\n    /// @dev Batch cultists summon\\r\\n    /// @param zoneIds Zone ids\\r\\n    function summonCultistsBatch(\\r\\n        uint16[] memory zoneIds\\r\\n    ) external;\\r\\n\\r\\n    /// @notice Increases total cultists\\r\\n    /// @dev Even though function is opened, it can only be called by world asset\\r\\n    /// @param cultistsArmyAddress Cultists army address\\r\\n    /// @param value Amount of cultists minted\\r\\n    function increaseTotalCultists(\\r\\n        address cultistsArmyAddress,\\r\\n        uint256 value\\r\\n    ) external;\\r\\n\\r\\n    /// @notice Decreases total cultists\\r\\n    /// @dev Even though function is opened, it can only be called by world asset\\r\\n    /// @param cultistsArmyAddress Cultists army address\\r\\n    /// @param value Amount of cultists burned\\r\\n    function decreaseTotalCultists(\\r\\n        address cultistsArmyAddress,\\r\\n        uint256 value\\r\\n    ) external;\\r\\n}\\r\\n\",\"keccak256\":\"0xecc1d8ca9813a3c488af3cb5b4aa02d7d6b6ded3ff4dabcd382098137ce88cde\",\"license\":\"MIT\"},\"contracts/core/assets/settlement/ISettlement.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\r\\npragma solidity ^0.8.13;\\r\\n\\r\\nimport \\\"../building/IBuilding.sol\\\";\\r\\nimport \\\"../army/IArmy.sol\\\";\\r\\nimport \\\"../siege/ISiege.sol\\\";\\r\\nimport \\\"../zone/IZone.sol\\\";\\r\\n\\r\\n/// @title Settlement interface\\r\\n/// @notice Functions to read state/modify state in order to get current settlement parameters and/or interact with it\\r\\ninterface ISettlement {\\r\\n    /// @notice Emitted when new building is placed, all building are placed on settlement creation\\r\\n    /// @param contractAddress New building address\\r\\n    /// @param scriptName Building name\\r\\n    event NewBuilding(address contractAddress, string scriptName);\\r\\n\\r\\n    /// @notice Emitted when settlements army is created, is it created on settlement creation\\r\\n    /// @param armyAddress New army address\\r\\n    /// @param position Position\\r\\n    event NewArmy(address armyAddress, uint32 position);\\r\\n\\r\\n    /// @notice Emitted when siege is created on settlement if not present. During settlements lifetime multiple sieges can be created (one after another, not multiple simultaneously)\\r\\n    /// @param siegeAddress New siege address\\r\\n    event SiegeCreated(address indexed siegeAddress);\\r\\n\\r\\n    /// @notice Emitted when #addGovernor or #removeGovernor is called\\r\\n    /// @param currentEpoch Current governor epoch\\r\\n    /// @param governorAddress Address of the governor event is applicable\\r\\n    /// @param status Is governor became active/inactive\\r\\n    event GovernorChanged(uint256 indexed currentEpoch, address indexed governorAddress, bool status);\\r\\n\\r\\n    /// @notice Emitted when #removeGovernors is called\\r\\n    /// @param currentEpoch New governor epoch\\r\\n    event NewSettlementEpoch(uint256 currentEpoch);\\r\\n\\r\\n    // State variables\\r\\n\\r\\n    /// @notice Zone to which this settlement belongs\\r\\n    /// @dev Immutable, initialized on the settlement creation\\r\\n    function currentZone() external view returns (IZone);\\r\\n\\r\\n    /// @notice Banner token id to which current settlement belongs\\r\\n    /// @dev Immutable, initialized on the settlement creation\\r\\n    function ownerTokenId() external view returns (uint256);\\r\\n\\r\\n    /// @notice Siege of the settlement\\r\\n    /// @dev If any army is sieging settlement not address(0), otherwise address(0)\\r\\n    function siege() external view returns (ISiege);\\r\\n\\r\\n    /// @notice Mapping containing settlements buildings\\r\\n    /// @dev Types of buildings supported can be queried from registry\\r\\n    function buildings(string memory buildingName) external view returns (IBuilding);\\r\\n\\r\\n    /// @notice Current governors epoch\\r\\n    /// @dev Modified when #removeGovernors is called\\r\\n    function currentGovernorsEpoch() external view returns (uint256);\\r\\n\\r\\n    /// @notice Current settlements governors\\r\\n    /// @dev Modified when #addGovernor or #removeGovernor is called\\r\\n    function governors(uint256 epoch, address isGovernor) external view returns (bool);\\r\\n\\r\\n    /// @notice Settlements army\\r\\n    /// Immutable, initialized on the settlement creation\\r\\n    function army() external view returns (IArmy);\\r\\n\\r\\n    /// @notice Extra prosperity amount gained from demilitarization of any army on this settlement\\r\\n    /// @dev Used for determination amount of real prosperity this settlement has\\r\\n    function extraProsperity() external view returns (uint256);\\r\\n\\r\\n    /// @notice Position on which settlement is created\\r\\n    /// @dev Immutable, initialized on the settlement creation\\r\\n    function position() external view returns (uint32);\\r\\n\\r\\n    // Functions\\r\\n\\r\\n    /// @notice Proxy initializer\\r\\n    /// @dev Called by factory contract which creates current instance\\r\\n    /// @param createdWithOwnerTokenId Banner token id to which current settlement belongs\\r\\n    /// @param zoneAddress Zone address to which this settlement belongs\\r\\n    /// @param settlementPosition Position on which settlement is created\\r\\n    function init(\\r\\n        uint256 createdWithOwnerTokenId,\\r\\n        address zoneAddress,\\r\\n        uint32 settlementPosition\\r\\n    ) external;\\r\\n\\r\\n    /// @notice Withdraws game resources from settlement to specified address\\r\\n    /// @dev In case if someone accidentally transfers game resource to the settlement\\r\\n    /// @param resourceName Game resource name\\r\\n    /// @param to Address that will receive resources\\r\\n    /// @param amount Amount to transfer\\r\\n    function withdrawResources(\\r\\n        string memory resourceName,\\r\\n        address to,\\r\\n        uint256 amount\\r\\n    ) external;\\r\\n\\r\\n    /// @notice Transfers game resources from msg.sender and workers from settlement to building\\r\\n    /// @dev Assigns resources+workers to building in single transaction\\r\\n    /// @dev If resourcesOwner == address(0) -> resources will be taken from msg.sender\\r\\n    /// @dev If resourcesOwner != address(0) and resourcesOwner has given allowance to msg.sender >= resourcesAmount -> resources will be taken from resourcesOwner\\r\\n    /// @param buildingAddress Building address\\r\\n    /// @param workersAmount Workers amount (in 1e18 precision)\\r\\n    /// @param resourceTypes Resource types\\r\\n    /// @param resourcesAmounts Resources amounts\\r\\n    function assignResourcesAndWorkersToBuilding(\\r\\n        address resourcesOwner,\\r\\n        address buildingAddress,\\r\\n        uint256 workersAmount,\\r\\n        string[] memory resourceTypes,\\r\\n        uint256[] memory resourcesAmounts\\r\\n    ) external;\\r\\n\\r\\n    /// @notice Creates new building\\r\\n    /// @dev All buildings are created on settlement creation\\r\\n    /// @param buildingName Building name\\r\\n    /// @return buildingAddress Address of created building\\r\\n    function newBuilding(string memory buildingName) external returns (address buildingAddress);\\r\\n\\r\\n    /// @notice Calculates current fort health and damage dealt at specified timestamp\\r\\n    /// @dev Uses fort production and siege parameters to forecast health and damage will be dealt at specified time\\r\\n    /// @param timestamp Time at which calculate parameters\\r\\n    /// @return currentHealth Health value at specified time\\r\\n    /// @return damage Amount of damage dealt from fort.production.lastUpdateState to specified timestamp\\r\\n    function calculateCurrentHealthAndDamage(uint256 timestamp)\\r\\n        external\\r\\n        view\\r\\n        returns (uint256 currentHealth, uint256 damage);\\r\\n\\r\\n    /// @notice Updates settlement health to current block\\r\\n    /// @dev Can be called by everyone\\r\\n    function updateCurrentHealth() external;\\r\\n\\r\\n    /// @notice Creates empty siege\\r\\n    /// @dev Can be called by everyone\\r\\n    function createSiege() external;\\r\\n\\r\\n    /// @notice Updates fort health\\r\\n    /// @dev Even though function is opened it can be called only by world or world asset\\r\\n    /// @param healthDiff Health delta between current value and new value\\r\\n    /// @param isProduced Banner, whether health is produced or removed\\r\\n    function updateFortHealth(uint256 healthDiff, bool isProduced) external;\\r\\n\\r\\n    /// @notice Applies production of every building which produces prosperity\\r\\n    /// @dev Can be used by everyone\\r\\n    function massUpdate() external;\\r\\n\\r\\n    /// @notice Calculates current prosperity at specified timestamp\\r\\n    /// @dev Uses buildings productions to forecast amount of prosperity will settlement will have at specified time\\r\\n    /// @param timestamp Time at which calculate current prosperity\\r\\n    /// @return currentProsperity Amount of prosperity at specified time\\r\\n    function accumulatedCurrentProsperity(uint256 timestamp) external view returns (int256 currentProsperity);\\r\\n\\r\\n    /// @notice Calculates total siege power presented at current time\\r\\n    /// @dev Updated when army add/remove units from siege\\r\\n    /// @return currentSiegePower Amount of total siege power at current time\\r\\n    function getCurrentSiegePower() external view returns (uint256 currentSiegePower);\\r\\n\\r\\n    /// @notice Calculates current settlement owner\\r\\n    /// @dev Settlements owner is considered an address, which holds ownerTokenId NFT\\r\\n    /// @return settlementOwner Settlement owner\\r\\n    function getSettlementOwner() external view returns (address settlementOwner);\\r\\n\\r\\n    /// @notice Calculates whether provided address is settlement ruler or not\\r\\n    /// @dev Settlements ruler is an address which owns settlement or an address(es) by which settlement is/are governed\\r\\n    /// @param potentialRuler Address to check\\r\\n    /// @return isRuler Banner, whether specified address is ruler or not\\r\\n    function isRuler(address potentialRuler) external view returns (bool isRuler);\\r\\n\\r\\n    /// @notice Extends current settlement prosperity by specified amount\\r\\n    /// @dev Even though function is opened it can be called only by world or world asset\\r\\n    /// @param prosperityAmount Amount of prosperity to which extend current prosperity\\r\\n    function extendProsperity(uint256 prosperityAmount) external;\\r\\n\\r\\n    /// @notice Begins tile capture\\r\\n    /// @param position Position\\r\\n    /// @param prosperityStake Prosperity stake\\r\\n    function beginTileCapture(uint32 position, uint256 prosperityStake) external;\\r\\n\\r\\n    /// @notice Cancels tile capture\\r\\n    /// @param position Position\\r\\n    function cancelTileCapture(uint32 position) external;\\r\\n\\r\\n    /// @notice Gives up captured tile\\r\\n    /// @param position Position\\r\\n    function giveUpCapturedTile(uint32 position) external;\\r\\n\\r\\n    /// @notice Claims captured tile\\r\\n    /// @param position Position\\r\\n    function claimCapturedTile(uint32 position) external;\\r\\n}\\r\\n\",\"keccak256\":\"0xf58c3c5a8761258bfa30bfe94babaf12b2f239650775cec6d68086c5ffb8841a\",\"license\":\"MIT\"},\"contracts/core/assets/settlementsMarket/ISettlementMarket.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\r\\npragma solidity ^0.8.13;\\r\\n\\r\\nimport \\\"../zone/IZone.sol\\\";\\r\\n\\r\\n/// @title Zone settlements market interface\\r\\n/// @notice Functions to read state/modify state in order to buy settlement\\r\\ninterface ISettlementsMarket {\\r\\n    /// @notice Emitted when #buySettlement is called\\r\\n    /// @param settlementAddress Settlement address\\r\\n    /// @param settlementCost Settlement cost\\r\\n    event SettlementBought(address settlementAddress, uint256 settlementCost);\\r\\n\\r\\n    // State variables\\r\\n\\r\\n    /// @notice Zone to which this market belongs\\r\\n    /// @dev Immutable, initialized on the market creation\\r\\n    function currentZone() external view returns (IZone);\\r\\n\\r\\n    /// @notice Time at which market was created\\r\\n    /// @dev Immutable, initialized on the market creation\\r\\n    function marketCreationTime() external view returns (uint256);\\r\\n\\r\\n    // Functions\\r\\n\\r\\n    /// @notice Proxy initializer\\r\\n    /// @dev Called by factory contract which creates current instance\\r\\n    /// @param zoneAddress Zone address\\r\\n    function init(\\r\\n        address zoneAddress\\r\\n    ) external;\\r\\n\\r\\n    /// @notice Buys settlement in zone\\r\\n    /// @dev Tokens will be deducted from msg.sender\\r\\n    /// @param position Position\\r\\n    /// @param ownerTokenId MithraeumBanners token id which will represent to which settlement will be attached to\\r\\n    /// @param maxTokensToUse Maximum amount of tokens to be withdrawn for settlement\\r\\n    function buySettlement(\\r\\n        uint32 position,\\r\\n        uint256 ownerTokenId,\\r\\n        uint256 maxTokensToUse\\r\\n    ) external payable;\\r\\n\\r\\n    /// @notice Returns amount of tokens new settlement will cost\\r\\n    /// @dev Calculates cost of placing new settlement in tokens\\r\\n    /// @return cost Amount of tokens new settlement will cost\\r\\n    function getNewSettlementCost() external view returns (uint256 cost);\\r\\n}\\r\\n\",\"keccak256\":\"0x663de027e5e536f161137333ec99bcf12bbbd2164a56155f6dde5aefae01cb68\",\"license\":\"MIT\"},\"contracts/core/assets/siege/ISiege.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\r\\npragma solidity ^0.8.13;\\r\\n\\r\\nimport \\\"../settlement/ISettlement.sol\\\";\\r\\n\\r\\n/// @title Siege interface\\r\\n/// @notice Functions to read state/modify state in order to get current siege parameters and/or interact with it\\r\\ninterface ISiege {\\r\\n    struct ArmyInfo {\\r\\n        uint256 rewardDebt;\\r\\n        uint256 points;\\r\\n    }\\r\\n\\r\\n    /// @notice Emitted when #addUnits is called\\r\\n    /// @param from Army address which adds units\\r\\n    /// @param settlement Settlement address of related siege\\r\\n    /// @param unitsNames Unit types which were added\\r\\n    /// @param unitsCount Counts of units which were added\\r\\n    event UnitsAdded(address indexed from, address indexed settlement, string[] unitsNames, uint256[] unitsCount);\\r\\n\\r\\n    /// @notice Emitted when #withdrawUnits is called\\r\\n    /// @param to Army address which receives back its units\\r\\n    /// @param settlement Settlement address of related siege\\r\\n    /// @param unitsNames Unit types which were withdrawn\\r\\n    /// @param unitsCount Counts of units which were withdrawn\\r\\n    event UnitsWithdrawn(address indexed to, address indexed settlement, string[] unitsNames, uint256[] unitsCount);\\r\\n\\r\\n    /// @notice Emitted when #addUnits or #withdrawUnits is called in order to preserve previous amount of points were farmed by the army with previous speed\\r\\n    /// @param armyAddress Army address which received siege points\\r\\n    /// @param pointsReceived Amount of points received\\r\\n    event PointsReceived(address indexed armyAddress, uint256 pointsReceived);\\r\\n\\r\\n    /// @notice Emitted when #claimResources is called\\r\\n    /// @param armyAddress Army address which spent siege points\\r\\n    /// @param pointsSpent Amount of points spent\\r\\n    event PointsSpent(address indexed armyAddress, uint256 pointsSpent);\\r\\n\\r\\n    /// @notice Emitted when #liquidate is called, emitted for every unit type that was liquidated\\r\\n    /// @param armyAddress Army address which was liquidated\\r\\n    /// @param unitName Unit type\\r\\n    /// @param unitsLiquidated Amount of units liquidated\\r\\n    event Liquidated(address armyAddress, string unitName, uint256 unitsLiquidated);\\r\\n\\r\\n    // State variables\\r\\n\\r\\n    /// @notice Settlement address to which this siege belongs\\r\\n    /// @dev Immutable, initialized on the siege creation\\r\\n    function currentSettlement() external view returns (ISettlement);\\r\\n\\r\\n    /// @notice Mapping containing army information related to current siege\\r\\n    /// @dev Updated when #addUnits, #withdrawUnits, #claimResource, #liqudate is called\\r\\n    function armyInfo(address armyAddress) external view returns (uint256 rewardDebt, uint256 points);\\r\\n\\r\\n    /// @notice Mapping containing amount of stored units in siege for specified army\\r\\n    /// @dev Updated when #addUnits, #withdrawUnits, #liqudate is called\\r\\n    function storedUnits(address armyAddress, string memory unitName) external view returns (uint256);\\r\\n\\r\\n    /// @notice Last time at which siege was updated\\r\\n    /// @dev Updated when siege parameters related to pointsPerShare were changed\\r\\n    function lastUpdate() external view returns (uint256);\\r\\n\\r\\n    /// @notice Amount of point per share\\r\\n    /// @dev Updated when siege parameters related to armies were changed\\r\\n    function pointsPerShare() external view returns (uint256);\\r\\n\\r\\n    // Functions\\r\\n\\r\\n    /// @notice Proxy initializer\\r\\n    /// @dev Called by factory contract which creates current instance\\r\\n    /// @param settlementAddress Settlement address\\r\\n    function init(address settlementAddress) external;\\r\\n\\r\\n    /// @notice Updates current siege to the current state\\r\\n    /// @dev Synchronizes health up to current state, produces points for besieging armies\\r\\n    function update() external;\\r\\n\\r\\n    /// @notice Claims resources for specified points from building related to siege\\r\\n    /// @dev Even though function is opened, it can be called only by world asset\\r\\n    /// @param buildingAddress Address of building to rob\\r\\n    /// @param points Amount of points to spend for robbing\\r\\n    function claimResources(address buildingAddress, uint256 points) external;\\r\\n\\r\\n    /// @notice Calculates total damage for provided period of time\\r\\n    /// @param period Time period to use to calculate damage\\r\\n    /// @return damage Total damage for provided period of time\\r\\n    function getTotalDamageByPeriod(uint256 period) external view returns (uint256 damage);\\r\\n\\r\\n    /// @notice Calculates total damage for period from lastUpdate and block.timestamp\\r\\n    /// @return damage Total damage for last period\\r\\n    function getTotalDamageLastPeriod() external view returns (uint256 damage);\\r\\n\\r\\n    /// @notice Updates siege with new amount of damage fort taken\\r\\n    /// @dev Even though function is opened, it can be called only by world asset\\r\\n    function systemUpdate(uint256 totalDamage) external;\\r\\n\\r\\n    /// @notice Adds units to siege\\r\\n    /// @dev Even though function is opened, it can be called only by world asset\\r\\n    /// @param unitsNames Unit types which will be added to siege\\r\\n    /// @param unitsCount Amounts of units will be added to siege\\r\\n    function addUnits(string[] memory unitsNames, uint256[] memory unitsCount) external;\\r\\n\\r\\n    /// @notice Withdraws units from siege\\r\\n    /// @dev Even though function is opened, it can be called only by world asset\\r\\n    /// @param unitsNames Unit types which will be withdrawn to siege\\r\\n    /// @param unitsCount Amounts of units will be withdrawn to siege\\r\\n    function withdrawUnits(string[] memory unitsNames, uint256[] memory unitsCount) external;\\r\\n\\r\\n    /// @notice Calculates if provided army address can be liquidated from current siege\\r\\n    /// @dev Does not take into an account if army's battle is finished and army isn't left the battle\\r\\n    /// @param armyAddress Address of the army\\r\\n    /// @return canLiquidate Can army be liquidated from current siege\\r\\n    function canLiquidate(address armyAddress) external view returns (bool canLiquidate);\\r\\n\\r\\n    /// @notice Calculates amount of points army will have at specified time\\r\\n    /// @dev If timestamp=0, returns value as if timestamp=block.timestamp\\r\\n    /// @param armyAddress Address of the army\\r\\n    /// @param timestamp Time at which calculate points\\r\\n    /// @return points Amount of points army will have at specified time\\r\\n    function getUserPointsOnTime(address armyAddress, uint256 timestamp) external view returns (uint256 points);\\r\\n\\r\\n    /// @notice Returns amount of stored units for specified army in siege\\r\\n    /// @dev Function returns only amounts without types, index in returned array for each unit type is same as in 'registry.getUnits'\\r\\n    /// @param armyAddress Address of the army\\r\\n    /// @return units Amount of units that army has in siege\\r\\n    function getStoredUnits(address armyAddress) external view returns (uint256[] memory units);\\r\\n\\r\\n    /// @notice Calculates total siege stats\\r\\n    /// @dev Values are calculated for all armies that are present in siege\\r\\n    /// @return power Total power that placed into siege\\r\\n    /// @return supply Total supply that siege has\\r\\n    function calculateTotalSiegeStats() external view returns (uint256 power, uint256 supply);\\r\\n\\r\\n    /// @notice Liquidates army\\r\\n    /// @dev Can be called by anyone, caller will receive a reward\\r\\n    /// @param armyAddress Address of army to liquidate\\r\\n    function liquidate(address armyAddress) external;\\r\\n\\r\\n    /// @notice Calculates amount of points army has\\r\\n    /// @dev Uses block.timestamp at #getUserPointsOnTime\\r\\n    /// @param armyAddress Address of army\\r\\n    /// @return points Amount of points army has\\r\\n    function getUserPoints(address armyAddress) external returns (uint256 points);\\r\\n\\r\\n    /// @notice Calculates army siege stats\\r\\n    /// @dev Values are calculated for specified army that is present in siege\\r\\n    /// @param armyAddress Address of army\\r\\n    /// @return power Total power that army has\\r\\n    /// @return supply Total supply that army has\\r\\n    function calculateArmySiegeStats(address armyAddress) external returns (uint256 power, uint256 supply);\\r\\n}\\r\\n\",\"keccak256\":\"0x1c392b7db6c42f42e5f6f2b01cfecd03305234a0c79784532d77ce2c676ac6bc\",\"license\":\"MIT\"},\"contracts/core/assets/tileCapturingSystem/ITileCapturingSystem.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\r\\npragma solidity ^0.8.13;\\r\\n\\r\\n/// @title Tile capturing system interface\\r\\n/// @notice Functions to read state/modify state in order to get current system parameters and/or interact with it\\r\\ninterface ITileCapturingSystem {\\r\\n    struct TileInfo {\\r\\n        address ownerSettlementAddress;\\r\\n        address usurperSettlementAddress;\\r\\n        uint256 usurperProsperityStake;\\r\\n        uint256 usurperCaptureStartTime;\\r\\n        uint256 usurperCaptureEndTime;\\r\\n    }\\r\\n\\r\\n    /// @notice Emitted when #beginTileCaptureBySettlement is called\\r\\n    /// @param position Position\\r\\n    /// @param settlementAddress Settlement address\\r\\n    /// @param prosperityStake Prosperity stake\\r\\n    event TileCapturingStarted(\\r\\n        uint32 position,\\r\\n        address settlementAddress,\\r\\n        uint256 prosperityStake\\r\\n    );\\r\\n\\r\\n    /// @notice Emitted when #cancelTileCaptureBySettlement\\r\\n    /// @param position Position\\r\\n    /// @param settlementAddress Settlement address\\r\\n    event TileCapturingCancelled(\\r\\n        uint32 position,\\r\\n        address settlementAddress\\r\\n    );\\r\\n\\r\\n    /// @notice Emitted when #claimTileCaptureBySettlement\\r\\n    /// @param position Position\\r\\n    /// @param settlementAddress Settlement address\\r\\n    /// @param prosperityStake Prosperity stake\\r\\n    event CapturedTileClaimed(\\r\\n        uint32 position,\\r\\n        address settlementAddress,\\r\\n        uint256 prosperityStake\\r\\n    );\\r\\n\\r\\n    /// @notice Emitted when #giveUpCapturedTile\\r\\n    /// @param position Position\\r\\n    /// @param settlementAddress Settlement address\\r\\n    event CapturedTileGivenUp(\\r\\n        uint32 position,\\r\\n        address settlementAddress\\r\\n    );\\r\\n\\r\\n    // State variables\\r\\n\\r\\n    /// @notice Mapping containing settlements' current capturing tile\\r\\n    /// @dev Updated when #beginTileCaptureBySettlement or #claimTileCaptureBySettlement, #cancelTileCaptureBySettlement is called\\r\\n    function settlementCapturingTile(address settlementAddress) external view returns (uint32);\\r\\n\\r\\n    /// @notice Mapping containing tile info by provided position\\r\\n    /// @dev Updated when #beginTileCaptureBySettlement or #claimTileCaptureBySettlement, #cancelTileCaptureBySettlement is called\\r\\n    function tilesInfo(uint32 position) external view returns (\\r\\n        address ownerSettlementAddress,\\r\\n        address usurperSettlementAddress,\\r\\n        uint256 usurperProsperityStake,\\r\\n        uint256 usurperCaptureStartTime,\\r\\n        uint256 usurperCaptureEndTime\\r\\n    );\\r\\n\\r\\n    // Functions\\r\\n\\r\\n    /// @notice Proxy initializer\\r\\n    /// @dev Called by factory contract which creates current instance\\r\\n    function init() external;\\r\\n\\r\\n    /// @notice Begins tile capturing\\r\\n    /// @dev Even though function is opened, it can be called only by settlement\\r\\n    /// @param position Position\\r\\n    function beginTileCaptureBySettlement(uint32 position, uint256 prosperityStake) external;\\r\\n\\r\\n    /// @notice Cancels tile capturing\\r\\n    /// @dev Even though function is opened, it can be called only by settlement\\r\\n    /// @param position Position\\r\\n    function cancelTileCaptureBySettlement(uint32 position) external;\\r\\n\\r\\n    /// @notice Gives up captured tile\\r\\n    /// @dev Even though function is opened, it can be called only by settlement\\r\\n    /// @param position Position\\r\\n    function giveUpCapturedTileBySettlement(uint32 position) external;\\r\\n\\r\\n    /// @notice Claims captured tile\\r\\n    /// @dev Even though function is opened, it can be called only by settlement\\r\\n    /// @param position Position\\r\\n    function claimTileCaptureBySettlement(uint32 position) external;\\r\\n\\r\\n    /// @notice Returns positions of captured tiles for provided settlement address\\r\\n    /// @dev Returns only claimed tiles\\r\\n    /// @param settlementAddress Settlement address\\r\\n    /// @return positions Positions of captured tiles\\r\\n    function getCapturedTilesBySettlementAddress(address settlementAddress) external view returns (uint32[] memory positions);\\r\\n\\r\\n    /// @notice New settlement handler\\r\\n    /// @dev Even though function is opened, it can be called only by world asset\\r\\n    /// @param position Position\\r\\n    /// @param settlementAddress Settlement address\\r\\n    function handleNewSettlement(uint32 position, address settlementAddress) external;\\r\\n}\\r\\n\",\"keccak256\":\"0xde28fbe3dc5e75f6fb96227e7b45b8a6a058493a3fb37d4a14ba719e9bf67570\",\"license\":\"MIT\"},\"contracts/core/assets/tokens/prosperity/IProsperity.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\r\\npragma solidity ^0.8.13;\\r\\n\\r\\nimport \\\"../../../../token/IERC20Burnable.sol\\\";\\r\\nimport \\\"../../../../token/IERC20Int.sol\\\";\\r\\n\\r\\n/// @title Resource interface\\r\\n/// @notice Functions to read state/modify state in order to get current prosperity parameters and/or interact with it\\r\\ninterface IProsperity is IERC20Int, IERC20Burnable {\\r\\n    // State variables\\r\\n\\r\\n    /// @notice Mapping containing amount of prosperity spend for workers buying\\r\\n    /// @dev Only settlements can spend prosperity for workers\\r\\n    /// @param settlementAddress Address of settlement\\r\\n    /// @return amount Amount of prosperity spend for workers buying\\r\\n    function prosperitySpent(address settlementAddress) external view returns (uint256 amount);\\r\\n\\r\\n    // Functions\\r\\n\\r\\n    /// @notice Proxy initializer\\r\\n    /// @dev Called by factory contract which creates current instance\\r\\n    function init() external;\\r\\n\\r\\n    /// @notice Spends prosperity for specified settlement address\\r\\n    /// @dev Called for settlement when settlement is buying workers\\r\\n    /// @param settlementAddress Address of settlement\\r\\n    /// @param amount Amount of prosperity spend for workers buying\\r\\n    function spend(address settlementAddress, uint256 amount) external;\\r\\n\\r\\n    /// @notice Mints prosperity to specified address\\r\\n    /// @dev Even though function is opened, it can only be called by world asset\\r\\n    /// @param to Address which will receive prosperity\\r\\n    /// @param amount Amount of prosperity to mint\\r\\n    function mint(address to, uint256 amount) external;\\r\\n}\\r\\n\",\"keccak256\":\"0x07cb069eeb2fc5c4528568097af70ea75d5c29b5a478f333416748fcfb1106f7\",\"license\":\"MIT\"},\"contracts/core/assets/tokens/resources/IResource.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\r\\npragma solidity ^0.8.13;\\r\\n\\r\\nimport \\\"@openzeppelin/contracts/token/ERC20/IERC20.sol\\\";\\r\\nimport \\\"../../../../token/IERC20Burnable.sol\\\";\\r\\n\\r\\n/// @title Resource interface\\r\\n/// @notice Functions to read state/modify state in order to get current resource parameters and/or interact with it\\r\\ninterface IResource is IERC20Burnable, IERC20 {\\r\\n    // State variables\\r\\n\\r\\n    /// @notice Token name\\r\\n    /// @dev Immutable, initialized on creation\\r\\n    function tokenName() external returns (string memory);\\r\\n\\r\\n    /// @notice Token symbol\\r\\n    /// @dev Immutable, initialized on creation\\r\\n    function tokenSymbol() external returns (string memory);\\r\\n\\r\\n    /// @notice Name of the resource inside epoch.resources\\r\\n    /// @dev Immutable, initialized on creation\\r\\n    function worldResourceName() external returns (string memory);\\r\\n\\r\\n    // Functions\\r\\n\\r\\n    /// @notice Proxy initializer\\r\\n    /// @dev Called by factory contract which creates current instance\\r\\n    /// @param tokenName Token name\\r\\n    /// @param tokenSymbol Token symbol\\r\\n    /// @param worldResourceName World resource name\\r\\n    function init(\\r\\n        string memory tokenName,\\r\\n        string memory tokenSymbol,\\r\\n        string memory worldResourceName\\r\\n    ) external;\\r\\n\\r\\n    /// @notice Returns state balance for specified token owner\\r\\n    /// @dev Current function returns value of balances 'as is', without recalculation (same as 'balanceOf' you would expect)\\r\\n    /// @param tokensOwner Tokens owner\\r\\n    /// @return balance Balance for token owner\\r\\n    function stateBalanceOf(address tokensOwner) external view returns (uint256 balance);\\r\\n\\r\\n    /// @notice Mints resource to specified address\\r\\n    /// @dev Even though function is opened, it can only be called by world asset\\r\\n    /// @param to Address which will receive resources\\r\\n    /// @param amount Amount of resources to mint\\r\\n    function mint(address to, uint256 amount) external;\\r\\n\\r\\n    /// @notice Spends allowance (same as ERC20._spendAllowance)\\r\\n    /// @dev Even though function is opened, it can be called only by world asset\\r\\n    function spendAllowance(\\r\\n        address owner,\\r\\n        address spender,\\r\\n        uint256 amount\\r\\n    ) external;\\r\\n}\\r\\n\",\"keccak256\":\"0x0cb673c9d0a80287ef12734668447d3b6506b658baba14ec337187e7395b7c5b\",\"license\":\"MIT\"},\"contracts/core/assets/tokens/units/IUnits.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\r\\npragma solidity ^0.8.13;\\r\\n\\r\\nimport \\\"@openzeppelin/contracts/token/ERC20/IERC20.sol\\\";\\r\\nimport \\\"../../../../token/IERC20Burnable.sol\\\";\\r\\n\\r\\n/// @title Units interface\\r\\n/// @notice Functions to read state/modify state in order to get current unit parameters and/or interact with it\\r\\ninterface IUnits is IERC20Burnable, IERC20 {\\r\\n    // State variables\\r\\n\\r\\n    /// @notice Token name\\r\\n    /// @dev Immutable, initialized on creation\\r\\n    function tokenName() external returns (string memory);\\r\\n\\r\\n    /// @notice Token symbol\\r\\n    /// @dev Immutable, initialized on creation\\r\\n    function tokenSymbol() external returns (string memory);\\r\\n\\r\\n    /// @notice Name of the unit inside epoch.units\\r\\n    /// @dev Immutable, initialized on creation\\r\\n    function worldUnitName() external returns (string memory);\\r\\n\\r\\n    // Functions\\r\\n\\r\\n    /// @notice Proxy initializer\\r\\n    /// @dev Called by factory contract which creates current instance\\r\\n    /// @param tokenName Token name\\r\\n    /// @param tokenSymbol Token symbol\\r\\n    /// @param worldUnitsName World units name\\r\\n    function init(\\r\\n        string memory tokenName,\\r\\n        string memory tokenSymbol,\\r\\n        string memory worldUnitsName\\r\\n    ) external;\\r\\n\\r\\n    /// @notice Mints units to specified address\\r\\n    /// @dev Even though function is opened, it can only be called by world asset\\r\\n    /// @param to Address which will receive units\\r\\n    /// @param amount Amount of units to mint\\r\\n    function mint(address to, uint256 amount) external;\\r\\n}\\r\\n\",\"keccak256\":\"0xaa98e273e151ebb2e4c11cadbbe25fc2cc5191525ba637fed0f10b111f2006ec\",\"license\":\"MIT\"},\"contracts/core/assets/tokens/workers/IWorkers.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\r\\npragma solidity ^0.8.13;\\r\\n\\r\\nimport \\\"@openzeppelin/contracts/token/ERC20/IERC20.sol\\\";\\r\\nimport \\\"../../../../token/IERC20Burnable.sol\\\";\\r\\n\\r\\n/// @title Workers interface\\r\\n/// @notice Functions to read state/modify state in order to get current unit parameters and/or interact with it\\r\\ninterface IWorkers is IERC20Burnable, IERC20 {\\r\\n    /// @notice Proxy initializer\\r\\n    /// @dev Called by factory contract which creates current instance\\r\\n    function init() external;\\r\\n\\r\\n    /// @notice Mints workers to specified address\\r\\n    /// @dev Even though function is opened, it can only be called by world asset\\r\\n    /// @param to Address which will receive workers\\r\\n    /// @param amount Amount of units to mint\\r\\n    function mint(address to, uint256 amount) external;\\r\\n}\\r\\n\",\"keccak256\":\"0xfd1ebc8c98fa9ef0164bc0365b3556300ba69138c20a2b1f0fdea3f0cc6a04da\",\"license\":\"MIT\"},\"contracts/core/assets/unitsPool/IUnitsPool.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\r\\npragma solidity ^0.8.13;\\r\\n\\r\\nimport \\\"../tokens/units/IUnits.sol\\\";\\r\\nimport \\\"../zone/IZone.sol\\\";\\r\\n\\r\\n/// @title Zone units pool interface\\r\\n/// @notice Functions to read state/modify state in order to mint units/swap weapons for units\\r\\ninterface IUnitsPool {\\r\\n    /// @notice Emitted when #swapWeaponsForExactUnits or #swapWeaponsForExactUnitsByZone is called\\r\\n    /// @param spender The address which payed weapons\\r\\n    /// @param armyAddress The address of the army which received units\\r\\n    /// @param unitsBought Amount of units bought\\r\\n    /// @param weaponsSpent Amount of weapons spent\\r\\n    event UnitsBought(\\r\\n        address spender,\\r\\n        address armyAddress,\\r\\n        uint256 unitsBought,\\r\\n        uint256 weaponsSpent\\r\\n    );\\r\\n\\r\\n    // State variables\\r\\n\\r\\n    /// @notice Zone to which this pool belongs\\r\\n    /// @dev Immutable, initialized on the zone creation\\r\\n    function currentZone() external view returns (IZone);\\r\\n\\r\\n    /// @notice Units type\\r\\n    /// @dev Immutable, initialized on the zone creation\\r\\n    function unitsType() external view returns (string memory);\\r\\n\\r\\n    /// @notice Time at which last purchase is performed\\r\\n    /// @dev Updated every time when #swapWeaponsForExactUnits or #swapWeaponsForExactUnitsByZone is called\\r\\n    function lastPurchaseTime() external view returns (uint256);\\r\\n\\r\\n    /// @notice Starting unit price\\r\\n    /// @dev Updated every time when #swapWeaponsForExactUnits or #swapWeaponsForExactUnitsByZone is called\\r\\n    function startingPrice() external view returns (uint256);\\r\\n\\r\\n    // Functions\\r\\n\\r\\n    /// @notice Proxy initializer\\r\\n    /// @dev Called by factory contract which creates current instance\\r\\n    /// @param zoneAddress Zone address\\r\\n    /// @param unitsType Units type\\r\\n    function init(\\r\\n        address zoneAddress,\\r\\n        string memory unitsType\\r\\n    ) external;\\r\\n\\r\\n    /// @notice Swaps weapons() for exact units()\\r\\n    /// @dev If resourcesOwner == address(0) -> resources will be taken from msg.sender\\r\\n    /// @dev If resourcesOwner != address(0) and resourcesOwner has given allowance to msg.sender >= amount of weapons for units -> resources will be taken from resourcesOwner\\r\\n    /// @param resourcesOwner Resources owner\\r\\n    /// @param settlementAddress Settlement address, army of which, will receive units\\r\\n    /// @param unitsToBuy Exact amount of units\\r\\n    /// @param maxWeaponsToSell Maximum amount of weapons to be taken for exact amount of units\\r\\n    /// @return unitsCount Amount of units bought by weapons\\r\\n    function swapWeaponsForExactUnits(\\r\\n        address resourcesOwner,\\r\\n        address settlementAddress,\\r\\n        uint256 unitsToBuy,\\r\\n        uint256 maxWeaponsToSell\\r\\n    ) external returns (uint256 unitsCount);\\r\\n\\r\\n    /// @notice Swaps weapons() for exact units()\\r\\n    /// @dev Even though function is opened it can be called only by zone\\r\\n    /// @dev If resourcesOwner == address(0) -> resources will be taken from msg.sender\\r\\n    /// @dev If resourcesOwner != address(0) and resourcesOwner has given allowance to msg.sender >= amount of weapons for units -> resources will be taken from resourcesOwner\\r\\n    /// @param resourcesOwner Resources owner\\r\\n    /// @param msgSender msg.sender from zone call\\r\\n    /// @param settlementAddress Settlement address, army of which, will receive units\\r\\n    /// @param unitsToBuy Exact amount of units\\r\\n    /// @param maxWeaponsToSell Maximum amount of weapons to be taken for exact amount of units\\r\\n    /// @return unitsCount Amount of units bought by weapons\\r\\n    function swapWeaponsForExactUnitsByZone(\\r\\n        address resourcesOwner,\\r\\n        address msgSender,\\r\\n        address settlementAddress,\\r\\n        uint256 unitsToBuy,\\r\\n        uint256 maxWeaponsToSell\\r\\n    ) external returns (uint256 unitsCount);\\r\\n\\r\\n    /// @notice Calculates input of weapons based on output whole amount of units\\r\\n    /// @dev Returns valid output only for integer unitsToBuy value (not in 1e18 precision)\\r\\n    /// @param unitsToBuy Amount of workers to buy\\r\\n    /// @return weaponsToSell Amount of weapons needed for unitsToBuy\\r\\n    /// @return newStartingPrice New starting price\\r\\n    function getAmountIn(uint256 unitsToBuy) external returns (uint256 weaponsToSell, uint256 newStartingPrice);\\r\\n}\\r\\n\",\"keccak256\":\"0xd4cdc0a5bd2f953655d433f1c6fac4f008e21699c29b2c8bde97726174057906\",\"license\":\"MIT\"},\"contracts/core/assets/unitsPool/UnitsPool.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\r\\npragma solidity ^0.8.13;\\r\\n\\r\\nimport \\\"@openzeppelin/contracts/utils/math/Math.sol\\\";\\r\\nimport \\\"../../../libraries/MathExtension.sol\\\";\\r\\nimport \\\"../unitsPool/IUnitsPool.sol\\\";\\r\\nimport \\\"../building/impl/IFort.sol\\\";\\r\\nimport \\\"../WorldAsset.sol\\\";\\r\\nimport \\\"../../../libraries/ABDKMath64x64.sol\\\";\\r\\n\\r\\ncontract UnitsPool is WorldAsset, IUnitsPool {\\r\\n    /// @inheritdoc IUnitsPool\\r\\n    IZone public override currentZone;\\r\\n    /// @inheritdoc IUnitsPool\\r\\n    uint256 public override lastPurchaseTime;\\r\\n    /// @inheritdoc IUnitsPool\\r\\n    string public override unitsType;\\r\\n    /// @inheritdoc IUnitsPool\\r\\n    uint256 public override startingPrice;\\r\\n\\r\\n    /// @dev Allows caller to be only zone\\r\\n    modifier onlyZone() {\\r\\n        require(msg.sender == address(currentZone), \\\"onlyZone\\\");\\r\\n        _;\\r\\n    }\\r\\n\\r\\n    /// @dev Returns weapons\\r\\n    function weapons() internal view returns (IResource) {\\r\\n        return epoch().resources(\\\"WEAPON\\\");\\r\\n    }\\r\\n\\r\\n    /// @dev Returns units by pool unit type\\r\\n    function units() internal view returns (IUnits) {\\r\\n        return epoch().units(unitsType);\\r\\n    }\\r\\n\\r\\n    /// @inheritdoc IUnitsPool\\r\\n    function init(\\r\\n        address _zoneAddress,\\r\\n        string memory _unitsType\\r\\n    ) public override initializer {\\r\\n        currentZone = IZone(_zoneAddress);\\r\\n        unitsType = _unitsType;\\r\\n        lastPurchaseTime = block.timestamp;\\r\\n        startingPrice = 10e18;\\r\\n    }\\r\\n\\r\\n    /// @dev Calculates dropped price after last purchase time\\r\\n    function getDroppedPrice() internal view returns (int128) {\\r\\n        uint256 lastActionTime = Math.max(lastPurchaseTime, world().gameStartTime());\\r\\n        int128 startingPrice64 = ABDKMath64x64.divu(startingPrice, 1e18);\\r\\n\\r\\n        if (lastActionTime >= block.timestamp) {\\r\\n            return startingPrice64;\\r\\n        }\\r\\n\\r\\n        uint256 secondsPassed = block.timestamp - lastActionTime;\\r\\n\\r\\n        (uint256 numerator, uint256 denominator) = registry().getUnitPriceDropByUnitType(unitsType);\\r\\n        int128 priceDropPerSecond64 = ABDKMath64x64.divu(numerator, denominator);\\r\\n        int128 priceDrop64 = ABDKMath64x64.pow(priceDropPerSecond64, secondsPassed);\\r\\n        return ABDKMath64x64.mul(startingPrice64, priceDrop64);\\r\\n    }\\r\\n\\r\\n    /// @dev Calculates amount of weapons and new starting price according to amount of units and price shift per unit interaction with the pool\\r\\n    function calculatePriceShiftForUnits(\\r\\n        uint256 amountOfUnits,\\r\\n        int128 priceShiftPerUnit64\\r\\n    ) internal view returns (uint256, uint256) {\\r\\n        int128 droppedPrice = getDroppedPrice();\\r\\n        int128 lastUnitPriceShift64 = ABDKMath64x64.pow(\\r\\n            priceShiftPerUnit64,\\r\\n            amountOfUnits\\r\\n        );\\r\\n\\r\\n        int128 sumOfPriceShifts64 = ABDKMath64x64.div(\\r\\n            ABDKMath64x64.sub(\\r\\n                lastUnitPriceShift64,\\r\\n                ABDKMath64x64.fromUInt(1)\\r\\n            ),\\r\\n            ABDKMath64x64.ln(priceShiftPerUnit64)\\r\\n        );\\r\\n\\r\\n        int128 weaponsForPriceShift64 = ABDKMath64x64.mul(droppedPrice, sumOfPriceShifts64);\\r\\n        int128 newStartingPrice64 = ABDKMath64x64.mul(droppedPrice, lastUnitPriceShift64);\\r\\n\\r\\n        uint256 weaponsForPriceShift = uint256(ABDKMath64x64.muli(weaponsForPriceShift64, 1e18));\\r\\n        uint256 newStartingPrice = uint256(ABDKMath64x64.muli(newStartingPrice64, 1e18));\\r\\n\\r\\n        return (weaponsForPriceShift, newStartingPrice);\\r\\n    }\\r\\n\\r\\n    /// @inheritdoc IUnitsPool\\r\\n    function getAmountIn(uint256 unitsToBuy) public view override returns (uint256, uint256) {\\r\\n        int128 priceIncreasePerUnit64 = ABDKMath64x64.divu(1004, 1000);\\r\\n        return calculatePriceShiftForUnits(unitsToBuy, priceIncreasePerUnit64);\\r\\n    }\\r\\n\\r\\n    /// @inheritdoc IUnitsPool\\r\\n    function swapWeaponsForExactUnits(\\r\\n        address resourcesOwner,\\r\\n        address settlementAddress,\\r\\n        uint256 unitsToBuy,\\r\\n        uint256 maxWeaponsToSell\\r\\n    ) public override returns (uint256) {\\r\\n        return _swapWeaponsForExactUnits(resourcesOwner, msg.sender, settlementAddress, unitsToBuy, maxWeaponsToSell);\\r\\n    }\\r\\n\\r\\n    /// @inheritdoc IUnitsPool\\r\\n    function swapWeaponsForExactUnitsByZone(\\r\\n        address resourcesOwner,\\r\\n        address msgSender,\\r\\n        address settlementAddress,\\r\\n        uint256 unitsToBuy,\\r\\n        uint256 maxWeaponsToSell\\r\\n    ) public override onlyZone returns (uint256) {\\r\\n        return _swapWeaponsForExactUnits(resourcesOwner, msgSender, settlementAddress, unitsToBuy, maxWeaponsToSell);\\r\\n    }\\r\\n\\r\\n    /// @dev Core logic related to swapping weapons for exact units\\r\\n    function _swapWeaponsForExactUnits(\\r\\n        address resourcesOwner,\\r\\n        address msgSender,\\r\\n        address settlementAddress,\\r\\n        uint256 unitsToBuy,\\r\\n        uint256 maxWeaponsToSell\\r\\n    ) internal returns (uint256) {\\r\\n        require(unitsToBuy >= 1e18, \\\"Insufficient units buy amount\\\");\\r\\n        require(MathExtension.isIntegerWithPrecision(unitsToBuy, 1e18), \\\"Not integer amount of units to buy specified\\\");\\r\\n        require(maxWeaponsToSell > 0, \\\"Insufficient maximum weapons sell amount\\\");\\r\\n        require(\\r\\n            address(ISettlement(settlementAddress).currentZone()) == address(currentZone),\\r\\n            \\\"Settlement doesn't belong to this zone\\\"\\r\\n        );\\r\\n\\r\\n        uint256 health = updateAndGetHealth(settlementAddress);\\r\\n        uint256 currentUnits = updateAndGetArmyTotalUnits(settlementAddress);\\r\\n\\r\\n        require(getMaxAllowedToBuy(health, currentUnits) >= unitsToBuy, \\\"Exceeded limit\\\");\\r\\n        (uint256 weaponsToSell, uint256 newStartingPrice) = getAmountIn(unitsToBuy / 1e18);\\r\\n\\r\\n        require(weaponsToSell <= maxWeaponsToSell, \\\"Weapons to sell is more than specified limit\\\");\\r\\n\\r\\n        IArmy army = ISettlement(settlementAddress).army();\\r\\n        army.updateState();\\r\\n        (, uint64 endTime) = army.movementTiming();\\r\\n        require(endTime == 0, \\\"Can't hire units while moving\\\");\\r\\n        (, uint64 stunEndTime) = army.stunTiming();\\r\\n        require(stunEndTime == 0, \\\"stunned army cannot hire units\\\");\\r\\n\\r\\n        address armyAddress = address(army);\\r\\n\\r\\n        if (resourcesOwner == address(0)) {\\r\\n            weapons().burnFrom(msgSender, weaponsToSell);\\r\\n        } else {\\r\\n            weapons().spendAllowance(resourcesOwner, msgSender, weaponsToSell);\\r\\n            weapons().burnFrom(resourcesOwner, weaponsToSell);\\r\\n        }\\r\\n\\r\\n        currentZone.decreaseToxicity(settlementAddress, \\\"WEAPON\\\", weaponsToSell);\\r\\n        units().mint(armyAddress, unitsToBuy);\\r\\n\\r\\n        startingPrice = newStartingPrice;\\r\\n        lastPurchaseTime = block.timestamp;\\r\\n\\r\\n        emit UnitsBought(\\r\\n            msgSender,\\r\\n            armyAddress,\\r\\n            unitsToBuy,\\r\\n            weaponsToSell\\r\\n        );\\r\\n\\r\\n        return unitsToBuy;\\r\\n    }\\r\\n\\r\\n    /// @dev Updates provided settlements fort health up to current block and returns its new value\\r\\n    function updateAndGetHealth(address settlementAddress) internal returns (uint256) {\\r\\n        ISettlement settlement = ISettlement(settlementAddress);\\r\\n        settlement.updateCurrentHealth();\\r\\n        IFort fort = IFort(address(settlement.buildings(\\\"FORT\\\")));\\r\\n        return fort.health();\\r\\n    }\\r\\n\\r\\n    /// @dev Updates provided settlements army up to current block and returns its total units count\\r\\n    function updateAndGetArmyTotalUnits(address settlementAddress) internal returns (uint256 totalUnits) {\\r\\n        ISettlement settlement = ISettlement(settlementAddress);\\r\\n        IArmy army = settlement.army();\\r\\n        army.updateState();\\r\\n\\r\\n        require(army.isHomePosition(), \\\"Can hire only on home position\\\");\\r\\n\\r\\n        ISiege siege = army.siege();\\r\\n        string[] memory units = registry().getUnits();\\r\\n\\r\\n        for (uint256 i = 0; i < units.length; i++) {\\r\\n            string memory unitName = units[i];\\r\\n\\r\\n            totalUnits += epoch().units(unitName).balanceOf(address(army));\\r\\n            if (address(siege) != address(0)) {\\r\\n                totalUnits += siege.storedUnits(address(army), unitName);\\r\\n            }\\r\\n        }\\r\\n    }\\r\\n\\r\\n    /// @dev Calculates maximum allowed extra units that can be bought and placed into army given its total units count and fort health\\r\\n    function getMaxAllowedToBuy(uint256 health, uint256 currentUnits) internal returns (uint256) {\\r\\n        uint256 maxAllowedUnits = MathExtension.roundDownWithPrecision(\\r\\n            health / registry().getUnitHiringFortHpMultiplier(),\\r\\n            1e18\\r\\n        );\\r\\n\\r\\n        if (currentUnits >= maxAllowedUnits) {\\r\\n            return 0;\\r\\n        }\\r\\n\\r\\n        return maxAllowedUnits - currentUnits;\\r\\n    }\\r\\n}\\r\\n\",\"keccak256\":\"0x4afa674c57428c55179f0abf2e946da3843aaa20dabd22806ba19e50c77b62e1\",\"license\":\"MIT\"},\"contracts/core/assets/workersPool/IWorkersPool.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\r\\npragma solidity ^0.8.13;\\r\\n\\r\\nimport \\\"../zone/IZone.sol\\\";\\r\\nimport \\\"../tokens/workers/IWorkers.sol\\\";\\r\\nimport \\\"../tokens/prosperity/IProsperity.sol\\\";\\r\\n\\r\\n/// @title Zone workers pool interface\\r\\n/// @notice Functions to read state/modify state in order to mint workers/swap prosperity for workers\\r\\ninterface IWorkersPool {\\r\\n    /// @notice Emitted when #swapProsperityForExactWorkers or #swapExactProsperityForWorkers is called\\r\\n    /// @param buyer The address of settlement which bought workers\\r\\n    /// @param workersBought Amount of workers bought\\r\\n    /// @param prosperitySpent Amount of prosperity spent\\r\\n    event WorkersBought(\\r\\n        address buyer,\\r\\n        uint256 workersBought,\\r\\n        uint256 prosperitySpent\\r\\n    );\\r\\n\\r\\n    // State variables\\r\\n\\r\\n    /// @notice Zone to which this pool belongs\\r\\n    /// @dev Immutable, initialized on the zone creation\\r\\n    function currentZone() external view returns (IZone);\\r\\n\\r\\n    /// @notice Time at which last purchase is performed\\r\\n    /// @dev Updated every time when #swapProsperityForExactWorkers is called\\r\\n    function lastPurchaseTime() external view returns (uint256);\\r\\n\\r\\n    /// @notice Starting unit price\\r\\n    /// @dev Updated every time when #swapProsperityForExactWorkers is called\\r\\n    function startingPrice() external view returns (uint256);\\r\\n\\r\\n    // Functions\\r\\n\\r\\n    /// @notice Proxy initializer\\r\\n    /// @dev Called by factory contract which creates current instance\\r\\n    /// @param zoneAddress Zone address\\r\\n    function init(\\r\\n        address zoneAddress\\r\\n    ) external;\\r\\n\\r\\n    /// @notice Swaps prosperity() for exact workers()\\r\\n    /// @dev Even though function is opened, it can be executed only by ISettlement because only ISettlement can have prosperity\\r\\n    /// @param workersToBuy Exact amount of workers\\r\\n    /// @param maxProsperityToSell Maximum amount of prosperity to be taken for exact amount of workers\\r\\n    /// @return workersCount Amount of workers bought by prosperity\\r\\n    function swapProsperityForExactWorkers(uint256 workersToBuy, uint256 maxProsperityToSell) external returns (uint256 workersCount);\\r\\n\\r\\n    /// @notice Calculates input of prosperity based on output whole amount of workers\\r\\n    /// @dev Returns valid output only for integer workersToBuy value\\r\\n    /// @param workersToBuy Amount of workers to buy\\r\\n    /// @return prosperityToSell Amount of prosperity needed for workersToBuy\\r\\n    /// @return newStartingPrice New starting price\\r\\n    function getAmountIn(uint256 workersToBuy) external returns (uint256 prosperityToSell, uint256 newStartingPrice);\\r\\n}\\r\\n\",\"keccak256\":\"0x4b7ac6bb5550d7f512e8b5ddde3b27848222487d0e2852e8e0fbd79b597138b4\",\"license\":\"MIT\"},\"contracts/core/assets/zone/IZone.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\r\\npragma solidity ^0.8.13;\\r\\n\\r\\nimport \\\"../workersPool/IWorkersPool.sol\\\";\\r\\nimport \\\"../epoch/IEpoch.sol\\\";\\r\\nimport \\\"../unitsPool/IUnitsPool.sol\\\";\\r\\nimport \\\"../settlement/ISettlement.sol\\\";\\r\\nimport \\\"../settlementsMarket/ISettlementMarket.sol\\\";\\r\\n\\r\\n/// @title Zone interface\\r\\n/// @notice Functions to read state/modify state in order to get current zone parameters and/or interact with it\\r\\ninterface IZone {\\r\\n    /// @notice Emitted when zone initialized\\r\\n    /// @param workersPoolAddress Workers pool address\\r\\n    event WorkersPoolCreated(address workersPoolAddress);\\r\\n\\r\\n    /// @notice Emitted when zone initialized\\r\\n    /// @param settlementsMarketAddress Settlements market address\\r\\n    event SettlementsMarketCreated(address settlementsMarketAddress);\\r\\n\\r\\n    /// @notice Emitted when zone initialized\\r\\n    /// @param unitsPoolAddress Units pool address\\r\\n    /// @param unitType Unit type\\r\\n    event UnitsPoolCreated(address unitsPoolAddress, string unitType);\\r\\n\\r\\n    /// @notice Emitted when #increaseToxicity is called\\r\\n    /// @param settlementAddress An address of settlement which triggered toxicity increase\\r\\n    /// @param value Amount of added toxicity\\r\\n    event ToxicityIncreased(address settlementAddress, uint256 value);\\r\\n\\r\\n    /// @notice Emitted when #decreaseToxicity is called\\r\\n    /// @param settlementAddress An address of settlement which triggered toxicity decrease\\r\\n    /// @param value Amount of subtracted toxicity\\r\\n    event ToxicityDecreased(address settlementAddress, uint256 value);\\r\\n\\r\\n    /// @notice Emitted when #updateState is called\\r\\n    /// @param lastUpdateStateTime Time at which zone time changed\\r\\n    /// @param lastUpdateStateZoneTime Current zone time\\r\\n    event ZoneTimeChanged(uint256 lastUpdateStateTime, uint256 lastUpdateStateZoneTime);\\r\\n\\r\\n    // State variables\\r\\n\\r\\n    /// @notice Workers pool\\r\\n    /// @dev Immutable, initialized on the zone creation\\r\\n    function workersPool() external view returns (IWorkersPool);\\r\\n\\r\\n    /// @notice Mapping containing units pool for provided unit type\\r\\n    /// @dev Immutable, initialized on the zone creation\\r\\n    function unitsPools(string memory unitName) external view returns (IUnitsPool);\\r\\n\\r\\n    /// @notice Mapping containing units market for provided unit type\\r\\n    /// @dev Immutable, initialized on the zone creation\\r\\n    function settlementsMarket() external view returns (ISettlementsMarket);\\r\\n\\r\\n    /// @notice Cultists settlement of this zone\\r\\n    /// @dev Immutable, initialized on the zone creation\\r\\n    function cultistsSettlement() external view returns (ISettlement);\\r\\n\\r\\n    /// @notice Last time cultists were summoned in this zone\\r\\n    /// @dev Updated when #summonCultists is called\\r\\n    function cultistsSummonTime() external view returns (uint256);\\r\\n\\r\\n    /// @notice Amount of toxicity in this zone\\r\\n    /// @dev Updated when #increaseToxicity or #decreaseToxicity is called\\r\\n    function toxicity() external view returns (int256);\\r\\n\\r\\n    /// @notice Zone id\\r\\n    /// @dev Immutable, initialized on the zone creation\\r\\n    function zoneId() external view returns (uint16);\\r\\n\\r\\n    /// @notice Last apply state time\\r\\n    /// @dev Updated when #updateState is called\\r\\n    function lastUpdateStateTime() external view returns (uint256);\\r\\n\\r\\n    /// @notice Last apply state zone time\\r\\n    /// @dev Updated when #updateState is called\\r\\n    function lastUpdateStateZoneTime() external view returns (uint256);\\r\\n\\r\\n    // Functions\\r\\n\\r\\n    /// @notice Proxy initializer\\r\\n    /// @dev Called by factory contract which creates current instance\\r\\n    /// @param zoneId Zone id\\r\\n    function init(uint16 zoneId) external;\\r\\n\\r\\n    /// @notice Creates cultists settlement\\r\\n    /// @dev Even though function is opened, it can only be called by world asset\\r\\n    /// @param cultistsPosition Cultists position\\r\\n    function createCultists(uint32 cultistsPosition) external;\\r\\n\\r\\n    /// @notice Buys specified units for specified amount of weapons in current zone\\r\\n    /// @dev If resourcesOwner == address(0) -> resources will be taken from msg.sender\\r\\n    /// @dev If resourcesOwner != address(0) and resourcesOwner has given allowance to msg.sender >= amount of weapons for units -> resources will be taken from resourcesOwner\\r\\n    /// @param resourcesOwner Resources owner\\r\\n    /// @param settlementAddress Settlement's address army of which will receive units\\r\\n    /// @param unitNames Unit types\\r\\n    /// @param unitsCounts Units counts\\r\\n    /// @param maxWeaponsToSell Maximum amounts of weapons to sell for each unit types\\r\\n    function buyUnitsBatch(\\r\\n        address resourcesOwner,\\r\\n        address settlementAddress,\\r\\n        string[] memory unitNames,\\r\\n        uint256[] memory unitsCounts,\\r\\n        uint256[] memory maxWeaponsToSell\\r\\n    ) external;\\r\\n\\r\\n    /// @notice Summons cultists if conditions are met\\r\\n    /// @dev Anyone can call this function\\r\\n    function summonCultists() external;\\r\\n\\r\\n    /// @notice Increases toxicity relative to specified resources amount\\r\\n    /// @dev Even though function is opened, it can only be called by world asset\\r\\n    /// @param settlementAddress An address of the settlement which triggered toxicity increase\\r\\n    /// @param resourceName Resource name\\r\\n    /// @param value Amount of resource\\r\\n    function increaseToxicity(\\r\\n        address settlementAddress,\\r\\n        string memory resourceName,\\r\\n        uint256 value\\r\\n    ) external;\\r\\n\\r\\n    /// @notice Decreases toxicity relative to specified resources amount\\r\\n    /// @dev Even though function is opened, it can only be called by world asset\\r\\n    /// @param settlementAddress An address of the settlement which triggered toxicity decrease\\r\\n    /// @param resourceName Resource name\\r\\n    /// @param value Amount of resource\\r\\n    function decreaseToxicity(\\r\\n        address settlementAddress,\\r\\n        string memory resourceName,\\r\\n        uint256 value\\r\\n    ) external;\\r\\n\\r\\n    /// @notice Zone cultists summon handler\\r\\n    /// @dev Even though function is opened, it can only be called by world asset\\r\\n    /// @param cultistsArmyAddress Cultists army address\\r\\n    /// @param value Amount of cultists minted\\r\\n    function handleCultistsSummoned(\\r\\n        address cultistsArmyAddress,\\r\\n        uint256 value\\r\\n    ) external;\\r\\n\\r\\n    /// @notice Zone cultists defeat handler\\r\\n    /// @dev Even though function is opened, it can only be called by world asset\\r\\n    /// @param cultistsArmyAddress Cultists army address\\r\\n    /// @param value Amount of cultists burned\\r\\n    function handleCultistsDefeated(\\r\\n        address cultistsArmyAddress,\\r\\n        uint256 value\\r\\n    ) external;\\r\\n\\r\\n    /// @notice Calculates penalty according to current cultists count\\r\\n    /// @dev Uses unit.balanceOf to determine penalty\\r\\n    /// @return penalty Penalty from cultists\\r\\n    function getPenaltyFromCultists() external view returns (uint256 penalty);\\r\\n\\r\\n    /// @notice Updates zone state\\r\\n    /// @dev This function is called every time when production should be modified\\r\\n    function updateState() external;\\r\\n\\r\\n    /// @notice Calculates zone time with provided timestamp\\r\\n    /// @dev Takes into an account previous value and current cultists penalty and extrapolates to value at provided timestamp\\r\\n    /// @param timestamp Timestamp\\r\\n    /// @return zoneTime Extrapolated zone time\\r\\n    function getZoneTime(uint256 timestamp) external view returns (uint256 zoneTime);\\r\\n}\\r\\n\",\"keccak256\":\"0xb7af393852c7ad1ac95e0d1cf9e07113bfa88c18ba95daa526e32bc0582b2169\",\"license\":\"MIT\"},\"contracts/core/crossEpochsMemory/ICrossEpochsMemory.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\r\\npragma solidity ^0.8.13;\\r\\n\\r\\nimport \\\"../assets/settlement/ISettlement.sol\\\";\\r\\n\\r\\n/// @title Cross epoch memory interface\\r\\n/// @notice Functions to read state/modify state in order to get cross epoch memory parameters and/or interact with it\\r\\ninterface ICrossEpochsMemory {\\r\\n    // State variables\\r\\n\\r\\n    /// @notice Mapping containing settlement by provided x and y coordinates\\r\\n    /// @dev Updated when #handleNewSettlement is called\\r\\n    function settlements(uint32 position) external view returns (ISettlement);\\r\\n\\r\\n    /// @notice Mapping containing settlement address by provided banner id\\r\\n    /// @dev Updated when #handleNewUserSettlement or #handleSettlementRestored is called\\r\\n    function userSettlements(uint256 val) external view returns (ISettlement);\\r\\n\\r\\n    /// @notice Mapping containing count of user settlement by provided zone id\\r\\n    /// @dev Updated when #handleNewUserSettlement is called\\r\\n    function zoneUserSettlementsCount(uint256 zoneId) external view returns (uint256);\\r\\n\\r\\n    /// @notice Mapping containing settlement last price by provided zone index\\r\\n    /// @dev Updated when #handleNewUserSettlement is called\\r\\n    function zoneSettlementLastPrice(uint256 zoneId) external view returns (uint256);\\r\\n\\r\\n    /// @notice Mapping containing settlement last purchase time by provided zone index\\r\\n    /// @dev Updated when #handleNewUserSettlement is called\\r\\n    function zoneSettlementLastPurchaseTime(uint256 zoneId) external view returns (uint256);\\r\\n\\r\\n    // Functions\\r\\n\\r\\n    /// @notice Proxy initializer\\r\\n    /// @dev Called by address which created current instance\\r\\n    /// @param worldAddress World address\\r\\n    function init(address worldAddress) external;\\r\\n\\r\\n    /// @notice Settlement restoration handler\\r\\n    /// @dev Must be called by active epoch to proper persist cross epoch data\\r\\n    /// @param position Position at which restoration occurred\\r\\n    /// @param settlementAddress New settlement address\\r\\n    function handleUserSettlementRestored(\\r\\n        uint32 position,\\r\\n        address settlementAddress\\r\\n    ) external;\\r\\n\\r\\n    /// @notice New user settlement handler\\r\\n    /// @dev Must be called by active epoch to proper persist cross epoch data\\r\\n    /// @param ownerTokenId Banners token id which will represent to which settlement will be attached to\\r\\n    /// @param zoneId Zone id\\r\\n    /// @param settlementAddress New settlement address\\r\\n    /// @param settlementPrice Settlement price\\r\\n    /// @param settlementPurchaseTime Settlement purchase time\\r\\n    function handleNewUserSettlement(\\r\\n        uint256 ownerTokenId,\\r\\n        uint16 zoneId,\\r\\n        address settlementAddress,\\r\\n        uint256 settlementPrice,\\r\\n        uint256 settlementPurchaseTime\\r\\n    ) external;\\r\\n\\r\\n    /// @notice New user settlement handler (including system ones, like CULTISTS)\\r\\n    /// @dev Must be called by active epoch to proper persist cross epoch data\\r\\n    /// @param position Position\\r\\n    /// @param settlementAddress New settlement address\\r\\n    function handleNewSettlement(\\r\\n        uint32 position,\\r\\n        address settlementAddress\\r\\n    ) external;\\r\\n}\\r\\n\",\"keccak256\":\"0x89cd4488671707e4efb8500477ac4b95434e5f04229245e575fd4de240de817a\",\"license\":\"MIT\"},\"contracts/core/distributions/IDistributions.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\r\\npragma solidity ^0.8.13;\\r\\n\\r\\nimport \\\"@openzeppelin/contracts/token/ERC1155/ERC1155.sol\\\";\\r\\nimport \\\"../IWorld.sol\\\";\\r\\n\\r\\ninterface IDistributions is IERC1155 {\\r\\n    // State variables\\r\\n\\r\\n    /// @notice World\\r\\n    /// @dev Immutable, initialized on creation\\r\\n    function world() external view returns (IWorld);\\r\\n\\r\\n    /// @notice Mapping containing distribution id to assigned building address\\r\\n    /// @dev Updated when #mint is called\\r\\n    function distributionIdToBuildingAddress(uint256 distributionId) external view returns (address);\\r\\n\\r\\n    /// @notice Last nft token id\\r\\n    /// @dev Updated when #mint is called\\r\\n    function lastDistributionId() external view returns (uint256);\\r\\n\\r\\n    // Functions\\r\\n\\r\\n    /// @notice Returns set of receivers as an array\\r\\n    /// @dev\\r\\n    /// @param distributionId Distribution id\\r\\n    /// @return receivers An array of receivers\\r\\n    function getDistributionReceivers(uint256 distributionId) external view returns (address[] memory receivers);\\r\\n\\r\\n    /// @notice Mints new distribution Nft to specified address\\r\\n    /// @dev Can be called only by world asset from active epoch\\r\\n    /// @param to An address which will receive new nft\\r\\n    /// @return newDistributionId Newly minted distribution id\\r\\n    function mint(address to) external returns (uint256 newDistributionId);\\r\\n\\r\\n    /// @notice Returns items per nft\\r\\n    /// @dev Used to determine percent holdings\\r\\n    /// @return itemsPerNft Items per nft\\r\\n    function getItemsPerNft() external pure returns (uint256 itemsPerNft);\\r\\n}\\r\\n\",\"keccak256\":\"0x2e09183b58508f680ed80261d59e52a3b4a381344b993d4e558a3f7241f09874\",\"license\":\"MIT\"},\"contracts/core/geography/IGeography.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\r\\npragma solidity ^0.8.13;\\r\\n\\r\\nimport \\\"../assets/settlement/ISettlement.sol\\\";\\r\\n\\r\\ninterface IGeography {\\r\\n    enum TileBonusType {\\r\\n        NO_BONUS, //0\\r\\n        ADVANCED_PRODUCTION //1\\r\\n    }\\r\\n\\r\\n    struct ZoneActivationParams {\\r\\n        uint32 cultistsPosition;\\r\\n    }\\r\\n\\r\\n    struct TileBonus {\\r\\n        TileBonusType tileBonusType;\\r\\n        uint8 tileBonusVariation;\\r\\n    }\\r\\n\\r\\n    /// @notice Emitted when #createZone is called\\r\\n    /// @param zoneId Zone id\\r\\n    /// @param positions Positions\\r\\n    /// @param cultistsPosition Cultists position\\r\\n    /// @param tileBonuses tile bonuses\\r\\n    event NewZoneCreated(\\r\\n        uint16 zoneId,\\r\\n        uint32[] positions,\\r\\n        uint32 cultistsPosition,\\r\\n        TileBonus[] tileBonuses\\r\\n    );\\r\\n\\r\\n    // State variables\\r\\n\\r\\n\\r\\n\\r\\n    // Functions\\r\\n\\r\\n    /// @notice Proxy initializer\\r\\n    /// @dev Called by address which created current instance\\r\\n    /// @param worldAddress World address\\r\\n    function init(address worldAddress) external;\\r\\n\\r\\n    /// @notice Returns created zones count\\r\\n    /// @dev Updated when #createZone is called\\r\\n    /// @return zonesCount Zones count\\r\\n    function getZonesCount() external view returns (uint256 zonesCount);\\r\\n\\r\\n    /// @notice Validates provided path\\r\\n    /// @dev Useful for determining positions path according to current hex grid\\r\\n    /// @param path Path\\r\\n    /// @return isValid Is path valid\\r\\n    function isPathValid(uint32[] memory path) external view returns (bool isValid);\\r\\n\\r\\n    /// @notice Calculates if provided position are neighbor to other position\\r\\n    /// @param position Provided position\\r\\n    /// @param neighbor Other position\\r\\n    /// @param isNeighbor Is other position neighbor to provided position\\r\\n    function isNeighborTo(uint32 position, uint32 neighbor) external pure returns (bool isNeighbor);\\r\\n\\r\\n    /// @notice Returns zone id by position\\r\\n    /// @param position Provided position\\r\\n    /// @return zoneId Zone id\\r\\n    function getZoneIdByPosition(uint32 position) external view returns (uint16 zoneId);\\r\\n\\r\\n    /// @notice Calculates all ring positions by provided position and radius\\r\\n    /// @param position Position\\r\\n    /// @param radius Ring radius\\r\\n    /// @return ringPositions Ring positions\\r\\n    /// @return ringPositionsLength Ring positions length (array is initialized 6 * radius, however not all values should be used)\\r\\n    function getRingPositions(uint32 position, uint256 radius) external pure returns (uint32[] memory ringPositions, uint256 ringPositionsLength);\\r\\n\\r\\n    /// @notice Creates zone with provided positions and tile types\\r\\n    /// @dev Even though function is opened, it can be called only by mightyCreator\\r\\n    /// @param positions Zone positions\\r\\n    /// @param cultistsCoordinateIndex Coordinate index inside 'positions', where cultists will be placed\\r\\n    /// @param tileBonuses Zone tile bonuses\\r\\n    function createZone(\\r\\n        uint32[] memory positions,\\r\\n        uint256 cultistsCoordinateIndex,\\r\\n        TileBonus[] memory tileBonuses\\r\\n    ) external;\\r\\n\\r\\n    /// @notice Returns zone activation params for provided zone id\\r\\n    /// @dev New values are accessible when #createZone is called\\r\\n    /// @param zoneId Zone id\\r\\n    /// @return params Zone activation params struct\\r\\n    function getZoneActivationParams(uint16 zoneId) external view returns (ZoneActivationParams memory params);\\r\\n\\r\\n    /// @notice Returns tile bonus by provided position\\r\\n    /// @dev New values are accessible when #createZone is called\\r\\n    /// @param position Position\\r\\n    /// @return tileBonus Tile bonus struct\\r\\n    function getTileBonusByPosition(uint32 position) external view returns (TileBonus memory tileBonus);\\r\\n\\r\\n    /// @notice Calculates distance between positions\\r\\n    /// @param position1 First position\\r\\n    /// @param position2 Second position\\r\\n    /// @param distance Distance\\r\\n    function getDistanceBetweenPositions(uint32 position1, uint32 position2) external pure returns (uint32 distance);\\r\\n}\\r\\n\",\"keccak256\":\"0x58a329ee407262e0172334ef727fef37a7937cbb57116535e80df7556d823b64\",\"license\":\"MIT\"},\"contracts/core/rewardPool/IRewardPool.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\r\\npragma solidity ^0.8.13;\\r\\n\\r\\ninterface IRewardPool {\\r\\n    // State variables\\r\\n\\r\\n    /// @notice Represents how much of weapons must be given for one unit of token\\r\\n    /// @dev Updated when #handleEpochDestroyed is called\\r\\n    function ratio() external view returns (int256);\\r\\n\\r\\n    /// @notice Represents how much bless tokens must be repaid first to the mighty creator\\r\\n    /// @dev Updated when #investIntoPrizePool is called\\r\\n    function invested() external view returns (uint256);\\r\\n\\r\\n    /// @notice Represents last reward pool total balance after repayment and function(s) are done\\r\\n    /// @dev Updated when #investIntoPrizePool or #handleEpochDestroyed or #swapWeaponsForTokens or #withdrawRepayment are called\\r\\n    function lastBalance() external view returns (uint256);\\r\\n\\r\\n    // Functions\\r\\n\\r\\n    /// @notice Proxy initializer\\r\\n    /// @dev Called by address which created current instance\\r\\n    /// @param worldAddress World address\\r\\n    function init(address worldAddress) external;\\r\\n\\r\\n    /// @notice Handler of epoch destruction\\r\\n    /// @dev Must be called when epoch is destroyed\\r\\n    function handleEpochDestroyed() external;\\r\\n\\r\\n    /// @notice Swap provided amount of weapons\\r\\n    /// @dev If resourcesOwner == address(0) -> resources will be taken from msg.sender\\r\\n    /// @dev If resourcesOwner != address(0) and resourcesOwner has given allowance to msg.sender >= weaponsAmount -> resources will be taken from resourcesOwner\\r\\n    /// @param resourcesOwner Resources owner\\r\\n    /// @param weaponsAmount Amount of weapons to swap\\r\\n    function swapWeaponsForTokens(\\r\\n        address resourcesOwner,\\r\\n        uint256 weaponsAmount\\r\\n    ) external;\\r\\n\\r\\n    /// @notice Invests specified amount of tokens into prize pool\\r\\n    /// @dev Bless tokens must be sent to this function (if its type=eth) or will be deducted from msg.sender (if its type=erc20)\\r\\n    /// @param amountToInvest Amount of tokens to invest\\r\\n    function investIntoPrizePool(uint256 amountToInvest) external payable;\\r\\n\\r\\n    /// @notice Withdraws potential bless token added balance to the mighty creator\\r\\n    /// @dev Triggers withdraw of potential added balance\\r\\n    function withdrawRepayment() external;\\r\\n}\\r\\n\",\"keccak256\":\"0x9532c271b7f8c8bbfe4ba8e269ce4ca950b1785481791dddd41b880d4b62afc5\",\"license\":\"MIT\"},\"contracts/libraries/ABDKMath64x64.sol\":{\"content\":\"pragma solidity ^0.8.0;\\r\\n\\r\\n/**\\r\\n * Smart contract library of mathematical functions operating with signed\\r\\n * 64.64-bit fixed point numbers.  Signed 64.64-bit fixed point number is\\r\\n * basically a simple fraction whose numerator is signed 128-bit integer and\\r\\n * denominator is 2^64.  As long as denominator is always the same, there is no\\r\\n * need to store it, thus in Solidity signed 64.64-bit fixed point numbers are\\r\\n * represented by int128 type holding only the numerator.\\r\\n */\\r\\nlibrary ABDKMath64x64 {\\r\\n    /*\\r\\n     * Minimum value signed 64.64-bit fixed point number may have.\\r\\n     */\\r\\n    int128 private constant MIN_64x64 = -0x80000000000000000000000000000000;\\r\\n\\r\\n    /*\\r\\n     * Maximum value signed 64.64-bit fixed point number may have.\\r\\n     */\\r\\n    int128 private constant MAX_64x64 = 0x7FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF;\\r\\n\\r\\n    /**\\r\\n     * Convert signed 256-bit integer number into signed 64.64-bit fixed point\\r\\n     * number.  Revert on overflow.\\r\\n     *\\r\\n     * @param x signed 256-bit integer number\\r\\n   * @return signed 64.64-bit fixed point number\\r\\n   */\\r\\n    function fromInt (int256 x) internal pure returns (int128) {\\r\\n    unchecked {\\r\\n        require (x >= -0x8000000000000000 && x <= 0x7FFFFFFFFFFFFFFF);\\r\\n        return int128 (x << 64);\\r\\n    }\\r\\n    }\\r\\n\\r\\n    /**\\r\\n     * Convert signed 64.64 fixed point number into signed 64-bit integer number\\r\\n     * rounding down.\\r\\n     *\\r\\n     * @param x signed 64.64-bit fixed point number\\r\\n   * @return signed 64-bit integer number\\r\\n   */\\r\\n    function toInt (int128 x) internal pure returns (int64) {\\r\\n    unchecked {\\r\\n        return int64 (x >> 64);\\r\\n    }\\r\\n    }\\r\\n\\r\\n    /**\\r\\n     * Convert unsigned 256-bit integer number into signed 64.64-bit fixed point\\r\\n     * number.  Revert on overflow.\\r\\n     *\\r\\n     * @param x unsigned 256-bit integer number\\r\\n   * @return signed 64.64-bit fixed point number\\r\\n   */\\r\\n    function fromUInt (uint256 x) internal pure returns (int128) {\\r\\n    unchecked {\\r\\n        require (x <= 0x7FFFFFFFFFFFFFFF);\\r\\n        return int128 (int256 (x << 64));\\r\\n    }\\r\\n    }\\r\\n\\r\\n    /**\\r\\n     * Convert signed 64.64 fixed point number into unsigned 64-bit integer\\r\\n     * number rounding down.  Revert on underflow.\\r\\n     *\\r\\n     * @param x signed 64.64-bit fixed point number\\r\\n   * @return unsigned 64-bit integer number\\r\\n   */\\r\\n    function toUInt (int128 x) internal pure returns (uint64) {\\r\\n    unchecked {\\r\\n        require (x >= 0);\\r\\n        return uint64 (uint128 (x >> 64));\\r\\n    }\\r\\n    }\\r\\n\\r\\n    /**\\r\\n     * Convert signed 128.128 fixed point number into signed 64.64-bit fixed point\\r\\n     * number rounding down.  Revert on overflow.\\r\\n     *\\r\\n     * @param x signed 128.128-bin fixed point number\\r\\n   * @return signed 64.64-bit fixed point number\\r\\n   */\\r\\n    function from128x128 (int256 x) internal pure returns (int128) {\\r\\n    unchecked {\\r\\n        int256 result = x >> 64;\\r\\n        require (result >= MIN_64x64 && result <= MAX_64x64);\\r\\n        return int128 (result);\\r\\n    }\\r\\n    }\\r\\n\\r\\n    /**\\r\\n     * Convert signed 64.64 fixed point number into signed 128.128 fixed point\\r\\n     * number.\\r\\n     *\\r\\n     * @param x signed 64.64-bit fixed point number\\r\\n   * @return signed 128.128 fixed point number\\r\\n   */\\r\\n    function to128x128 (int128 x) internal pure returns (int256) {\\r\\n    unchecked {\\r\\n        return int256 (x) << 64;\\r\\n    }\\r\\n    }\\r\\n\\r\\n    /**\\r\\n     * Calculate x + y.  Revert on overflow.\\r\\n     *\\r\\n     * @param x signed 64.64-bit fixed point number\\r\\n   * @param y signed 64.64-bit fixed point number\\r\\n   * @return signed 64.64-bit fixed point number\\r\\n   */\\r\\n    function add (int128 x, int128 y) internal pure returns (int128) {\\r\\n    unchecked {\\r\\n        int256 result = int256(x) + y;\\r\\n        require (result >= MIN_64x64 && result <= MAX_64x64);\\r\\n        return int128 (result);\\r\\n    }\\r\\n    }\\r\\n\\r\\n    /**\\r\\n     * Calculate x - y.  Revert on overflow.\\r\\n     *\\r\\n     * @param x signed 64.64-bit fixed point number\\r\\n   * @param y signed 64.64-bit fixed point number\\r\\n   * @return signed 64.64-bit fixed point number\\r\\n   */\\r\\n    function sub (int128 x, int128 y) internal pure returns (int128) {\\r\\n    unchecked {\\r\\n        int256 result = int256(x) - y;\\r\\n        require (result >= MIN_64x64 && result <= MAX_64x64);\\r\\n        return int128 (result);\\r\\n    }\\r\\n    }\\r\\n\\r\\n    /**\\r\\n     * Calculate x * y rounding down.  Revert on overflow.\\r\\n     *\\r\\n     * @param x signed 64.64-bit fixed point number\\r\\n   * @param y signed 64.64-bit fixed point number\\r\\n   * @return signed 64.64-bit fixed point number\\r\\n   */\\r\\n    function mul (int128 x, int128 y) internal pure returns (int128) {\\r\\n    unchecked {\\r\\n        int256 result = int256(x) * y >> 64;\\r\\n        require (result >= MIN_64x64 && result <= MAX_64x64);\\r\\n        return int128 (result);\\r\\n    }\\r\\n    }\\r\\n\\r\\n    /**\\r\\n     * Calculate x * y rounding towards zero, where x is signed 64.64 fixed point\\r\\n     * number and y is signed 256-bit integer number.  Revert on overflow.\\r\\n     *\\r\\n     * @param x signed 64.64 fixed point number\\r\\n   * @param y signed 256-bit integer number\\r\\n   * @return signed 256-bit integer number\\r\\n   */\\r\\n    function muli (int128 x, int256 y) internal pure returns (int256) {\\r\\n    unchecked {\\r\\n        if (x == MIN_64x64) {\\r\\n            require (y >= -0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF &&\\r\\n            y <= 0x1000000000000000000000000000000000000000000000000);\\r\\n            return -y << 63;\\r\\n        } else {\\r\\n            bool negativeResult = false;\\r\\n            if (x < 0) {\\r\\n                x = -x;\\r\\n                negativeResult = true;\\r\\n            }\\r\\n            if (y < 0) {\\r\\n                y = -y; // We rely on overflow behavior here\\r\\n                negativeResult = !negativeResult;\\r\\n            }\\r\\n            uint256 absoluteResult = mulu (x, uint256 (y));\\r\\n            if (negativeResult) {\\r\\n                require (absoluteResult <=\\r\\n                    0x8000000000000000000000000000000000000000000000000000000000000000);\\r\\n                return -int256 (absoluteResult); // We rely on overflow behavior here\\r\\n            } else {\\r\\n                require (absoluteResult <=\\r\\n                    0x7FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF);\\r\\n                return int256 (absoluteResult);\\r\\n            }\\r\\n        }\\r\\n    }\\r\\n    }\\r\\n\\r\\n    /**\\r\\n     * Calculate x * y rounding down, where x is signed 64.64 fixed point number\\r\\n     * and y is unsigned 256-bit integer number.  Revert on overflow.\\r\\n     *\\r\\n     * @param x signed 64.64 fixed point number\\r\\n   * @param y unsigned 256-bit integer number\\r\\n   * @return unsigned 256-bit integer number\\r\\n   */\\r\\n    function mulu (int128 x, uint256 y) internal pure returns (uint256) {\\r\\n    unchecked {\\r\\n        if (y == 0) return 0;\\r\\n\\r\\n        require (x >= 0);\\r\\n\\r\\n        uint256 lo = (uint256 (int256 (x)) * (y & 0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF)) >> 64;\\r\\n        uint256 hi = uint256 (int256 (x)) * (y >> 128);\\r\\n\\r\\n        require (hi <= 0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF);\\r\\n        hi <<= 64;\\r\\n\\r\\n        require (hi <=\\r\\n            0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF - lo);\\r\\n        return hi + lo;\\r\\n    }\\r\\n    }\\r\\n\\r\\n    /**\\r\\n     * Calculate x / y rounding towards zero.  Revert on overflow or when y is\\r\\n     * zero.\\r\\n     *\\r\\n     * @param x signed 64.64-bit fixed point number\\r\\n   * @param y signed 64.64-bit fixed point number\\r\\n   * @return signed 64.64-bit fixed point number\\r\\n   */\\r\\n    function div (int128 x, int128 y) internal pure returns (int128) {\\r\\n    unchecked {\\r\\n        require (y != 0);\\r\\n        int256 result = (int256 (x) << 64) / y;\\r\\n        require (result >= MIN_64x64 && result <= MAX_64x64);\\r\\n        return int128 (result);\\r\\n    }\\r\\n    }\\r\\n\\r\\n    /**\\r\\n     * Calculate x / y rounding towards zero, where x and y are signed 256-bit\\r\\n     * integer numbers.  Revert on overflow or when y is zero.\\r\\n     *\\r\\n     * @param x signed 256-bit integer number\\r\\n   * @param y signed 256-bit integer number\\r\\n   * @return signed 64.64-bit fixed point number\\r\\n   */\\r\\n    function divi (int256 x, int256 y) internal pure returns (int128) {\\r\\n    unchecked {\\r\\n        require (y != 0);\\r\\n\\r\\n        bool negativeResult = false;\\r\\n        if (x < 0) {\\r\\n            x = -x; // We rely on overflow behavior here\\r\\n            negativeResult = true;\\r\\n        }\\r\\n        if (y < 0) {\\r\\n            y = -y; // We rely on overflow behavior here\\r\\n            negativeResult = !negativeResult;\\r\\n        }\\r\\n        uint128 absoluteResult = divuu (uint256 (x), uint256 (y));\\r\\n        if (negativeResult) {\\r\\n            require (absoluteResult <= 0x80000000000000000000000000000000);\\r\\n            return -int128 (absoluteResult); // We rely on overflow behavior here\\r\\n        } else {\\r\\n            require (absoluteResult <= 0x7FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF);\\r\\n            return int128 (absoluteResult); // We rely on overflow behavior here\\r\\n        }\\r\\n    }\\r\\n    }\\r\\n\\r\\n    /**\\r\\n     * Calculate x / y rounding towards zero, where x and y are unsigned 256-bit\\r\\n     * integer numbers.  Revert on overflow or when y is zero.\\r\\n     *\\r\\n     * @param x unsigned 256-bit integer number\\r\\n   * @param y unsigned 256-bit integer number\\r\\n   * @return signed 64.64-bit fixed point number\\r\\n   */\\r\\n    function divu (uint256 x, uint256 y) internal pure returns (int128) {\\r\\n    unchecked {\\r\\n        require (y != 0);\\r\\n        uint128 result = divuu (x, y);\\r\\n        require (result <= uint128 (MAX_64x64));\\r\\n        return int128 (result);\\r\\n    }\\r\\n    }\\r\\n\\r\\n    /**\\r\\n     * Calculate -x.  Revert on overflow.\\r\\n     *\\r\\n     * @param x signed 64.64-bit fixed point number\\r\\n   * @return signed 64.64-bit fixed point number\\r\\n   */\\r\\n    function neg (int128 x) internal pure returns (int128) {\\r\\n    unchecked {\\r\\n        require (x != MIN_64x64);\\r\\n        return -x;\\r\\n    }\\r\\n    }\\r\\n\\r\\n    /**\\r\\n     * Calculate |x|.  Revert on overflow.\\r\\n     *\\r\\n     * @param x signed 64.64-bit fixed point number\\r\\n   * @return signed 64.64-bit fixed point number\\r\\n   */\\r\\n    function abs (int128 x) internal pure returns (int128) {\\r\\n    unchecked {\\r\\n        require (x != MIN_64x64);\\r\\n        return x < 0 ? -x : x;\\r\\n    }\\r\\n    }\\r\\n\\r\\n    /**\\r\\n     * Calculate 1 / x rounding towards zero.  Revert on overflow or when x is\\r\\n     * zero.\\r\\n     *\\r\\n     * @param x signed 64.64-bit fixed point number\\r\\n   * @return signed 64.64-bit fixed point number\\r\\n   */\\r\\n    function inv (int128 x) internal pure returns (int128) {\\r\\n    unchecked {\\r\\n        require (x != 0);\\r\\n        int256 result = int256 (0x100000000000000000000000000000000) / x;\\r\\n        require (result >= MIN_64x64 && result <= MAX_64x64);\\r\\n        return int128 (result);\\r\\n    }\\r\\n    }\\r\\n\\r\\n    /**\\r\\n     * Calculate arithmetics average of x and y, i.e. (x + y) / 2 rounding down.\\r\\n     *\\r\\n     * @param x signed 64.64-bit fixed point number\\r\\n   * @param y signed 64.64-bit fixed point number\\r\\n   * @return signed 64.64-bit fixed point number\\r\\n   */\\r\\n    function avg (int128 x, int128 y) internal pure returns (int128) {\\r\\n    unchecked {\\r\\n        return int128 ((int256 (x) + int256 (y)) >> 1);\\r\\n    }\\r\\n    }\\r\\n\\r\\n    /**\\r\\n     * Calculate geometric average of x and y, i.e. sqrt (x * y) rounding down.\\r\\n     * Revert on overflow or in case x * y is negative.\\r\\n     *\\r\\n     * @param x signed 64.64-bit fixed point number\\r\\n   * @param y signed 64.64-bit fixed point number\\r\\n   * @return signed 64.64-bit fixed point number\\r\\n   */\\r\\n    function gavg (int128 x, int128 y) internal pure returns (int128) {\\r\\n    unchecked {\\r\\n        int256 m = int256 (x) * int256 (y);\\r\\n        require (m >= 0);\\r\\n        require (m <\\r\\n            0x4000000000000000000000000000000000000000000000000000000000000000);\\r\\n        return int128 (sqrtu (uint256 (m)));\\r\\n    }\\r\\n    }\\r\\n\\r\\n    /**\\r\\n     * Calculate x^y assuming 0^0 is 1, where x is signed 64.64 fixed point number\\r\\n     * and y is unsigned 256-bit integer number.  Revert on overflow.\\r\\n     *\\r\\n     * @param x signed 64.64-bit fixed point number\\r\\n   * @param y uint256 value\\r\\n   * @return signed 64.64-bit fixed point number\\r\\n   */\\r\\n    function pow (int128 x, uint256 y) internal pure returns (int128) {\\r\\n    unchecked {\\r\\n        bool negative = x < 0 && y & 1 == 1;\\r\\n\\r\\n        uint256 absX = uint128 (x < 0 ? -x : x);\\r\\n        uint256 absResult;\\r\\n        absResult = 0x100000000000000000000000000000000;\\r\\n\\r\\n        if (absX <= 0x10000000000000000) {\\r\\n            absX <<= 63;\\r\\n            while (y != 0) {\\r\\n                if (y & 0x1 != 0) {\\r\\n                    absResult = absResult * absX >> 127;\\r\\n                }\\r\\n                absX = absX * absX >> 127;\\r\\n\\r\\n                if (y & 0x2 != 0) {\\r\\n                    absResult = absResult * absX >> 127;\\r\\n                }\\r\\n                absX = absX * absX >> 127;\\r\\n\\r\\n                if (y & 0x4 != 0) {\\r\\n                    absResult = absResult * absX >> 127;\\r\\n                }\\r\\n                absX = absX * absX >> 127;\\r\\n\\r\\n                if (y & 0x8 != 0) {\\r\\n                    absResult = absResult * absX >> 127;\\r\\n                }\\r\\n                absX = absX * absX >> 127;\\r\\n\\r\\n                y >>= 4;\\r\\n            }\\r\\n\\r\\n            absResult >>= 64;\\r\\n        } else {\\r\\n            uint256 absXShift = 63;\\r\\n            if (absX < 0x1000000000000000000000000) { absX <<= 32; absXShift -= 32; }\\r\\n            if (absX < 0x10000000000000000000000000000) { absX <<= 16; absXShift -= 16; }\\r\\n            if (absX < 0x1000000000000000000000000000000) { absX <<= 8; absXShift -= 8; }\\r\\n            if (absX < 0x10000000000000000000000000000000) { absX <<= 4; absXShift -= 4; }\\r\\n            if (absX < 0x40000000000000000000000000000000) { absX <<= 2; absXShift -= 2; }\\r\\n            if (absX < 0x80000000000000000000000000000000) { absX <<= 1; absXShift -= 1; }\\r\\n\\r\\n            uint256 resultShift = 0;\\r\\n            while (y != 0) {\\r\\n                require (absXShift < 64);\\r\\n\\r\\n                if (y & 0x1 != 0) {\\r\\n                    absResult = absResult * absX >> 127;\\r\\n                    resultShift += absXShift;\\r\\n                    if (absResult > 0x100000000000000000000000000000000) {\\r\\n                        absResult >>= 1;\\r\\n                        resultShift += 1;\\r\\n                    }\\r\\n                }\\r\\n                absX = absX * absX >> 127;\\r\\n                absXShift <<= 1;\\r\\n                if (absX >= 0x100000000000000000000000000000000) {\\r\\n                    absX >>= 1;\\r\\n                    absXShift += 1;\\r\\n                }\\r\\n\\r\\n                y >>= 1;\\r\\n            }\\r\\n\\r\\n            require (resultShift < 64);\\r\\n            absResult >>= 64 - resultShift;\\r\\n        }\\r\\n        int256 result = negative ? -int256 (absResult) : int256 (absResult);\\r\\n        require (result >= MIN_64x64 && result <= MAX_64x64);\\r\\n        return int128 (result);\\r\\n    }\\r\\n    }\\r\\n\\r\\n    /**\\r\\n     * Calculate sqrt (x) rounding down.  Revert if x < 0.\\r\\n     *\\r\\n     * @param x signed 64.64-bit fixed point number\\r\\n   * @return signed 64.64-bit fixed point number\\r\\n   */\\r\\n    function sqrt (int128 x) internal pure returns (int128) {\\r\\n    unchecked {\\r\\n        require (x >= 0);\\r\\n        return int128 (sqrtu (uint256 (int256 (x)) << 64));\\r\\n    }\\r\\n    }\\r\\n\\r\\n    /**\\r\\n     * Calculate binary logarithm of x.  Revert if x <= 0.\\r\\n     *\\r\\n     * @param x signed 64.64-bit fixed point number\\r\\n   * @return signed 64.64-bit fixed point number\\r\\n   */\\r\\n    function log_2 (int128 x) internal pure returns (int128) {\\r\\n    unchecked {\\r\\n        require (x > 0);\\r\\n\\r\\n        int256 msb = 0;\\r\\n        int256 xc = x;\\r\\n        if (xc >= 0x10000000000000000) { xc >>= 64; msb += 64; }\\r\\n        if (xc >= 0x100000000) { xc >>= 32; msb += 32; }\\r\\n        if (xc >= 0x10000) { xc >>= 16; msb += 16; }\\r\\n        if (xc >= 0x100) { xc >>= 8; msb += 8; }\\r\\n        if (xc >= 0x10) { xc >>= 4; msb += 4; }\\r\\n        if (xc >= 0x4) { xc >>= 2; msb += 2; }\\r\\n        if (xc >= 0x2) msb += 1;  // No need to shift xc anymore\\r\\n\\r\\n        int256 result = msb - 64 << 64;\\r\\n        uint256 ux = uint256 (int256 (x)) << uint256 (127 - msb);\\r\\n        for (int256 bit = 0x8000000000000000; bit > 0; bit >>= 1) {\\r\\n            ux *= ux;\\r\\n            uint256 b = ux >> 255;\\r\\n            ux >>= 127 + b;\\r\\n            result += bit * int256 (b);\\r\\n        }\\r\\n\\r\\n        return int128 (result);\\r\\n    }\\r\\n    }\\r\\n\\r\\n    /**\\r\\n     * Calculate natural logarithm of x.  Revert if x <= 0.\\r\\n     *\\r\\n     * @param x signed 64.64-bit fixed point number\\r\\n   * @return signed 64.64-bit fixed point number\\r\\n   */\\r\\n    function ln (int128 x) internal pure returns (int128) {\\r\\n    unchecked {\\r\\n        require (x > 0);\\r\\n\\r\\n        return int128 (int256 (\\r\\n                uint256 (int256 (log_2 (x))) * 0xB17217F7D1CF79ABC9E3B39803F2F6AF >> 128));\\r\\n    }\\r\\n    }\\r\\n\\r\\n    /**\\r\\n     * Calculate binary exponent of x.  Revert on overflow.\\r\\n     *\\r\\n     * @param x signed 64.64-bit fixed point number\\r\\n   * @return signed 64.64-bit fixed point number\\r\\n   */\\r\\n    function exp_2 (int128 x) internal pure returns (int128) {\\r\\n    unchecked {\\r\\n        require (x < 0x400000000000000000); // Overflow\\r\\n\\r\\n        if (x < -0x400000000000000000) return 0; // Underflow\\r\\n\\r\\n        uint256 result = 0x80000000000000000000000000000000;\\r\\n\\r\\n        if (x & 0x8000000000000000 > 0)\\r\\n            result = result * 0x16A09E667F3BCC908B2FB1366EA957D3E >> 128;\\r\\n        if (x & 0x4000000000000000 > 0)\\r\\n            result = result * 0x1306FE0A31B7152DE8D5A46305C85EDEC >> 128;\\r\\n        if (x & 0x2000000000000000 > 0)\\r\\n            result = result * 0x1172B83C7D517ADCDF7C8C50EB14A791F >> 128;\\r\\n        if (x & 0x1000000000000000 > 0)\\r\\n            result = result * 0x10B5586CF9890F6298B92B71842A98363 >> 128;\\r\\n        if (x & 0x800000000000000 > 0)\\r\\n            result = result * 0x1059B0D31585743AE7C548EB68CA417FD >> 128;\\r\\n        if (x & 0x400000000000000 > 0)\\r\\n            result = result * 0x102C9A3E778060EE6F7CACA4F7A29BDE8 >> 128;\\r\\n        if (x & 0x200000000000000 > 0)\\r\\n            result = result * 0x10163DA9FB33356D84A66AE336DCDFA3F >> 128;\\r\\n        if (x & 0x100000000000000 > 0)\\r\\n            result = result * 0x100B1AFA5ABCBED6129AB13EC11DC9543 >> 128;\\r\\n        if (x & 0x80000000000000 > 0)\\r\\n            result = result * 0x10058C86DA1C09EA1FF19D294CF2F679B >> 128;\\r\\n        if (x & 0x40000000000000 > 0)\\r\\n            result = result * 0x1002C605E2E8CEC506D21BFC89A23A00F >> 128;\\r\\n        if (x & 0x20000000000000 > 0)\\r\\n            result = result * 0x100162F3904051FA128BCA9C55C31E5DF >> 128;\\r\\n        if (x & 0x10000000000000 > 0)\\r\\n            result = result * 0x1000B175EFFDC76BA38E31671CA939725 >> 128;\\r\\n        if (x & 0x8000000000000 > 0)\\r\\n            result = result * 0x100058BA01FB9F96D6CACD4B180917C3D >> 128;\\r\\n        if (x & 0x4000000000000 > 0)\\r\\n            result = result * 0x10002C5CC37DA9491D0985C348C68E7B3 >> 128;\\r\\n        if (x & 0x2000000000000 > 0)\\r\\n            result = result * 0x1000162E525EE054754457D5995292026 >> 128;\\r\\n        if (x & 0x1000000000000 > 0)\\r\\n            result = result * 0x10000B17255775C040618BF4A4ADE83FC >> 128;\\r\\n        if (x & 0x800000000000 > 0)\\r\\n            result = result * 0x1000058B91B5BC9AE2EED81E9B7D4CFAB >> 128;\\r\\n        if (x & 0x400000000000 > 0)\\r\\n            result = result * 0x100002C5C89D5EC6CA4D7C8ACC017B7C9 >> 128;\\r\\n        if (x & 0x200000000000 > 0)\\r\\n            result = result * 0x10000162E43F4F831060E02D839A9D16D >> 128;\\r\\n        if (x & 0x100000000000 > 0)\\r\\n            result = result * 0x100000B1721BCFC99D9F890EA06911763 >> 128;\\r\\n        if (x & 0x80000000000 > 0)\\r\\n            result = result * 0x10000058B90CF1E6D97F9CA14DBCC1628 >> 128;\\r\\n        if (x & 0x40000000000 > 0)\\r\\n            result = result * 0x1000002C5C863B73F016468F6BAC5CA2B >> 128;\\r\\n        if (x & 0x20000000000 > 0)\\r\\n            result = result * 0x100000162E430E5A18F6119E3C02282A5 >> 128;\\r\\n        if (x & 0x10000000000 > 0)\\r\\n            result = result * 0x1000000B1721835514B86E6D96EFD1BFE >> 128;\\r\\n        if (x & 0x8000000000 > 0)\\r\\n            result = result * 0x100000058B90C0B48C6BE5DF846C5B2EF >> 128;\\r\\n        if (x & 0x4000000000 > 0)\\r\\n            result = result * 0x10000002C5C8601CC6B9E94213C72737A >> 128;\\r\\n        if (x & 0x2000000000 > 0)\\r\\n            result = result * 0x1000000162E42FFF037DF38AA2B219F06 >> 128;\\r\\n        if (x & 0x1000000000 > 0)\\r\\n            result = result * 0x10000000B17217FBA9C739AA5819F44F9 >> 128;\\r\\n        if (x & 0x800000000 > 0)\\r\\n            result = result * 0x1000000058B90BFCDEE5ACD3C1CEDC823 >> 128;\\r\\n        if (x & 0x400000000 > 0)\\r\\n            result = result * 0x100000002C5C85FE31F35A6A30DA1BE50 >> 128;\\r\\n        if (x & 0x200000000 > 0)\\r\\n            result = result * 0x10000000162E42FF0999CE3541B9FFFCF >> 128;\\r\\n        if (x & 0x100000000 > 0)\\r\\n            result = result * 0x100000000B17217F80F4EF5AADDA45554 >> 128;\\r\\n        if (x & 0x80000000 > 0)\\r\\n            result = result * 0x10000000058B90BFBF8479BD5A81B51AD >> 128;\\r\\n        if (x & 0x40000000 > 0)\\r\\n            result = result * 0x1000000002C5C85FDF84BD62AE30A74CC >> 128;\\r\\n        if (x & 0x20000000 > 0)\\r\\n            result = result * 0x100000000162E42FEFB2FED257559BDAA >> 128;\\r\\n        if (x & 0x10000000 > 0)\\r\\n            result = result * 0x1000000000B17217F7D5A7716BBA4A9AE >> 128;\\r\\n        if (x & 0x8000000 > 0)\\r\\n            result = result * 0x100000000058B90BFBE9DDBAC5E109CCE >> 128;\\r\\n        if (x & 0x4000000 > 0)\\r\\n            result = result * 0x10000000002C5C85FDF4B15DE6F17EB0D >> 128;\\r\\n        if (x & 0x2000000 > 0)\\r\\n            result = result * 0x1000000000162E42FEFA494F1478FDE05 >> 128;\\r\\n        if (x & 0x1000000 > 0)\\r\\n            result = result * 0x10000000000B17217F7D20CF927C8E94C >> 128;\\r\\n        if (x & 0x800000 > 0)\\r\\n            result = result * 0x1000000000058B90BFBE8F71CB4E4B33D >> 128;\\r\\n        if (x & 0x400000 > 0)\\r\\n            result = result * 0x100000000002C5C85FDF477B662B26945 >> 128;\\r\\n        if (x & 0x200000 > 0)\\r\\n            result = result * 0x10000000000162E42FEFA3AE53369388C >> 128;\\r\\n        if (x & 0x100000 > 0)\\r\\n            result = result * 0x100000000000B17217F7D1D351A389D40 >> 128;\\r\\n        if (x & 0x80000 > 0)\\r\\n            result = result * 0x10000000000058B90BFBE8E8B2D3D4EDE >> 128;\\r\\n        if (x & 0x40000 > 0)\\r\\n            result = result * 0x1000000000002C5C85FDF4741BEA6E77E >> 128;\\r\\n        if (x & 0x20000 > 0)\\r\\n            result = result * 0x100000000000162E42FEFA39FE95583C2 >> 128;\\r\\n        if (x & 0x10000 > 0)\\r\\n            result = result * 0x1000000000000B17217F7D1CFB72B45E1 >> 128;\\r\\n        if (x & 0x8000 > 0)\\r\\n            result = result * 0x100000000000058B90BFBE8E7CC35C3F0 >> 128;\\r\\n        if (x & 0x4000 > 0)\\r\\n            result = result * 0x10000000000002C5C85FDF473E242EA38 >> 128;\\r\\n        if (x & 0x2000 > 0)\\r\\n            result = result * 0x1000000000000162E42FEFA39F02B772C >> 128;\\r\\n        if (x & 0x1000 > 0)\\r\\n            result = result * 0x10000000000000B17217F7D1CF7D83C1A >> 128;\\r\\n        if (x & 0x800 > 0)\\r\\n            result = result * 0x1000000000000058B90BFBE8E7BDCBE2E >> 128;\\r\\n        if (x & 0x400 > 0)\\r\\n            result = result * 0x100000000000002C5C85FDF473DEA871F >> 128;\\r\\n        if (x & 0x200 > 0)\\r\\n            result = result * 0x10000000000000162E42FEFA39EF44D91 >> 128;\\r\\n        if (x & 0x100 > 0)\\r\\n            result = result * 0x100000000000000B17217F7D1CF79E949 >> 128;\\r\\n        if (x & 0x80 > 0)\\r\\n            result = result * 0x10000000000000058B90BFBE8E7BCE544 >> 128;\\r\\n        if (x & 0x40 > 0)\\r\\n            result = result * 0x1000000000000002C5C85FDF473DE6ECA >> 128;\\r\\n        if (x & 0x20 > 0)\\r\\n            result = result * 0x100000000000000162E42FEFA39EF366F >> 128;\\r\\n        if (x & 0x10 > 0)\\r\\n            result = result * 0x1000000000000000B17217F7D1CF79AFA >> 128;\\r\\n        if (x & 0x8 > 0)\\r\\n            result = result * 0x100000000000000058B90BFBE8E7BCD6D >> 128;\\r\\n        if (x & 0x4 > 0)\\r\\n            result = result * 0x10000000000000002C5C85FDF473DE6B2 >> 128;\\r\\n        if (x & 0x2 > 0)\\r\\n            result = result * 0x1000000000000000162E42FEFA39EF358 >> 128;\\r\\n        if (x & 0x1 > 0)\\r\\n            result = result * 0x10000000000000000B17217F7D1CF79AB >> 128;\\r\\n\\r\\n        result >>= uint256 (int256 (63 - (x >> 64)));\\r\\n        require (result <= uint256 (int256 (MAX_64x64)));\\r\\n\\r\\n        return int128 (int256 (result));\\r\\n    }\\r\\n    }\\r\\n\\r\\n    /**\\r\\n     * Calculate natural exponent of x.  Revert on overflow.\\r\\n     *\\r\\n     * @param x signed 64.64-bit fixed point number\\r\\n   * @return signed 64.64-bit fixed point number\\r\\n   */\\r\\n    function exp (int128 x) internal pure returns (int128) {\\r\\n    unchecked {\\r\\n        require (x < 0x400000000000000000); // Overflow\\r\\n\\r\\n        if (x < -0x400000000000000000) return 0; // Underflow\\r\\n\\r\\n        return exp_2 (\\r\\n            int128 (int256 (x) * 0x171547652B82FE1777D0FFDA0D23A7D12 >> 128));\\r\\n    }\\r\\n    }\\r\\n\\r\\n    /**\\r\\n     * Calculate x / y rounding towards zero, where x and y are unsigned 256-bit\\r\\n     * integer numbers.  Revert on overflow or when y is zero.\\r\\n     *\\r\\n     * @param x unsigned 256-bit integer number\\r\\n   * @param y unsigned 256-bit integer number\\r\\n   * @return unsigned 64.64-bit fixed point number\\r\\n   */\\r\\n    function divuu (uint256 x, uint256 y) private pure returns (uint128) {\\r\\n    unchecked {\\r\\n        require (y != 0);\\r\\n\\r\\n        uint256 result;\\r\\n\\r\\n        if (x <= 0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF)\\r\\n            result = (x << 64) / y;\\r\\n        else {\\r\\n            uint256 msb = 192;\\r\\n            uint256 xc = x >> 192;\\r\\n            if (xc >= 0x100000000) { xc >>= 32; msb += 32; }\\r\\n            if (xc >= 0x10000) { xc >>= 16; msb += 16; }\\r\\n            if (xc >= 0x100) { xc >>= 8; msb += 8; }\\r\\n            if (xc >= 0x10) { xc >>= 4; msb += 4; }\\r\\n            if (xc >= 0x4) { xc >>= 2; msb += 2; }\\r\\n            if (xc >= 0x2) msb += 1;  // No need to shift xc anymore\\r\\n\\r\\n            result = (x << 255 - msb) / ((y - 1 >> msb - 191) + 1);\\r\\n            require (result <= 0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF);\\r\\n\\r\\n            uint256 hi = result * (y >> 128);\\r\\n            uint256 lo = result * (y & 0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF);\\r\\n\\r\\n            uint256 xh = x >> 192;\\r\\n            uint256 xl = x << 64;\\r\\n\\r\\n            if (xl < lo) xh -= 1;\\r\\n            xl -= lo; // We rely on overflow behavior here\\r\\n            lo = hi << 128;\\r\\n            if (xl < lo) xh -= 1;\\r\\n            xl -= lo; // We rely on overflow behavior here\\r\\n\\r\\n            assert (xh == hi >> 128);\\r\\n\\r\\n            result += xl / y;\\r\\n        }\\r\\n\\r\\n        require (result <= 0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF);\\r\\n        return uint128 (result);\\r\\n    }\\r\\n    }\\r\\n\\r\\n    /**\\r\\n     * Calculate sqrt (x) rounding down, where x is unsigned 256-bit integer\\r\\n     * number.\\r\\n     *\\r\\n     * @param x unsigned 256-bit integer number\\r\\n   * @return unsigned 128-bit integer number\\r\\n   */\\r\\n    function sqrtu (uint256 x) private pure returns (uint128) {\\r\\n    unchecked {\\r\\n        if (x == 0) return 0;\\r\\n        else {\\r\\n            uint256 xx = x;\\r\\n            uint256 r = 1;\\r\\n            if (xx >= 0x100000000000000000000000000000000) { xx >>= 128; r <<= 64; }\\r\\n            if (xx >= 0x10000000000000000) { xx >>= 64; r <<= 32; }\\r\\n            if (xx >= 0x100000000) { xx >>= 32; r <<= 16; }\\r\\n            if (xx >= 0x10000) { xx >>= 16; r <<= 8; }\\r\\n            if (xx >= 0x100) { xx >>= 8; r <<= 4; }\\r\\n            if (xx >= 0x10) { xx >>= 4; r <<= 2; }\\r\\n            if (xx >= 0x8) { r <<= 1; }\\r\\n            r = (r + x / r) >> 1;\\r\\n            r = (r + x / r) >> 1;\\r\\n            r = (r + x / r) >> 1;\\r\\n            r = (r + x / r) >> 1;\\r\\n            r = (r + x / r) >> 1;\\r\\n            r = (r + x / r) >> 1;\\r\\n            r = (r + x / r) >> 1; // Seven iterations should be enough\\r\\n            uint256 r1 = x / r;\\r\\n            return uint128 (r < r1 ? r : r1);\\r\\n        }\\r\\n    }\\r\\n    }\\r\\n}\\r\\n\",\"keccak256\":\"0xb0bd6c7776723f29bcd4c3d62bad44ed06279af5f52fe0810ce2219cd1097bf5\"},\"contracts/libraries/MathExtension.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\r\\npragma solidity ^0.8.13;\\r\\n\\r\\n/// @title Extension of math library\\r\\n/// @notice Contains helper functions for some math operations\\r\\nlibrary MathExtension {\\r\\n    /// @dev Calculates square root of uint256 using Babylonian Method\\r\\n    function sqrt(uint256 y) external pure returns (uint256 z) {\\r\\n        if (y > 3) {\\r\\n            z = y;\\r\\n            uint256 x = y / 2 + 1;\\r\\n            while (x < z) {\\r\\n                z = x;\\r\\n                x = (y / x + x) / 2;\\r\\n            }\\r\\n        } else if (y != 0) {\\r\\n            z = 1;\\r\\n        }\\r\\n    }\\r\\n\\r\\n    /// @dev Rounds uint256 value with provided precision to its integer value rounding down\\r\\n    function roundDownWithPrecision(uint256 value, uint256 precision) public pure returns (uint256) {\\r\\n        return (value / precision) * precision;\\r\\n    }\\r\\n\\r\\n    /// @dev Rounds uint256 value with provided precision to its integer value rounding up\\r\\n    function roundUpWithPrecision(uint256 value, uint256 precision) external pure returns (uint256) {\\r\\n        uint256 roundedValue = roundDownWithPrecision(value, precision);\\r\\n        if (value % precision != 0) {\\r\\n            roundedValue += precision;\\r\\n        }\\r\\n\\r\\n        return roundedValue;\\r\\n    }\\r\\n\\r\\n    /// @dev Check if uint256 value with provided precision integer value or not\\r\\n    function isIntegerWithPrecision(uint256 value, uint256 precision) external pure returns (bool) {\\r\\n        return value % precision == 0;\\r\\n    }\\r\\n}\\r\\n\",\"keccak256\":\"0x278de37740f6b6a7c199d17a6cc0e9c94601979e4cfd202ae61240a378b1d162\",\"license\":\"MIT\"},\"contracts/token/IERC20Burnable.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\r\\npragma solidity ^0.8.13;\\r\\n\\r\\ninterface IERC20Burnable {\\r\\n    function burn(uint256 amount) external;\\r\\n\\r\\n    function burnFrom(address account, uint256 amount) external;\\r\\n}\\r\\n\",\"keccak256\":\"0x987331fa32acb2cc7f935508e8c6b3ad0d108ba9ff7ab034968dac0a284205db\",\"license\":\"MIT\"},\"contracts/token/IERC20Int.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\r\\npragma solidity ^0.8.13;\\r\\n\\r\\nimport \\\"@openzeppelin/contracts/token/ERC20/IERC20.sol\\\";\\r\\n\\r\\ninterface IERC20Int is IERC20 {\\r\\n    function realBalanceOf(address account) external view returns (int256);\\r\\n\\r\\n    function realTotalSupply() external view returns (int256);\\r\\n}\\r\\n\",\"keccak256\":\"0x4462fcf9d28c5ffe47f9d9d12abdbf39aa51ed2fb2c2fad78b96372db2224a3a\",\"license\":\"MIT\"}},\"version\":1}",
  "bytecode": "0x608060405234801561001057600080fd5b5061263a806100206000396000f3fe608060405234801561001057600080fd5b50600436106100ea5760003560e01c80639abb3cae1161008c578063d6fbf20211610066578063d6fbf202146101bf578063e5f1a95f146101c8578063f321b305146101d0578063f4145a83146101e557600080fd5b80639abb3cae146101865780639b4faa801461018e578063c14bafb1146101b657600080fd5b80637b103999116100c85780637b10399914610142578063900cf0cf1461014a578063906c7a71146101525780639709cbd21461017357600080fd5b806330b67baa146100ef5780633fe3347a1461011457806341c5255314610129575b600080fd5b6100f761020c565b6040516001600160a01b0390911681526020015b60405180910390f35b61011c610244565b60405161010b9190611f3a565b6000546100f7906201000090046001600160a01b031681565b6100f76102f8565b6100f7610363565b610165610160366004611f65565b6103de565b60405190815260200161010b565b610165610181366004611fab565b6103f6565b61011c61045e565b6101a161019c366004612006565b61048f565b6040805192835260208301919091520161010b565b61016560015481565b61016560035481565b61011c6104b8565b6101e36101de36600461208e565b610546565b005b7f6c85b93e587873fbe6712f3b438d42c2945689b262f7bd34b8ea4e3f832a89e754610165565b600061023f7f6c85b93e587873fbe6712f3b438d42c2945689b262f7bd34b8ea4e3f832a89e6546001600160a01b031690565b905090565b60607f6c85b93e587873fbe6712f3b438d42c2945689b262f7bd34b8ea4e3f832a89e6600401805461027590612121565b80601f01602080910402602001604051908101604052809291908181526020018280546102a190612121565b80156102ee5780601f106102c3576101008083540402835291602001916102ee565b820191906000526020600020905b8154815290600101906020018083116102d157829003601f168201915b5050505050905090565b600061030261020c565b6001600160a01b0316637b1039996040518163ffffffff1660e01b8152600401602060405180830381865afa15801561033f573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061023f919061215b565b600061036d61020c565b6001600160a01b031663c6b61e4c6103a37f6c85b93e587873fbe6712f3b438d42c2945689b262f7bd34b8ea4e3f832a89e75490565b6040518263ffffffff1660e01b81526004016103c191815260200190565b602060405180830381865afa15801561033f573d6000803e3d6000fd5b60006103ed853386868661069d565b95945050505050565b600080546201000090046001600160a01b031633146104475760405162461bcd60e51b81526020600482015260086024820152676f6e6c795a6f6e6560c01b60448201526064015b60405180910390fd5b610454868686868661069d565b9695505050505050565b60607f6c85b93e587873fbe6712f3b438d42c2945689b262f7bd34b8ea4e3f832a89e6600301805461027590612121565b60008060006104a26103ec6103e8610f11565b90506104ae8482610f54565b9250925050915091565b600280546104c590612121565b80601f01602080910402602001604051908101604052809291908181526020018280546104f190612121565b801561053e5780601f106105135761010080835404028352916020019161053e565b820191906000526020600020905b81548152906001019060200180831161052157829003601f168201915b505050505081565b600054610100900460ff16158080156105665750600054600160ff909116105b806105805750303b158015610580575060005460ff166001145b6105e35760405162461bcd60e51b815260206004820152602e60248201527f496e697469616c697a61626c653a20636f6e747261637420697320616c72656160448201526d191e481a5b9a5d1a585b1a5e995960921b606482015260840161043e565b6000805460ff191660011790558015610606576000805461ff0019166101001790555b6000805475ffffffffffffffffffffffffffffffffffffffff00001916620100006001600160a01b03861602179055600261064183826121c6565b5042600155678ac7230489e800006003558015610698576000805461ff0019169055604051600181527f7f26b83ff96e1f2b6a682f133852f6798a09c465da95921460cefb38474024989060200160405180910390a15b505050565b6000670de0b6b3a76400008310156106f75760405162461bcd60e51b815260206004820152601d60248201527f496e73756666696369656e7420756e6974732062757920616d6f756e74000000604482015260640161043e565b6040516314188b1d60e11b815260048101849052670de0b6b3a7640000602482015273365B81B494a99F1DAA778eaeA0BEbc950E8bE53690632831163a90604401602060405180830381865af4158015610755573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906107799190612286565b6107da5760405162461bcd60e51b815260206004820152602c60248201527f4e6f7420696e746567657220616d6f756e74206f6620756e69747320746f206260448201526b1d5e481cdc1958da599a595960a21b606482015260840161043e565b6000821161083b5760405162461bcd60e51b815260206004820152602860248201527f496e73756666696369656e74206d6178696d756d20776561706f6e732073656c6044820152671b08185b5bdd5b9d60c21b606482015260840161043e565b600060029054906101000a90046001600160a01b03166001600160a01b0316846001600160a01b03166341c525536040518163ffffffff1660e01b8152600401602060405180830381865afa158015610898573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906108bc919061215b565b6001600160a01b0316146109215760405162461bcd60e51b815260206004820152602660248201527f536574746c656d656e7420646f65736e27742062656c6f6e6720746f2074686960448201526573207a6f6e6560d01b606482015260840161043e565b600061092c85610ff1565b905060006109398661113d565b905084610946838361153f565b10156109855760405162461bcd60e51b815260206004820152600e60248201526d115e18d959591959081b1a5b5a5d60921b604482015260640161043e565b60008061099d61019c670de0b6b3a7640000896122d4565b9150915085821115610a065760405162461bcd60e51b815260206004820152602c60248201527f576561706f6e7320746f2073656c6c206973206d6f7265207468616e2073706560448201526b18da599a5959081b1a5b5a5d60a21b606482015260840161043e565b6000886001600160a01b031663f10e38af6040518163ffffffff1660e01b8152600401602060405180830381865afa158015610a46573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610a6a919061215b565b9050806001600160a01b0316631d8557d76040518163ffffffff1660e01b8152600401600060405180830381600087803b158015610aa757600080fd5b505af1158015610abb573d6000803e3d6000fd5b505050506000816001600160a01b031663a74bd4f66040518163ffffffff1660e01b81526004016040805180830381865afa158015610afe573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610b229190612313565b91505067ffffffffffffffff811615610b7d5760405162461bcd60e51b815260206004820152601d60248201527f43616e2774206869726520756e697473207768696c65206d6f76696e67000000604482015260640161043e565b6000826001600160a01b0316633cb9758a6040518163ffffffff1660e01b81526004016040805180830381865afa158015610bbc573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610be09190612313565b91505067ffffffffffffffff811615610c3b5760405162461bcd60e51b815260206004820152601e60248201527f7374756e6e65642061726d792063616e6e6f74206869726520756e6974730000604482015260640161043e565b826001600160a01b038e16610cbb57610c5261165a565b60405163079cc67960e41b81526001600160a01b038f811660048301526024820189905291909116906379cc679090604401600060405180830381600087803b158015610c9e57600080fd5b505af1158015610cb2573d6000803e3d6000fd5b50505050610dbf565b610cc361165a565b6001600160a01b031663dd8aaa4f8f8f896040518463ffffffff1660e01b8152600401610d11939291906001600160a01b039384168152919092166020820152604081019190915260600190565b600060405180830381600087803b158015610d2b57600080fd5b505af1158015610d3f573d6000803e3d6000fd5b50505050610d4b61165a565b6001600160a01b03166379cc67908f886040518363ffffffff1660e01b8152600401610d8c9291906001600160a01b03929092168252602082015260400190565b600060405180830381600087803b158015610da657600080fd5b505af1158015610dba573d6000803e3d6000fd5b505050505b600054604051636e08f72160e01b8152620100009091046001600160a01b031690636e08f72190610df6908f908a90600401612346565b600060405180830381600087803b158015610e1057600080fd5b505af1158015610e24573d6000803e3d6000fd5b50505050610e3061168d565b6040516340c10f1960e01b81526001600160a01b038381166004830152602482018e905291909116906340c10f1990604401600060405180830381600087803b158015610e7c57600080fd5b505af1158015610e90573d6000803e3d6000fd5b505050600386905550426001556040517f522208dedb79df7e31cf290a4c2c90398cc08d0246cd6f4b28c0b2319c6d1b5d90610ef7908f9084908f908b906001600160a01b0394851681529290931660208301526040820152606081019190915260800190565b60405180910390a150989c9b505050505050505050505050565b600081600003610f2057600080fd5b6000610f2c84846116c3565b905060016001607f1b036001600160801b0382161115610f4b57600080fd5b90505b92915050565b6000806000610f61611828565b90506000610f6f8587611981565b90506000610f97610f8983610f846001611ba3565b611bc1565b610f9288611bf5565b611c2f565b90506000610fa58483611c86565b90506000610fb38585611c86565b90506000610fc983670de0b6b3a7640000611cbc565b90506000610fdf83670de0b6b3a7640000611cbc565b919b919a509098505050505050505050565b600080829050806001600160a01b0316635c8872076040518163ffffffff1660e01b8152600401600060405180830381600087803b15801561103257600080fd5b505af1158015611046573d6000803e3d6000fd5b50506040516399258aef60e01b8152600092506001600160a01b03841691506399258aef90611090906004016020808252600490820152631193d49560e21b604082015260600190565b602060405180830381865afa1580156110ad573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906110d1919061215b565b9050806001600160a01b0316637633a22c6040518163ffffffff1660e01b8152600401602060405180830381865afa158015611111573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611135919061238a565b949350505050565b6000808290506000816001600160a01b031663f10e38af6040518163ffffffff1660e01b8152600401602060405180830381865afa158015611183573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906111a7919061215b565b9050806001600160a01b0316631d8557d76040518163ffffffff1660e01b8152600401600060405180830381600087803b1580156111e457600080fd5b505af11580156111f8573d6000803e3d6000fd5b50505050806001600160a01b0316633b81149d6040518163ffffffff1660e01b8152600401602060405180830381865afa15801561123a573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061125e9190612286565b6112aa5760405162461bcd60e51b815260206004820152601e60248201527f43616e2068697265206f6e6c79206f6e20686f6d6520706f736974696f6e0000604482015260640161043e565b6000816001600160a01b0316632de7e9b06040518163ffffffff1660e01b8152600401602060405180830381865afa1580156112ea573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061130e919061215b565b9050600061131a6102f8565b6001600160a01b031663027aa9f56040518163ffffffff1660e01b8152600401600060405180830381865afa158015611357573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f1916820160405261137f91908101906123a3565b905060005b81518110156115355760008282815181106113a1576113a16124a2565b602002602001015190506113b3610363565b6001600160a01b031663fe01e782826040518263ffffffff1660e01b81526004016113de9190611f3a565b602060405180830381865afa1580156113fb573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061141f919061215b565b6040516370a0823160e01b81526001600160a01b03878116600483015291909116906370a0823190602401602060405180830381865afa158015611467573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061148b919061238a565b61149590886124b8565b96506001600160a01b0384161561152257604051632e828edf60e21b81526001600160a01b0385169063ba0a3b7c906114d490889085906004016124cb565b602060405180830381865afa1580156114f1573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611515919061238a565b61151f90886124b8565b96505b508061152d816124ed565b915050611384565b5050505050919050565b60008073365B81B494a99F1DAA778eaeA0BEbc950E8bE53663eefe42846115646102f8565b6001600160a01b031663a6896cdb6040518163ffffffff1660e01b8152600401602060405180830381865afa1580156115a1573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906115c5919061238a565b6115cf90876122d4565b6040516001600160e01b031960e084901b1681526004810191909152670de0b6b3a76400006024820152604401602060405180830381865af4158015611619573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061163d919061238a565b9050808310611650576000915050610f4e565b6111358382612506565b6000611664610363565b6001600160a01b03166304f86f3c6040518163ffffffff1660e01b81526004016103c190612519565b6000611697610363565b6001600160a01b031663fe01e78260026040518263ffffffff1660e01b81526004016103c1919061253f565b6000816000036116d257600080fd5b60006001600160c01b0384116116fd5782604085901b816116f5576116f56122a8565b049050611814565b60c084811c6401000000008110611716576020918201911c5b620100008110611728576010918201911c5b6101008110611739576008918201911c5b60108110611749576004918201911c5b60048110611759576002918201911c5b60028110611768576001820191505b60bf820360018603901c6001018260ff0387901b81611789576117896122a8565b0492506001600160801b038311156117a057600080fd5b608085901c83026001600160801b038616840260c088901c604089901b828110156117cc576001820391505b608084901b929003828110156117e3576001820391505b829003608084901c82146117f9576117f96125ca565b888181611808576118086122a8565b04870196505050505050505b6001600160801b03811115610f4b57600080fd5b60008061189f60015461183961020c565b6001600160a01b0316630252b9956040518163ffffffff1660e01b8152600401602060405180830381865afa158015611876573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061189a919061238a565b611d89565b905060006118b7600354670de0b6b3a7640000610f11565b90504282106118c65792915050565b60006118d28342612506565b90506000806118df6102f8565b6001600160a01b031663f8c73bd360026040518263ffffffff1660e01b815260040161190b919061253f565b6040805180830381865afa158015611927573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061194b91906125e0565b91509150600061195b8383610f11565b905060006119698286611981565b90506119758682611c86565b97505050505050505090565b600080600084600f0b12801561199a5750826001166001145b905060008085600f0b126119ae57846119b3565b846000035b6001600160801b03169050600160801b600160401b8211611a4857603f82901b91505b8415611a405760018516156119eb578102607f1c5b908002607f1c906002851615611a01578102607f1c5b908002607f1c906004851615611a17578102607f1c5b908002607f1c906008851615611a2d578102607f1c5b60049490941c93908002607f1c906119d6565b60401c611b67565b603f6c01000000000000000000000000831015611a6b5760209290921b91601f19015b600160701b831015611a835760109290921b91600f19015b600160781b831015611a9b5760089290921b91600719015b6001607c1b831015611ab35760049290921b91600319015b6001607e1b831015611acb5760029290921b91600119015b6001607f1b831015611ae35760019290921b91600019015b60005b8615611b505760408210611af957600080fd5b6001871615611b1f57918302607f1c918101600160801b831115611b1f57600192831c92015b928002607f1c9260019190911b90600160801b8410611b4457600193841c9391909101905b600187901c9650611ae6565b60408110611b5d57600080fd5b6040039190911c90505b600083611b745781611b79565b816000035b905060016001607f1b03198112801590611b9a575060016001607f1b038113155b61045457600080fd5b6000677fffffffffffffff821115611bba57600080fd5b5060401b90565b6000600f82810b9084900b0360016001607f1b03198112801590611bec575060016001607f1b038113155b610f4b57600080fd5b60008082600f0b13611c0657600080fd5b6080611c1183611da0565b600f0b6fb17217f7d1cf79abc9e3b39803f2f6af02901c9050919050565b600081600f0b600003611c4157600080fd5b600082600f0b604085600f0b901b81611c5c57611c5c6122a8565b05905060016001607f1b03198112801590611bec575060016001607f1b03811315610f4b57600080fd5b6000600f83810b9083900b0260401d60016001607f1b03198112801590611bec575060016001607f1b03811315610f4b57600080fd5b60006001607f1b600f84900b01611d115777fffffffffffffffffffffffffffffffffffffffffffffffe198212158015611cfa5750600160c01b8213155b611d0357600080fd5b506000819003603f1b610f4e565b60008084600f0b1215611d2957836000039350600190505b6000831215611d3b5760009290920391155b6000611d478585611e7f565b90508115611d6c57600160ff1b811115611d6057600080fd5b6000039150610f4e9050565b6001600160ff1b03811115611d8057600080fd5b9150610f4e9050565b600081831015611d995781610f4b565b5090919050565b60008082600f0b13611db157600080fd5b6000600f83900b600160401b8112611dcb576040918201911d5b6401000000008112611ddf576020918201911d5b620100008112611df1576010918201911d5b6101008112611e02576008918201911d5b60108112611e12576004918201911d5b60048112611e22576002918201911d5b60028112611e31576001820191505b603f19820160401b600f85900b607f8490031b6780000000000000005b6000811315611e745790800260ff81901c8281029390930192607f011c9060011d611e4e565b509095945050505050565b600081600003611e9157506000610f4e565b600083600f0b1215611ea257600080fd5b600f83900b6001600160801b038316810260401c90608084901c026001600160c01b03811115611ed157600080fd5b60401b8119811115611ee257600080fd5b019392505050565b60005b83811015611f05578181015183820152602001611eed565b50506000910152565b60008151808452611f26816020860160208601611eea565b601f01601f19169290920160200192915050565b602081526000610f4b6020830184611f0e565b6001600160a01b0381168114611f6257600080fd5b50565b60008060008060808587031215611f7b57600080fd5b8435611f8681611f4d565b93506020850135611f9681611f4d565b93969395505050506040820135916060013590565b600080600080600060a08688031215611fc357600080fd5b8535611fce81611f4d565b94506020860135611fde81611f4d565b93506040860135611fee81611f4d565b94979396509394606081013594506080013592915050565b60006020828403121561201857600080fd5b5035919050565b634e487b7160e01b600052604160045260246000fd5b604051601f8201601f1916810167ffffffffffffffff8111828210171561205e5761205e61201f565b604052919050565b600067ffffffffffffffff8211156120805761208061201f565b50601f01601f191660200190565b600080604083850312156120a157600080fd5b82356120ac81611f4d565b9150602083013567ffffffffffffffff8111156120c857600080fd5b8301601f810185136120d957600080fd5b80356120ec6120e782612066565b612035565b81815286602083850101111561210157600080fd5b816020840160208301376000602083830101528093505050509250929050565b600181811c9082168061213557607f821691505b60208210810361215557634e487b7160e01b600052602260045260246000fd5b50919050565b60006020828403121561216d57600080fd5b8151610f4b81611f4d565b601f82111561069857600081815260208120601f850160051c8101602086101561219f5750805b601f850160051c820191505b818110156121be578281556001016121ab565b505050505050565b815167ffffffffffffffff8111156121e0576121e061201f565b6121f4816121ee8454612121565b84612178565b602080601f83116001811461222957600084156122115750858301515b600019600386901b1c1916600185901b1785556121be565b600085815260208120601f198616915b8281101561225857888601518255948401946001909101908401612239565b50858210156122765787850151600019600388901b60f8161c191681555b5050505050600190811b01905550565b60006020828403121561229857600080fd5b81518015158114610f4b57600080fd5b634e487b7160e01b600052601260045260246000fd5b634e487b7160e01b600052601160045260246000fd5b6000826122f157634e487b7160e01b600052601260045260246000fd5b500490565b805167ffffffffffffffff8116811461230e57600080fd5b919050565b6000806040838503121561232657600080fd5b61232f836122f6565b915061233d602084016122f6565b90509250929050565b6001600160a01b038316815260606020820152600061237b6060830160068152652ba2a0a827a760d11b602082015260400190565b90508260408301529392505050565b60006020828403121561239c57600080fd5b5051919050565b600060208083850312156123b657600080fd5b825167ffffffffffffffff808211156123ce57600080fd5b818501915085601f8301126123e257600080fd5b8151818111156123f4576123f461201f565b8060051b612403858201612035565b918252838101850191858101908984111561241d57600080fd5b86860192505b838310156124955782518581111561243b5760008081fd5b8601603f81018b1361244d5760008081fd5b87810151604061245f6120e783612066565b8281528d828486010111156124745760008081fd5b612483838c8301848701611eea565b85525050509186019190860190612423565b9998505050505050505050565b634e487b7160e01b600052603260045260246000fd5b80820180821115610f4e57610f4e6122be565b6001600160a01b03831681526040602082015260006111356040830184611f0e565b6000600182016124ff576124ff6122be565b5060010190565b81810381811115610f4e57610f4e6122be565b602081526000610f4e6020830160068152652ba2a0a827a760d11b602082015260400190565b600060208083526000845461255381612121565b80848701526040600180841660008114612574576001811461258e576125bc565b60ff1985168984015283151560051b8901830195506125bc565b896000528660002060005b858110156125b45781548b8201860152908301908801612599565b8a0184019650505b509398975050505050505050565b634e487b7160e01b600052600160045260246000fd5b600080604083850312156125f357600080fd5b50508051602090910151909290915056fea26469706673582212207e6e51176696260820e6ae3b999d247942784475e3a14241c196f7b1ebf7661b64736f6c63430008100033",
  "deployedBytecode": "0x608060405234801561001057600080fd5b50600436106100ea5760003560e01c80639abb3cae1161008c578063d6fbf20211610066578063d6fbf202146101bf578063e5f1a95f146101c8578063f321b305146101d0578063f4145a83146101e557600080fd5b80639abb3cae146101865780639b4faa801461018e578063c14bafb1146101b657600080fd5b80637b103999116100c85780637b10399914610142578063900cf0cf1461014a578063906c7a71146101525780639709cbd21461017357600080fd5b806330b67baa146100ef5780633fe3347a1461011457806341c5255314610129575b600080fd5b6100f761020c565b6040516001600160a01b0390911681526020015b60405180910390f35b61011c610244565b60405161010b9190611f3a565b6000546100f7906201000090046001600160a01b031681565b6100f76102f8565b6100f7610363565b610165610160366004611f65565b6103de565b60405190815260200161010b565b610165610181366004611fab565b6103f6565b61011c61045e565b6101a161019c366004612006565b61048f565b6040805192835260208301919091520161010b565b61016560015481565b61016560035481565b61011c6104b8565b6101e36101de36600461208e565b610546565b005b7f6c85b93e587873fbe6712f3b438d42c2945689b262f7bd34b8ea4e3f832a89e754610165565b600061023f7f6c85b93e587873fbe6712f3b438d42c2945689b262f7bd34b8ea4e3f832a89e6546001600160a01b031690565b905090565b60607f6c85b93e587873fbe6712f3b438d42c2945689b262f7bd34b8ea4e3f832a89e6600401805461027590612121565b80601f01602080910402602001604051908101604052809291908181526020018280546102a190612121565b80156102ee5780601f106102c3576101008083540402835291602001916102ee565b820191906000526020600020905b8154815290600101906020018083116102d157829003601f168201915b5050505050905090565b600061030261020c565b6001600160a01b0316637b1039996040518163ffffffff1660e01b8152600401602060405180830381865afa15801561033f573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061023f919061215b565b600061036d61020c565b6001600160a01b031663c6b61e4c6103a37f6c85b93e587873fbe6712f3b438d42c2945689b262f7bd34b8ea4e3f832a89e75490565b6040518263ffffffff1660e01b81526004016103c191815260200190565b602060405180830381865afa15801561033f573d6000803e3d6000fd5b60006103ed853386868661069d565b95945050505050565b600080546201000090046001600160a01b031633146104475760405162461bcd60e51b81526020600482015260086024820152676f6e6c795a6f6e6560c01b60448201526064015b60405180910390fd5b610454868686868661069d565b9695505050505050565b60607f6c85b93e587873fbe6712f3b438d42c2945689b262f7bd34b8ea4e3f832a89e6600301805461027590612121565b60008060006104a26103ec6103e8610f11565b90506104ae8482610f54565b9250925050915091565b600280546104c590612121565b80601f01602080910402602001604051908101604052809291908181526020018280546104f190612121565b801561053e5780601f106105135761010080835404028352916020019161053e565b820191906000526020600020905b81548152906001019060200180831161052157829003601f168201915b505050505081565b600054610100900460ff16158080156105665750600054600160ff909116105b806105805750303b158015610580575060005460ff166001145b6105e35760405162461bcd60e51b815260206004820152602e60248201527f496e697469616c697a61626c653a20636f6e747261637420697320616c72656160448201526d191e481a5b9a5d1a585b1a5e995960921b606482015260840161043e565b6000805460ff191660011790558015610606576000805461ff0019166101001790555b6000805475ffffffffffffffffffffffffffffffffffffffff00001916620100006001600160a01b03861602179055600261064183826121c6565b5042600155678ac7230489e800006003558015610698576000805461ff0019169055604051600181527f7f26b83ff96e1f2b6a682f133852f6798a09c465da95921460cefb38474024989060200160405180910390a15b505050565b6000670de0b6b3a76400008310156106f75760405162461bcd60e51b815260206004820152601d60248201527f496e73756666696369656e7420756e6974732062757920616d6f756e74000000604482015260640161043e565b6040516314188b1d60e11b815260048101849052670de0b6b3a7640000602482015273__$b96f6cc754b665f2373f69c32648f7914e$__90632831163a90604401602060405180830381865af4158015610755573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906107799190612286565b6107da5760405162461bcd60e51b815260206004820152602c60248201527f4e6f7420696e746567657220616d6f756e74206f6620756e69747320746f206260448201526b1d5e481cdc1958da599a595960a21b606482015260840161043e565b6000821161083b5760405162461bcd60e51b815260206004820152602860248201527f496e73756666696369656e74206d6178696d756d20776561706f6e732073656c6044820152671b08185b5bdd5b9d60c21b606482015260840161043e565b600060029054906101000a90046001600160a01b03166001600160a01b0316846001600160a01b03166341c525536040518163ffffffff1660e01b8152600401602060405180830381865afa158015610898573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906108bc919061215b565b6001600160a01b0316146109215760405162461bcd60e51b815260206004820152602660248201527f536574746c656d656e7420646f65736e27742062656c6f6e6720746f2074686960448201526573207a6f6e6560d01b606482015260840161043e565b600061092c85610ff1565b905060006109398661113d565b905084610946838361153f565b10156109855760405162461bcd60e51b815260206004820152600e60248201526d115e18d959591959081b1a5b5a5d60921b604482015260640161043e565b60008061099d61019c670de0b6b3a7640000896122d4565b9150915085821115610a065760405162461bcd60e51b815260206004820152602c60248201527f576561706f6e7320746f2073656c6c206973206d6f7265207468616e2073706560448201526b18da599a5959081b1a5b5a5d60a21b606482015260840161043e565b6000886001600160a01b031663f10e38af6040518163ffffffff1660e01b8152600401602060405180830381865afa158015610a46573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610a6a919061215b565b9050806001600160a01b0316631d8557d76040518163ffffffff1660e01b8152600401600060405180830381600087803b158015610aa757600080fd5b505af1158015610abb573d6000803e3d6000fd5b505050506000816001600160a01b031663a74bd4f66040518163ffffffff1660e01b81526004016040805180830381865afa158015610afe573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610b229190612313565b91505067ffffffffffffffff811615610b7d5760405162461bcd60e51b815260206004820152601d60248201527f43616e2774206869726520756e697473207768696c65206d6f76696e67000000604482015260640161043e565b6000826001600160a01b0316633cb9758a6040518163ffffffff1660e01b81526004016040805180830381865afa158015610bbc573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610be09190612313565b91505067ffffffffffffffff811615610c3b5760405162461bcd60e51b815260206004820152601e60248201527f7374756e6e65642061726d792063616e6e6f74206869726520756e6974730000604482015260640161043e565b826001600160a01b038e16610cbb57610c5261165a565b60405163079cc67960e41b81526001600160a01b038f811660048301526024820189905291909116906379cc679090604401600060405180830381600087803b158015610c9e57600080fd5b505af1158015610cb2573d6000803e3d6000fd5b50505050610dbf565b610cc361165a565b6001600160a01b031663dd8aaa4f8f8f896040518463ffffffff1660e01b8152600401610d11939291906001600160a01b039384168152919092166020820152604081019190915260600190565b600060405180830381600087803b158015610d2b57600080fd5b505af1158015610d3f573d6000803e3d6000fd5b50505050610d4b61165a565b6001600160a01b03166379cc67908f886040518363ffffffff1660e01b8152600401610d8c9291906001600160a01b03929092168252602082015260400190565b600060405180830381600087803b158015610da657600080fd5b505af1158015610dba573d6000803e3d6000fd5b505050505b600054604051636e08f72160e01b8152620100009091046001600160a01b031690636e08f72190610df6908f908a90600401612346565b600060405180830381600087803b158015610e1057600080fd5b505af1158015610e24573d6000803e3d6000fd5b50505050610e3061168d565b6040516340c10f1960e01b81526001600160a01b038381166004830152602482018e905291909116906340c10f1990604401600060405180830381600087803b158015610e7c57600080fd5b505af1158015610e90573d6000803e3d6000fd5b505050600386905550426001556040517f522208dedb79df7e31cf290a4c2c90398cc08d0246cd6f4b28c0b2319c6d1b5d90610ef7908f9084908f908b906001600160a01b0394851681529290931660208301526040820152606081019190915260800190565b60405180910390a150989c9b505050505050505050505050565b600081600003610f2057600080fd5b6000610f2c84846116c3565b905060016001607f1b036001600160801b0382161115610f4b57600080fd5b90505b92915050565b6000806000610f61611828565b90506000610f6f8587611981565b90506000610f97610f8983610f846001611ba3565b611bc1565b610f9288611bf5565b611c2f565b90506000610fa58483611c86565b90506000610fb38585611c86565b90506000610fc983670de0b6b3a7640000611cbc565b90506000610fdf83670de0b6b3a7640000611cbc565b919b919a509098505050505050505050565b600080829050806001600160a01b0316635c8872076040518163ffffffff1660e01b8152600401600060405180830381600087803b15801561103257600080fd5b505af1158015611046573d6000803e3d6000fd5b50506040516399258aef60e01b8152600092506001600160a01b03841691506399258aef90611090906004016020808252600490820152631193d49560e21b604082015260600190565b602060405180830381865afa1580156110ad573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906110d1919061215b565b9050806001600160a01b0316637633a22c6040518163ffffffff1660e01b8152600401602060405180830381865afa158015611111573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611135919061238a565b949350505050565b6000808290506000816001600160a01b031663f10e38af6040518163ffffffff1660e01b8152600401602060405180830381865afa158015611183573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906111a7919061215b565b9050806001600160a01b0316631d8557d76040518163ffffffff1660e01b8152600401600060405180830381600087803b1580156111e457600080fd5b505af11580156111f8573d6000803e3d6000fd5b50505050806001600160a01b0316633b81149d6040518163ffffffff1660e01b8152600401602060405180830381865afa15801561123a573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061125e9190612286565b6112aa5760405162461bcd60e51b815260206004820152601e60248201527f43616e2068697265206f6e6c79206f6e20686f6d6520706f736974696f6e0000604482015260640161043e565b6000816001600160a01b0316632de7e9b06040518163ffffffff1660e01b8152600401602060405180830381865afa1580156112ea573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061130e919061215b565b9050600061131a6102f8565b6001600160a01b031663027aa9f56040518163ffffffff1660e01b8152600401600060405180830381865afa158015611357573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f1916820160405261137f91908101906123a3565b905060005b81518110156115355760008282815181106113a1576113a16124a2565b602002602001015190506113b3610363565b6001600160a01b031663fe01e782826040518263ffffffff1660e01b81526004016113de9190611f3a565b602060405180830381865afa1580156113fb573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061141f919061215b565b6040516370a0823160e01b81526001600160a01b03878116600483015291909116906370a0823190602401602060405180830381865afa158015611467573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061148b919061238a565b61149590886124b8565b96506001600160a01b0384161561152257604051632e828edf60e21b81526001600160a01b0385169063ba0a3b7c906114d490889085906004016124cb565b602060405180830381865afa1580156114f1573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611515919061238a565b61151f90886124b8565b96505b508061152d816124ed565b915050611384565b5050505050919050565b60008073__$b96f6cc754b665f2373f69c32648f7914e$__63eefe42846115646102f8565b6001600160a01b031663a6896cdb6040518163ffffffff1660e01b8152600401602060405180830381865afa1580156115a1573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906115c5919061238a565b6115cf90876122d4565b6040516001600160e01b031960e084901b1681526004810191909152670de0b6b3a76400006024820152604401602060405180830381865af4158015611619573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061163d919061238a565b9050808310611650576000915050610f4e565b6111358382612506565b6000611664610363565b6001600160a01b03166304f86f3c6040518163ffffffff1660e01b81526004016103c190612519565b6000611697610363565b6001600160a01b031663fe01e78260026040518263ffffffff1660e01b81526004016103c1919061253f565b6000816000036116d257600080fd5b60006001600160c01b0384116116fd5782604085901b816116f5576116f56122a8565b049050611814565b60c084811c6401000000008110611716576020918201911c5b620100008110611728576010918201911c5b6101008110611739576008918201911c5b60108110611749576004918201911c5b60048110611759576002918201911c5b60028110611768576001820191505b60bf820360018603901c6001018260ff0387901b81611789576117896122a8565b0492506001600160801b038311156117a057600080fd5b608085901c83026001600160801b038616840260c088901c604089901b828110156117cc576001820391505b608084901b929003828110156117e3576001820391505b829003608084901c82146117f9576117f96125ca565b888181611808576118086122a8565b04870196505050505050505b6001600160801b03811115610f4b57600080fd5b60008061189f60015461183961020c565b6001600160a01b0316630252b9956040518163ffffffff1660e01b8152600401602060405180830381865afa158015611876573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061189a919061238a565b611d89565b905060006118b7600354670de0b6b3a7640000610f11565b90504282106118c65792915050565b60006118d28342612506565b90506000806118df6102f8565b6001600160a01b031663f8c73bd360026040518263ffffffff1660e01b815260040161190b919061253f565b6040805180830381865afa158015611927573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061194b91906125e0565b91509150600061195b8383610f11565b905060006119698286611981565b90506119758682611c86565b97505050505050505090565b600080600084600f0b12801561199a5750826001166001145b905060008085600f0b126119ae57846119b3565b846000035b6001600160801b03169050600160801b600160401b8211611a4857603f82901b91505b8415611a405760018516156119eb578102607f1c5b908002607f1c906002851615611a01578102607f1c5b908002607f1c906004851615611a17578102607f1c5b908002607f1c906008851615611a2d578102607f1c5b60049490941c93908002607f1c906119d6565b60401c611b67565b603f6c01000000000000000000000000831015611a6b5760209290921b91601f19015b600160701b831015611a835760109290921b91600f19015b600160781b831015611a9b5760089290921b91600719015b6001607c1b831015611ab35760049290921b91600319015b6001607e1b831015611acb5760029290921b91600119015b6001607f1b831015611ae35760019290921b91600019015b60005b8615611b505760408210611af957600080fd5b6001871615611b1f57918302607f1c918101600160801b831115611b1f57600192831c92015b928002607f1c9260019190911b90600160801b8410611b4457600193841c9391909101905b600187901c9650611ae6565b60408110611b5d57600080fd5b6040039190911c90505b600083611b745781611b79565b816000035b905060016001607f1b03198112801590611b9a575060016001607f1b038113155b61045457600080fd5b6000677fffffffffffffff821115611bba57600080fd5b5060401b90565b6000600f82810b9084900b0360016001607f1b03198112801590611bec575060016001607f1b038113155b610f4b57600080fd5b60008082600f0b13611c0657600080fd5b6080611c1183611da0565b600f0b6fb17217f7d1cf79abc9e3b39803f2f6af02901c9050919050565b600081600f0b600003611c4157600080fd5b600082600f0b604085600f0b901b81611c5c57611c5c6122a8565b05905060016001607f1b03198112801590611bec575060016001607f1b03811315610f4b57600080fd5b6000600f83810b9083900b0260401d60016001607f1b03198112801590611bec575060016001607f1b03811315610f4b57600080fd5b60006001607f1b600f84900b01611d115777fffffffffffffffffffffffffffffffffffffffffffffffe198212158015611cfa5750600160c01b8213155b611d0357600080fd5b506000819003603f1b610f4e565b60008084600f0b1215611d2957836000039350600190505b6000831215611d3b5760009290920391155b6000611d478585611e7f565b90508115611d6c57600160ff1b811115611d6057600080fd5b6000039150610f4e9050565b6001600160ff1b03811115611d8057600080fd5b9150610f4e9050565b600081831015611d995781610f4b565b5090919050565b60008082600f0b13611db157600080fd5b6000600f83900b600160401b8112611dcb576040918201911d5b6401000000008112611ddf576020918201911d5b620100008112611df1576010918201911d5b6101008112611e02576008918201911d5b60108112611e12576004918201911d5b60048112611e22576002918201911d5b60028112611e31576001820191505b603f19820160401b600f85900b607f8490031b6780000000000000005b6000811315611e745790800260ff81901c8281029390930192607f011c9060011d611e4e565b509095945050505050565b600081600003611e9157506000610f4e565b600083600f0b1215611ea257600080fd5b600f83900b6001600160801b038316810260401c90608084901c026001600160c01b03811115611ed157600080fd5b60401b8119811115611ee257600080fd5b019392505050565b60005b83811015611f05578181015183820152602001611eed565b50506000910152565b60008151808452611f26816020860160208601611eea565b601f01601f19169290920160200192915050565b602081526000610f4b6020830184611f0e565b6001600160a01b0381168114611f6257600080fd5b50565b60008060008060808587031215611f7b57600080fd5b8435611f8681611f4d565b93506020850135611f9681611f4d565b93969395505050506040820135916060013590565b600080600080600060a08688031215611fc357600080fd5b8535611fce81611f4d565b94506020860135611fde81611f4d565b93506040860135611fee81611f4d565b94979396509394606081013594506080013592915050565b60006020828403121561201857600080fd5b5035919050565b634e487b7160e01b600052604160045260246000fd5b604051601f8201601f1916810167ffffffffffffffff8111828210171561205e5761205e61201f565b604052919050565b600067ffffffffffffffff8211156120805761208061201f565b50601f01601f191660200190565b600080604083850312156120a157600080fd5b82356120ac81611f4d565b9150602083013567ffffffffffffffff8111156120c857600080fd5b8301601f810185136120d957600080fd5b80356120ec6120e782612066565b612035565b81815286602083850101111561210157600080fd5b816020840160208301376000602083830101528093505050509250929050565b600181811c9082168061213557607f821691505b60208210810361215557634e487b7160e01b600052602260045260246000fd5b50919050565b60006020828403121561216d57600080fd5b8151610f4b81611f4d565b601f82111561069857600081815260208120601f850160051c8101602086101561219f5750805b601f850160051c820191505b818110156121be578281556001016121ab565b505050505050565b815167ffffffffffffffff8111156121e0576121e061201f565b6121f4816121ee8454612121565b84612178565b602080601f83116001811461222957600084156122115750858301515b600019600386901b1c1916600185901b1785556121be565b600085815260208120601f198616915b8281101561225857888601518255948401946001909101908401612239565b50858210156122765787850151600019600388901b60f8161c191681555b5050505050600190811b01905550565b60006020828403121561229857600080fd5b81518015158114610f4b57600080fd5b634e487b7160e01b600052601260045260246000fd5b634e487b7160e01b600052601160045260246000fd5b6000826122f157634e487b7160e01b600052601260045260246000fd5b500490565b805167ffffffffffffffff8116811461230e57600080fd5b919050565b6000806040838503121561232657600080fd5b61232f836122f6565b915061233d602084016122f6565b90509250929050565b6001600160a01b038316815260606020820152600061237b6060830160068152652ba2a0a827a760d11b602082015260400190565b90508260408301529392505050565b60006020828403121561239c57600080fd5b5051919050565b600060208083850312156123b657600080fd5b825167ffffffffffffffff808211156123ce57600080fd5b818501915085601f8301126123e257600080fd5b8151818111156123f4576123f461201f565b8060051b612403858201612035565b918252838101850191858101908984111561241d57600080fd5b86860192505b838310156124955782518581111561243b5760008081fd5b8601603f81018b1361244d5760008081fd5b87810151604061245f6120e783612066565b8281528d828486010111156124745760008081fd5b612483838c8301848701611eea565b85525050509186019190860190612423565b9998505050505050505050565b634e487b7160e01b600052603260045260246000fd5b80820180821115610f4e57610f4e6122be565b6001600160a01b03831681526040602082015260006111356040830184611f0e565b6000600182016124ff576124ff6122be565b5060010190565b81810381811115610f4e57610f4e6122be565b602081526000610f4e6020830160068152652ba2a0a827a760d11b602082015260400190565b600060208083526000845461255381612121565b80848701526040600180841660008114612574576001811461258e576125bc565b60ff1985168984015283151560051b8901830195506125bc565b896000528660002060005b858110156125b45781548b8201860152908301908801612599565b8a0184019650505b509398975050505050505050565b634e487b7160e01b600052600160045260246000fd5b600080604083850312156125f357600080fd5b50508051602090910151909290915056fea26469706673582212207e6e51176696260820e6ae3b999d247942784475e3a14241c196f7b1ebf7661b64736f6c63430008100033",
  "libraries": {
    "MathExtension": "0x365B81B494a99F1DAA778eaeA0BEbc950E8bE536"
  },
  "devdoc": {
    "kind": "dev",
    "methods": {
      "assetGroup()": {
        "details": "Reads data from proxy's storage",
        "returns": {
          "_0": "World asset group"
        }
      },
      "assetType()": {
        "details": "Reads data from proxy's storage",
        "returns": {
          "_0": "World asset type"
        }
      },
      "epoch()": {
        "details": "Value is dereferenced from proxy storage and world"
      },
      "epochNumber()": {
        "details": "Reads data from proxy's storage",
        "returns": {
          "_0": "Epoch number"
        }
      },
      "getAmountIn(uint256)": {
        "details": "Returns valid output only for integer unitsToBuy value (not in 1e18 precision)",
        "params": {
          "unitsToBuy": "Amount of workers to buy"
        },
        "returns": {
          "_0": "Amount of weapons needed for unitsToBuy",
          "_1": "New starting price"
        }
      },
      "init(address,string)": {
        "details": "Called by factory contract which creates current instance",
        "params": {
          "unitsType": "Units type",
          "zoneAddress": "Zone address"
        }
      },
      "registry()": {
        "details": "Value is dereferenced from world"
      },
      "swapWeaponsForExactUnits(address,address,uint256,uint256)": {
        "details": "If resourcesOwner == address(0) -> resources will be taken from msg.senderIf resourcesOwner != address(0) and resourcesOwner has given allowance to msg.sender >= amount of weapons for units -> resources will be taken from resourcesOwner",
        "params": {
          "maxWeaponsToSell": "Maximum amount of weapons to be taken for exact amount of units",
          "resourcesOwner": "Resources owner",
          "settlementAddress": "Settlement address, army of which, will receive units",
          "unitsToBuy": "Exact amount of units"
        },
        "returns": {
          "_0": "Amount of units bought by weapons"
        }
      },
      "swapWeaponsForExactUnitsByZone(address,address,address,uint256,uint256)": {
        "details": "Even though function is opened it can be called only by zoneIf resourcesOwner == address(0) -> resources will be taken from msg.senderIf resourcesOwner != address(0) and resourcesOwner has given allowance to msg.sender >= amount of weapons for units -> resources will be taken from resourcesOwner",
        "params": {
          "maxWeaponsToSell": "Maximum amount of weapons to be taken for exact amount of units",
          "msgSender": "msg.sender from zone call",
          "resourcesOwner": "Resources owner",
          "settlementAddress": "Settlement address, army of which, will receive units",
          "unitsToBuy": "Exact amount of units"
        },
        "returns": {
          "_0": "Amount of units bought by weapons"
        }
      },
      "world()": {
        "details": "Value is dereferenced from proxy storage"
      }
    },
    "stateVariables": {
      "currentZone": {
        "details": "Immutable, initialized on the zone creation"
      },
      "lastPurchaseTime": {
        "details": "Updated every time when #swapWeaponsForExactUnits or #swapWeaponsForExactUnitsByZone is called"
      },
      "startingPrice": {
        "details": "Updated every time when #swapWeaponsForExactUnits or #swapWeaponsForExactUnitsByZone is called"
      },
      "unitsType": {
        "details": "Immutable, initialized on the zone creation"
      }
    },
    "version": 1
  },
  "userdoc": {
    "events": {
      "UnitsBought(address,address,uint256,uint256)": {
        "notice": "Emitted when #swapWeaponsForExactUnits or #swapWeaponsForExactUnitsByZone is called"
      }
    },
    "kind": "user",
    "methods": {
      "assetGroup()": {
        "notice": "Returns world asset group"
      },
      "assetType()": {
        "notice": "Returns world asset type"
      },
      "currentZone()": {
        "notice": "Zone to which this pool belongs"
      },
      "epoch()": {
        "notice": "Epoch"
      },
      "epochNumber()": {
        "notice": "Returns epoch number"
      },
      "getAmountIn(uint256)": {
        "notice": "Calculates input of weapons based on output whole amount of units"
      },
      "init(address,string)": {
        "notice": "Proxy initializer"
      },
      "lastPurchaseTime()": {
        "notice": "Time at which last purchase is performed"
      },
      "registry()": {
        "notice": "Registry"
      },
      "startingPrice()": {
        "notice": "Starting unit price"
      },
      "swapWeaponsForExactUnits(address,address,uint256,uint256)": {
        "notice": "Swaps weapons() for exact units()"
      },
      "swapWeaponsForExactUnitsByZone(address,address,address,uint256,uint256)": {
        "notice": "Swaps weapons() for exact units()"
      },
      "unitsType()": {
        "notice": "Units type"
      },
      "world()": {
        "notice": "World"
      }
    },
    "version": 1
  },
  "storageLayout": {
    "storage": [
      {
        "astId": 119,
        "contract": "contracts/core/assets/unitsPool/UnitsPool.sol:UnitsPool",
        "label": "_initialized",
        "offset": 0,
        "slot": "0",
        "type": "t_uint8"
      },
      {
        "astId": 122,
        "contract": "contracts/core/assets/unitsPool/UnitsPool.sol:UnitsPool",
        "label": "_initializing",
        "offset": 1,
        "slot": "0",
        "type": "t_bool"
      },
      {
        "astId": 27933,
        "contract": "contracts/core/assets/unitsPool/UnitsPool.sol:UnitsPool",
        "label": "currentZone",
        "offset": 2,
        "slot": "0",
        "type": "t_contract(IZone)29387"
      },
      {
        "astId": 27937,
        "contract": "contracts/core/assets/unitsPool/UnitsPool.sol:UnitsPool",
        "label": "lastPurchaseTime",
        "offset": 0,
        "slot": "1",
        "type": "t_uint256"
      },
      {
        "astId": 27941,
        "contract": "contracts/core/assets/unitsPool/UnitsPool.sol:UnitsPool",
        "label": "unitsType",
        "offset": 0,
        "slot": "2",
        "type": "t_string_storage"
      },
      {
        "astId": 27945,
        "contract": "contracts/core/assets/unitsPool/UnitsPool.sol:UnitsPool",
        "label": "startingPrice",
        "offset": 0,
        "slot": "3",
        "type": "t_uint256"
      }
    ],
    "types": {
      "t_bool": {
        "encoding": "inplace",
        "label": "bool",
        "numberOfBytes": "1"
      },
      "t_contract(IZone)29387": {
        "encoding": "inplace",
        "label": "contract IZone",
        "numberOfBytes": "20"
      },
      "t_string_storage": {
        "encoding": "bytes",
        "label": "string",
        "numberOfBytes": "32"
      },
      "t_uint256": {
        "encoding": "inplace",
        "label": "uint256",
        "numberOfBytes": "32"
      },
      "t_uint8": {
        "encoding": "inplace",
        "label": "uint8",
        "numberOfBytes": "1"
      }
    }
  }
}